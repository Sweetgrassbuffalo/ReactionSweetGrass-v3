{"metadata":{"usedHelpers":["inherits","possibleConstructorReturn","classCallCheck","extends","interopRequireDefault"],"marked":[],"modules":{"imports":[{"source":"lodash/isEqual","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"_isEqual"}]},{"source":"react","imported":["default","Component","PropTypes"],"specifiers":[{"kind":"named","imported":"default","local":"React"},{"kind":"named","imported":"Component","local":"Component"},{"kind":"named","imported":"PropTypes","local":"PropTypes"}]},{"source":"meteor/meteor","imported":["Meteor"],"specifiers":[{"kind":"named","imported":"Meteor","local":"Meteor"}]},{"source":"/lib/api/compose","imported":["composeWithTracker"],"specifiers":[{"kind":"named","imported":"composeWithTracker","local":"composeWithTracker"}]},{"source":"/client/api","imported":["Reaction","i18next"],"specifiers":[{"kind":"named","imported":"Reaction","local":"Reaction"},{"kind":"named","imported":"i18next","local":"i18next"}]},{"source":"/lib/collections","imported":["Packages"],"specifiers":[{"kind":"named","imported":"Packages","local":"Packages"}]},{"source":"../components","imported":["SocialSettings"],"specifiers":[{"kind":"named","imported":"SocialSettings","local":"SocialSettings"}]},{"source":"../../lib/helpers","imported":["createSocialSettings"],"specifiers":[{"kind":"named","imported":"createSocialSettings","local":"createSocialSettings"}]}],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"/imports/plugins/included/social/client/containers/socialSettingsContainer.js","filenameRelative":"/imports/plugins/included/social/client/containers/socialSettingsContainer.js","inputSourceMap":{"version":3,"sources":["/imports/plugins/included/social/client/containers/socialSettingsContainer.js"],"names":["React","Component","PropTypes","Meteor","composeWithTracker","Reaction","i18next","Packages","SocialSettings","createSocialSettings","SocialSettingsContainer","propTypes","settings","object","constructor","props","state","componentWillReceiveProps","nextProps","setState","handleSettingEnable","event","isChecked","name","call","handleSettingExpand","card","isExpanded","updateUserPreferences","handleSettingsSave","settingName","values","error","Alerts","toast","t","defaultValue","render","composer","onData","subscription","Subscriptions","preferences","getUserPreferences","socialPackage","findOne","ready","packageData","socialSettings","decoratedComponent"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;GAAA,AAAO,AAAS,AAAW,AAAiB,AAE5C,AAAS,AAAc,AACvB,AAAS,AAA0B,AACnC,AAAS,AAAU,AAAe,AAClC,AAAS,AAAgB,AACzB,AAAS,AAAsB,AAC/B,AAAS,AAA4B,AAErC;;;;;mCAKE,AAAY;AAAO,AACjB;;qFAAA,AAAM,AAEN,AAAK,AAAQ,AACX;;UAaF,AAAO,AAAK,wDADd,AACE,AAAmD,AAAM,AAAW,AACrE;0EAED;AAAsB,AAAC,AAAO,AAAM,AAAM,AAAe,AACvD,AAAS,AAAsB,AAAmB,AAAiB,AACjE;;UAAA,AAAC,AAAO;AADyD;;AAAnE,wDADF,AAIC,4EAED,AAAqB,AAAC,AAAa,AAAW,AAC5C;AAAA,AAAO,AAAK,AAAwC,AAAO,AAAU,AAAC,AAAU,AAC9E,AAAI,AAAC,AAAO,AACV;;UAAA,AAAO,AACL,+BAAA,AAAQ,AAAE,qBAAV,AAAgD,AAAE;kBAAc,0EAAhB;AAAhD,YADF,CAEE,OAFF,AAID;iBANH,AAOC;0BARH,AASC;cAED;AAAS,AACP;AAAA,AACE,AAAC,AACC,AAAsB,AAAC,AAAK,AAC5B,AAAgB,AAAC,AAAK,AACtB,AAAe,AAAC,AAAK,AACrB,AAAI,AAAK,AACT,AAAS,AAAC,AAAK,AAAM,AAG1B;AApD6C;;UAShC;sBAEb;AAHC,AAAa,AACK;;AAIpB,AAA0B,AAAW,AACnC;;oCAAI,AAAQ,AAAU;uCAAlB,AAA4B,WAAhC,AAAI,AAA4B,AAAK,AAAM,AAAc,AAAO,AAC9D;UAAK,SAAL,AAAc,oDACZ;aAAU;8BAEb,AACF;AAJG,AAAc,AACQ;;AAK1B,AAAsB,AAAC,AAAO,AAAW,AAAS,AAChD;;;;;;;AAiCJ,iCAAA,AAAS,AAAS,AAAO,AAAQ,AAC/B;AAAM,AAAe,+BAAS,KAA9B,AAAqB,AAAuB,AAC5C;AAAM,AAAc,8BAApB,AAAoB,AAAS,AAAmB,AAAmB,AAAiB,AAEpF;AAAM,wBAAgB,KAAA,AAAS,AAAQ,AACrC,AAAM;cADR,AAAsB,AAAiB;6BAIvC,AAAI,AAAa,AAAS,AACxB;;AAAA,AAAO,AAAM,AACX,AAAa,AACb,AAAa;;;;;;EAlEnB,AAAsC,AAAU,AAC9C;;AADF,AAAM,wBACJ,AAAO;YACK,UADZ,AAAmB,AACG,AAGtB;AAJmB,AACjB;;AAiEE,kBAAgB,eAHL,AAGK,AAAqB;AAHvC,4CAKD;AAND,MAMO,8EACL,AAAO,AAAM,AACd;;UAGH,AAAM,AAAqB,AAAmB,AAAU,AAExD;AAJC;;MAIc,sBAAf","file":"/imports/plugins/included/social/client/containers/socialSettingsContainer.js.map","sourcesContent":["import React, { Component, PropTypes } from \"react\";\nimport { isEqual } from \"lodash\";\nimport { Meteor } from \"meteor/meteor\";\nimport { composeWithTracker } from \"/lib/api/compose\";\nimport { Reaction, i18next } from \"/client/api\";\nimport { Packages } from \"/lib/collections\";\nimport { SocialSettings } from \"../components\";\nimport { createSocialSettings } from \"../../lib/helpers\";\n\nclass SocialSettingsContainer extends Component {\n  static propTypes = {\n    settings: PropTypes.object\n  }\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      settings: props.settings\n    };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (isEqual(nextProps.settings, this.props.settings) === false) {\n      this.setState({\n        settings: nextProps.settings\n      });\n    }\n  }\n\n  handleSettingEnable = (event, isChecked, name) => {\n    Meteor.call(\"reaction-social/updateSocialSetting\", name, \"enabled\", isChecked);\n  }\n\n  handleSettingExpand = (event, card, name, isExpanded) => {\n    Reaction.updateUserPreferences(\"reaction-social\", \"settingsCards\", {\n      [name]: isExpanded\n    });\n  }\n\n  handleSettingsSave = (settingName, values) => {\n    Meteor.call(\"reaction-social/updateSocialSettings\", values.settings, (error) => {\n      if (!error) {\n        Alerts.toast(\n          i18next.t(\"admin.settings.socialSettingsSaved\", { defaultValue: \"Social settings saved\" }),\n          \"success\"\n        );\n      }\n    });\n  }\n\n  render() {\n    return (\n      <SocialSettings\n        onSettingEnableChange={this.handleSettingEnable}\n        onSettingExpand={this.handleSettingExpand}\n        onSettingsSave={this.handleSettingsSave}\n        {...this.props}\n        settings={this.state.settings}\n      />\n    );\n  }\n}\n\nfunction composer(props, onData) {\n  const subscription = Reaction.Subscriptions.Packages;\n  const preferences = Reaction.getUserPreferences(\"reaction-social\", \"settingsCards\", {});\n\n  const socialPackage = Packages.findOne({\n    name: \"reaction-social\"\n  });\n\n  if (subscription.ready()) {\n    onData(null, {\n      preferences: preferences,\n      packageData: socialPackage,\n      socialSettings: createSocialSettings(props)\n    });\n  } else {\n    onData(null, {});\n  }\n}\n\nconst decoratedComponent = composeWithTracker(composer)(SocialSettingsContainer);\n\nexport default decoratedComponent;\n"]},"env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],null],[[],{"polyfill":false}],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"/imports/plugins/included/social/client/containers/socialSettingsContainer.js.map","sourceFileName":"/imports/plugins/included/social/client/containers/socialSettingsContainer.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"socialSettingsContainer"},"ignored":false,"code":"var _extends2 = require(\"babel-runtime/helpers/extends\");\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _classCallCheck2 = require(\"babel-runtime/helpers/classCallCheck\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _possibleConstructorReturn2 = require(\"babel-runtime/helpers/possibleConstructorReturn\");\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require(\"babel-runtime/helpers/inherits\");\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nvar _isEqual = void 0;\n\nmodule.importSync(\"lodash/isEqual\", {\n  \"default\": function (v) {\n    _isEqual = v;\n  }\n}, 0);\nvar React = void 0,\n    Component = void 0,\n    PropTypes = void 0;\nmodule.importSync(\"react\", {\n  \"default\": function (v) {\n    React = v;\n  },\n  Component: function (v) {\n    Component = v;\n  },\n  PropTypes: function (v) {\n    PropTypes = v;\n  }\n}, 1);\nvar Meteor = void 0;\nmodule.importSync(\"meteor/meteor\", {\n  Meteor: function (v) {\n    Meteor = v;\n  }\n}, 2);\nvar composeWithTracker = void 0;\nmodule.importSync(\"/lib/api/compose\", {\n  composeWithTracker: function (v) {\n    composeWithTracker = v;\n  }\n}, 3);\nvar Reaction = void 0,\n    i18next = void 0;\nmodule.importSync(\"/client/api\", {\n  Reaction: function (v) {\n    Reaction = v;\n  },\n  i18next: function (v) {\n    i18next = v;\n  }\n}, 4);\nvar Packages = void 0;\nmodule.importSync(\"/lib/collections\", {\n  Packages: function (v) {\n    Packages = v;\n  }\n}, 5);\nvar SocialSettings = void 0;\nmodule.importSync(\"../components\", {\n  SocialSettings: function (v) {\n    SocialSettings = v;\n  }\n}, 6);\nvar createSocialSettings = void 0;\nmodule.importSync(\"../../lib/helpers\", {\n  createSocialSettings: function (v) {\n    createSocialSettings = v;\n  }\n}, 7);\n\nvar SocialSettingsContainer = function (_Component) {\n  (0, _inherits3.default)(SocialSettingsContainer, _Component);\n\n  function SocialSettingsContainer(props) {\n    (0, _classCallCheck3.default)(this, SocialSettingsContainer);\n\n    var _this = (0, _possibleConstructorReturn3.default)(this, _Component.call(this, props));\n\n    _this.handleSettingEnable = function (event, isChecked, name) {\n      Meteor.call(\"reaction-social/updateSocialSetting\", name, \"enabled\", isChecked);\n    };\n\n    _this.handleSettingExpand = function (event, card, name, isExpanded) {\n      var _Reaction$updateUserP;\n\n      Reaction.updateUserPreferences(\"reaction-social\", \"settingsCards\", (_Reaction$updateUserP = {}, _Reaction$updateUserP[name] = isExpanded, _Reaction$updateUserP));\n    };\n\n    _this.handleSettingsSave = function (settingName, values) {\n      Meteor.call(\"reaction-social/updateSocialSettings\", values.settings, function (error) {\n        if (!error) {\n          Alerts.toast(i18next.t(\"admin.settings.socialSettingsSaved\", {\n            defaultValue: \"Social settings saved\"\n          }), \"success\");\n        }\n      });\n    };\n\n    _this.state = {\n      settings: props.settings\n    };\n    return _this;\n  }\n\n  SocialSettingsContainer.prototype.componentWillReceiveProps = function () {\n    function componentWillReceiveProps(nextProps) {\n      if (_isEqual(nextProps.settings, this.props.settings) === false) {\n        this.setState({\n          settings: nextProps.settings\n        });\n      }\n    }\n\n    return componentWillReceiveProps;\n  }();\n\n  SocialSettingsContainer.prototype.render = function () {\n    function render() {\n      return React.createElement(SocialSettings, (0, _extends3.default)({\n        onSettingEnableChange: this.handleSettingEnable,\n        onSettingExpand: this.handleSettingExpand,\n        onSettingsSave: this.handleSettingsSave\n      }, this.props, {\n        settings: this.state.settings\n      }));\n    }\n\n    return render;\n  }();\n\n  return SocialSettingsContainer;\n}(Component);\n\nSocialSettingsContainer.propTypes = {\n  settings: PropTypes.object\n};\n\nfunction composer(props, onData) {\n  var subscription = Reaction.Subscriptions.Packages;\n  var preferences = Reaction.getUserPreferences(\"reaction-social\", \"settingsCards\", {});\n  var socialPackage = Packages.findOne({\n    name: \"reaction-social\"\n  });\n\n  if (subscription.ready()) {\n    onData(null, {\n      preferences: preferences,\n      packageData: socialPackage,\n      socialSettings: createSocialSettings(props)\n    });\n  } else {\n    onData(null, {});\n  }\n}\n\nvar decoratedComponent = composeWithTracker(composer)(SocialSettingsContainer);\nmodule.export(\"default\", exports.default = decoratedComponent);","map":{"version":3,"sources":["/imports/plugins/included/social/client/containers/socialSettingsContainer.js"],"names":["React","Component","PropTypes","Meteor","composeWithTracker","Reaction","i18next","Packages","SocialSettings","createSocialSettings","SocialSettingsContainer","propTypes","settings","object","constructor","props","state","componentWillReceiveProps","nextProps","setState","handleSettingEnable","event","isChecked","name","call","handleSettingExpand","card","isExpanded","updateUserPreferences","handleSettingsSave","settingName","values","error","Alerts","toast","t","defaultValue","render","composer","onData","subscription","Subscriptions","preferences","getUserPreferences","socialPackage","findOne","ready","packageData","socialSettings","decoratedComponent"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;GAAA,AAAO,AAAS,AAAW,AAAiB,AAE5C,AAAS,AAAc,AACvB,AAAS,AAA0B,AACnC,AAAS,AAAU,AAAe,AAClC,AAAS,AAAgB,AACzB,AAAS,AAAsB,AAC/B,AAAS,AAA4B,AAErC;;;;;mCAKE,AAAY;AAAO,AACjB;;qFAAA,AAAM,AAEN,AAAK,AAAQ,AACX;;UAaF,AAAO,AAAK,wDADd,AACE,AAAmD,AAAM,AAAW,AACrE;0EAED;AAAsB,AAAC,AAAO,AAAM,AAAM,AAAe,AACvD,AAAS,AAAsB,AAAmB,AAAiB,AACjE;;UAAA,AAAC,AAAO;AADyD;;AAAnE,wDADF,AAIC,4EAED,AAAqB,AAAC,AAAa,AAAW,AAC5C;AAAA,AAAO,AAAK,AAAwC,AAAO,AAAU,AAAC,AAAU,AAC9E,AAAI,AAAC,AAAO,AACV;;UAAA,AAAO,AACL,+BAAA,AAAQ,AAAE,qBAAV,AAAgD,AAAE;kBAAc,0EAAhB;AAAhD,YADF,CAEE,OAFF,AAID;iBANH,AAOC;0BARH,AASC;cAED;AAAS,AACP;AAAA,AACE,AAAC,AACC,AAAsB,AAAC,AAAK,AAC5B,AAAgB,AAAC,AAAK,AACtB,AAAe,AAAC,AAAK,AACrB,AAAI,AAAK,AACT,AAAS,AAAC,AAAK,AAAM,AAG1B;AApD6C;;UAShC;sBAEb;AAHC,AAAa,AACK;;AAIpB,AAA0B,AAAW,AACnC;;oCAAI,AAAQ,AAAU;uCAAlB,AAA4B,WAAhC,AAAI,AAA4B,AAAK,AAAM,AAAc,AAAO,AAC9D;UAAK,SAAL,AAAc,oDACZ;aAAU;8BAEb,AACF;AAJG,AAAc,AACQ;;AAK1B,AAAsB,AAAC,AAAO,AAAW,AAAS,AAChD;;;;;;;AAiCJ,iCAAA,AAAS,AAAS,AAAO,AAAQ,AAC/B;AAAM,AAAe,+BAAS,KAA9B,AAAqB,AAAuB,AAC5C;AAAM,AAAc,8BAApB,AAAoB,AAAS,AAAmB,AAAmB,AAAiB,AAEpF;AAAM,wBAAgB,KAAA,AAAS,AAAQ,AACrC,AAAM;cADR,AAAsB,AAAiB;6BAIvC,AAAI,AAAa,AAAS,AACxB;;AAAA,AAAO,AAAM,AACX,AAAa,AACb,AAAa;;;;;;EAlEnB,AAAsC,AAAU,AAC9C;;AADF,AAAM,wBACJ,AAAO;YACK,UADZ,AAAmB,AACG,AAGtB;AAJmB,AACjB;;AAiEE,kBAAgB,eAHL,AAGK,AAAqB;AAHvC,4CAKD;AAND,MAMO,8EACL,AAAO,AAAM,AACd;;UAGH,AAAM,AAAqB,AAAmB,AAAU,AAExD;AAJC;;MAIc,sBAAf","file":"/imports/plugins/included/social/client/containers/socialSettingsContainer.js.map","sourcesContent":["import React, { Component, PropTypes } from \"react\";\nimport { isEqual } from \"lodash\";\nimport { Meteor } from \"meteor/meteor\";\nimport { composeWithTracker } from \"/lib/api/compose\";\nimport { Reaction, i18next } from \"/client/api\";\nimport { Packages } from \"/lib/collections\";\nimport { SocialSettings } from \"../components\";\nimport { createSocialSettings } from \"../../lib/helpers\";\n\nclass SocialSettingsContainer extends Component {\n  static propTypes = {\n    settings: PropTypes.object\n  }\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      settings: props.settings\n    };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (isEqual(nextProps.settings, this.props.settings) === false) {\n      this.setState({\n        settings: nextProps.settings\n      });\n    }\n  }\n\n  handleSettingEnable = (event, isChecked, name) => {\n    Meteor.call(\"reaction-social/updateSocialSetting\", name, \"enabled\", isChecked);\n  }\n\n  handleSettingExpand = (event, card, name, isExpanded) => {\n    Reaction.updateUserPreferences(\"reaction-social\", \"settingsCards\", {\n      [name]: isExpanded\n    });\n  }\n\n  handleSettingsSave = (settingName, values) => {\n    Meteor.call(\"reaction-social/updateSocialSettings\", values.settings, (error) => {\n      if (!error) {\n        Alerts.toast(\n          i18next.t(\"admin.settings.socialSettingsSaved\", { defaultValue: \"Social settings saved\" }),\n          \"success\"\n        );\n      }\n    });\n  }\n\n  render() {\n    return (\n      <SocialSettings\n        onSettingEnableChange={this.handleSettingEnable}\n        onSettingExpand={this.handleSettingExpand}\n        onSettingsSave={this.handleSettingsSave}\n        {...this.props}\n        settings={this.state.settings}\n      />\n    );\n  }\n}\n\nfunction composer(props, onData) {\n  const subscription = Reaction.Subscriptions.Packages;\n  const preferences = Reaction.getUserPreferences(\"reaction-social\", \"settingsCards\", {});\n\n  const socialPackage = Packages.findOne({\n    name: \"reaction-social\"\n  });\n\n  if (subscription.ready()) {\n    onData(null, {\n      preferences: preferences,\n      packageData: socialPackage,\n      socialSettings: createSocialSettings(props)\n    });\n  } else {\n    onData(null, {});\n  }\n}\n\nconst decoratedComponent = composeWithTracker(composer)(SocialSettingsContainer);\n\nexport default decoratedComponent;\n"]},"hash":"100429e57e17d75faade06597cb5db6b40dfa223"}
