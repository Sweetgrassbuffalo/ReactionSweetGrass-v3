{"metadata":{"usedHelpers":["inherits","possibleConstructorReturn","classCallCheck","interopRequireDefault"],"marked":[],"modules":{"imports":[{"source":"react","imported":["default","Component","PropTypes"],"specifiers":[{"kind":"named","imported":"default","local":"React"},{"kind":"named","imported":"Component","local":"Component"},{"kind":"named","imported":"PropTypes","local":"PropTypes"}]},{"source":"/lib/api/compose","imported":["composeWithTracker"],"specifiers":[{"kind":"named","imported":"composeWithTracker","local":"composeWithTracker"}]},{"source":"/lib/api","imported":["ReactionProduct"],"specifiers":[{"kind":"named","imported":"ReactionProduct","local":"ReactionProduct"}]},{"source":"/imports/plugins/included/social/client/components/socialButtons","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"SocialButtons"}]},{"source":"/imports/plugins/included/social/lib/helpers","imported":["createSocialSettings"],"specifiers":[{"kind":"named","imported":"createSocialSettings","local":"createSocialSettings"}]},{"source":"/imports/plugins/core/ui/client/containers","imported":["EditContainer"],"specifiers":[{"kind":"named","imported":"EditContainer","local":"EditContainer"}]},{"source":"/lib/collections","imported":["Media"],"specifiers":[{"kind":"named","imported":"Media","local":"Media"}]}],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"/imports/plugins/included/product-detail-simple/client/containers/socialContainer.js","filenameRelative":"/imports/plugins/included/product-detail-simple/client/containers/socialContainer.js","inputSourceMap":{"version":3,"sources":["/imports/plugins/included/product-detail-simple/client/containers/socialContainer.js"],"names":["React","Component","PropTypes","composeWithTracker","ReactionProduct","SocialButtons","createSocialSettings","EditContainer","Media","ProductSocialContainer","render","props","data","socialSettings","composer","onData","product","selectedProduct","selectedVariant","title","mediaUrl","description","substring","media","findOne","$in","_id","sort","url","options","placement","buttonClassName","apps","facebook","facebookMsg","twitter","twitterMsg","googleplus","itemtype","googleplusMsg","pinterest","pinterestMsg","propTypes","object"],"mappings":";;;;;;;;;;;;;;AAAA;IAAA;;OAA4C,WAA5C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;GACA,AAAS,AAA0B,AACnC,AAAS,AAAuB,AAChC,AAAO,AAAmB,AAC1B,AAAS,AAA4B,AACrC,AAAS,AAAqB,AAC9B,AAAS,AAAa,AAEtB;;IAAA,AAAM;;;;;;;;;sBACK,AACP;AACE,AAAC,AACC,AAAK,AAAC,AAAK,AAAM,AACjB,AAAS,AACT,AAAM,AAAC,AAAC,AAAe,AAAc,AAAiB,AACtD,AAAa,AACb,AAAM,AACN,AAAY,AAAC,AAAC;AAEd,AAAC,AAAc,AAAI,AAAK,AAAM,AAChC;;AAAE,qBAVJ,AAUE,MAEH;;gEAd4C;;iBAiB/C;AAAA,AAAS,AAAS,wBAAlB,AAAyB,AAAQ,AAC/B,AAAM,AAAU,AAAgB,AAAqB,AACrD;;AAAM,4BAAkB,0BAAxB,AAAwB,AAAgB,AAAqB,AAC7D,AAAI,AAAQ,AAAQ,AACpB,AAAI;;AAEJ,AAAI,AAAiB,AACnB,AAAQ,AAAgB;;;;;;EAxB5B,AAAqC,AAAU,AAC7C;;AAwBC;qDAED;AAAI,MAAJ;sBAEA;MAAA,AAAI,AAAO,AAAQ,AAAgB,AAAU,AAC3C,AAAc,AAAQ,AAAY,AAAU,AAAG,AAChD;;;4BAED;AAAM,AAAQ,AAAM,AAAQ,AAC1B,AAAsB,AACpB;;MAFwB,AACJ,AACf,AACH,AAAgB,AAChB,AAAQ;;AAJA,AAOX,+CACD;AAAM,mDACJ;AAFD,AACK,AACiB;;AATzB,AAAc;;AAaV,WAAJ,AAAW,AACT,CAAW,AAAM,gBAAjB,AAAW,AACZ,aAED,AAAM,AAAU,AACd;AALF;;;AAIgB,2BAAA,AAId,AAAW,AACX,AAAiB,AACjB,AAAO,AACP;AAPc,AAEP,AAAQ,AACf;AAHc,AACR,AACN;;MAKM,OACJ;eAAU,MACR;AADQ,AACK,AAAQ,AAAe,AACpC,AAAO;;AAHL;UAKK,AACP;mBADO,AACM,AAAQ,AAAc,AACnC;AAFO,AAEA;AAPL,eASJ;AAAY,qBACV;WADU,AACA,AACV;;AACO;4CAET;eAAW,AACT,AAAa,AAAQ,AAAgB,AACrC;AAhBE,AASQ;;2CATR;eAPR,AAAgB,AA4BhB;AAPe,AAEF;AAKP;AAEN,AAAO,AAAM,kBACX;AADW,AACL,8CACN;eAFF,AAAa,AAId;AANC,AAAuB,AAAqB,AAE5C;;6CAMF;eAAA,AAAuB,AAAY,AACjC,AAAM,AAAU,AAChB,AAAgB,AAAU,AAG5B,AAAe,AAAmB,AAAU;;AAzB1B,AAEG,AAAQ,AAAiB,AACtC;AAPF;;;;;;;;;;;;OAtEC,OAAS,WAAhB,AAA2B,QAA3B","file":"/imports/plugins/included/product-detail-simple/client/containers/socialContainer.js.map","sourcesContent":["import React, { Component, PropTypes } from \"react\";\nimport { composeWithTracker } from \"/lib/api/compose\";\nimport { ReactionProduct } from \"/lib/api\";\nimport SocialButtons from \"/imports/plugins/included/social/client/components/socialButtons\";\nimport { createSocialSettings } from \"/imports/plugins/included/social/lib/helpers\";\nimport { EditContainer } from \"/imports/plugins/core/ui/client/containers\";\nimport { Media } from \"/lib/collections\";\n\nclass ProductSocialContainer extends Component {\n  render() {\n    return (\n      <EditContainer\n        data={this.props.data}\n        editView=\"ProductAdmin\"\n        field={[\"facebookMsg\", \"twitterMsg\", \"googleplusMsg\", \"pinterestMsg\"]}\n        i18nKeyLabel=\"productDetailEdit.editSocial\"\n        label=\"Edit Social Messaging\"\n        permissions={[\"createProduct\"]}\n      >\n        <SocialButtons {...this.props.socialSettings} />\n      </EditContainer>\n    );\n  }\n}\n\nfunction composer(props, onData) {\n  const product = ReactionProduct.selectedProduct() || {};\n  const selectedVariant = ReactionProduct.selectedVariant() || {};\n  let title = product.title;\n  let mediaUrl;\n\n  if (selectedVariant) {\n    title = selectedVariant.title;\n  }\n\n  let description;\n\n  if (typeof product.description === \"string\") {\n    description = product.description.substring(0, 254);\n  }\n\n  const media = Media.findOne({\n    \"metadata.variantId\": {\n      $in: [\n        selectedVariant._id,\n        product._id\n      ]\n    }\n  }, {\n    sort: {\n      \"metadata.priority\": 1\n    }\n  });\n\n  if (media) {\n    mediaUrl = media.url();\n  }\n\n  const options = {\n    data: product,\n    title: product.title,\n    description,\n    placement: \"productDetail\",\n    buttonClassName: \"fa-lg\",\n    media: mediaUrl,\n    apps: {\n      facebook: {\n        description: product.facebookMsg || description,\n        media: mediaUrl\n      },\n      twitter: {\n        description: product.twitterMsg || title,\n        media: mediaUrl\n      },\n      googleplus: {\n        itemtype: \"Product\",\n        description: product.googleplusMsg || description,\n        media: mediaUrl\n      },\n      pinterest: {\n        description: product.pinterestMsg || description,\n        media: mediaUrl\n      }\n    }\n  };\n\n  const socialSettings = createSocialSettings(options);\n\n  onData(null, {\n    data: product,\n    socialSettings\n  });\n}\n\nProductSocialContainer.propTypes = {\n  data: PropTypes.object,\n  socialSettings: PropTypes.object\n};\n\nexport default composeWithTracker(composer)(ProductSocialContainer);\n"]},"env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],null],[[],{"polyfill":false}],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"/imports/plugins/included/product-detail-simple/client/containers/socialContainer.js.map","sourceFileName":"/imports/plugins/included/product-detail-simple/client/containers/socialContainer.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"socialContainer"},"ignored":false,"code":"var _classCallCheck2 = require(\"babel-runtime/helpers/classCallCheck\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _possibleConstructorReturn2 = require(\"babel-runtime/helpers/possibleConstructorReturn\");\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require(\"babel-runtime/helpers/inherits\");\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nvar React = void 0,\n    Component = void 0,\n    PropTypes = void 0;\nmodule.importSync(\"react\", {\n  \"default\": function (v) {\n    React = v;\n  },\n  Component: function (v) {\n    Component = v;\n  },\n  PropTypes: function (v) {\n    PropTypes = v;\n  }\n}, 0);\nvar composeWithTracker = void 0;\nmodule.importSync(\"/lib/api/compose\", {\n  composeWithTracker: function (v) {\n    composeWithTracker = v;\n  }\n}, 1);\nvar ReactionProduct = void 0;\nmodule.importSync(\"/lib/api\", {\n  ReactionProduct: function (v) {\n    ReactionProduct = v;\n  }\n}, 2);\nvar SocialButtons = void 0;\nmodule.importSync(\"/imports/plugins/included/social/client/components/socialButtons\", {\n  \"default\": function (v) {\n    SocialButtons = v;\n  }\n}, 3);\nvar createSocialSettings = void 0;\nmodule.importSync(\"/imports/plugins/included/social/lib/helpers\", {\n  createSocialSettings: function (v) {\n    createSocialSettings = v;\n  }\n}, 4);\nvar EditContainer = void 0;\nmodule.importSync(\"/imports/plugins/core/ui/client/containers\", {\n  EditContainer: function (v) {\n    EditContainer = v;\n  }\n}, 5);\nvar Media = void 0;\nmodule.importSync(\"/lib/collections\", {\n  Media: function (v) {\n    Media = v;\n  }\n}, 6);\n\nvar ProductSocialContainer = function (_Component) {\n  (0, _inherits3.default)(ProductSocialContainer, _Component);\n\n  function ProductSocialContainer() {\n    (0, _classCallCheck3.default)(this, ProductSocialContainer);\n    return (0, _possibleConstructorReturn3.default)(this, _Component.apply(this, arguments));\n  }\n\n  ProductSocialContainer.prototype.render = function () {\n    function render() {\n      return React.createElement(\n        EditContainer,\n        {\n          data: this.props.data,\n          editView: \"ProductAdmin\",\n          field: [\"facebookMsg\", \"twitterMsg\", \"googleplusMsg\", \"pinterestMsg\"],\n          i18nKeyLabel: \"productDetailEdit.editSocial\",\n          label: \"Edit Social Messaging\",\n          permissions: [\"createProduct\"]\n        },\n        React.createElement(SocialButtons, this.props.socialSettings)\n      );\n    }\n\n    return render;\n  }();\n\n  return ProductSocialContainer;\n}(Component);\n\nfunction composer(props, onData) {\n  var product = ReactionProduct.selectedProduct() || {};\n  var selectedVariant = ReactionProduct.selectedVariant() || {};\n  var title = product.title;\n  var mediaUrl = void 0;\n\n  if (selectedVariant) {\n    title = selectedVariant.title;\n  }\n\n  var description = void 0;\n\n  if (typeof product.description === \"string\") {\n    description = product.description.substring(0, 254);\n  }\n\n  var media = Media.findOne({\n    \"metadata.variantId\": {\n      $in: [selectedVariant._id, product._id]\n    }\n  }, {\n    sort: {\n      \"metadata.priority\": 1\n    }\n  });\n\n  if (media) {\n    mediaUrl = media.url();\n  }\n\n  var options = {\n    data: product,\n    title: product.title,\n    description: description,\n    placement: \"productDetail\",\n    buttonClassName: \"fa-lg\",\n    media: mediaUrl,\n    apps: {\n      facebook: {\n        description: product.facebookMsg || description,\n        media: mediaUrl\n      },\n      twitter: {\n        description: product.twitterMsg || title,\n        media: mediaUrl\n      },\n      googleplus: {\n        itemtype: \"Product\",\n        description: product.googleplusMsg || description,\n        media: mediaUrl\n      },\n      pinterest: {\n        description: product.pinterestMsg || description,\n        media: mediaUrl\n      }\n    }\n  };\n  var socialSettings = createSocialSettings(options);\n  onData(null, {\n    data: product,\n    socialSettings: socialSettings\n  });\n}\n\nProductSocialContainer.propTypes = {\n  data: PropTypes.object,\n  socialSettings: PropTypes.object\n};\nmodule.export(\"default\", exports.default = composeWithTracker(composer)(ProductSocialContainer));","map":{"version":3,"sources":["/imports/plugins/included/product-detail-simple/client/containers/socialContainer.js"],"names":["React","Component","PropTypes","composeWithTracker","ReactionProduct","SocialButtons","createSocialSettings","EditContainer","Media","ProductSocialContainer","render","props","data","socialSettings","composer","onData","product","selectedProduct","selectedVariant","title","mediaUrl","description","substring","media","findOne","$in","_id","sort","url","options","placement","buttonClassName","apps","facebook","facebookMsg","twitter","twitterMsg","googleplus","itemtype","googleplusMsg","pinterest","pinterestMsg","propTypes","object"],"mappings":";;;;;;;;;;;;;;AAAA;IAAA;;OAA4C,WAA5C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;GACA,AAAS,AAA0B,AACnC,AAAS,AAAuB,AAChC,AAAO,AAAmB,AAC1B,AAAS,AAA4B,AACrC,AAAS,AAAqB,AAC9B,AAAS,AAAa,AAEtB;;IAAA,AAAM;;;;;;;;;sBACK,AACP;AACE,AAAC,AACC,AAAK,AAAC,AAAK,AAAM,AACjB,AAAS,AACT,AAAM,AAAC,AAAC,AAAe,AAAc,AAAiB,AACtD,AAAa,AACb,AAAM,AACN,AAAY,AAAC,AAAC;AAEd,AAAC,AAAc,AAAI,AAAK,AAAM,AAChC;;AAAE,qBAVJ,AAUE,MAEH;;gEAd4C;;iBAiB/C;AAAA,AAAS,AAAS,wBAAlB,AAAyB,AAAQ,AAC/B,AAAM,AAAU,AAAgB,AAAqB,AACrD;;AAAM,4BAAkB,0BAAxB,AAAwB,AAAgB,AAAqB,AAC7D,AAAI,AAAQ,AAAQ,AACpB,AAAI;;AAEJ,AAAI,AAAiB,AACnB,AAAQ,AAAgB;;;;;;EAxB5B,AAAqC,AAAU,AAC7C;;AAwBC;qDAED;AAAI,MAAJ;sBAEA;MAAA,AAAI,AAAO,AAAQ,AAAgB,AAAU,AAC3C,AAAc,AAAQ,AAAY,AAAU,AAAG,AAChD;;;4BAED;AAAM,AAAQ,AAAM,AAAQ,AAC1B,AAAsB,AACpB;;MAFwB,AACJ,AACf,AACH,AAAgB,AAChB,AAAQ;;AAJA,AAOX,+CACD;AAAM,mDACJ;AAFD,AACK,AACiB;;AATzB,AAAc;;AAaV,WAAJ,AAAW,AACT,CAAW,AAAM,gBAAjB,AAAW,AACZ,aAED,AAAM,AAAU,AACd;AALF;;;AAIgB,2BAAA,AAId,AAAW,AACX,AAAiB,AACjB,AAAO,AACP;AAPc,AAEP,AAAQ,AACf;AAHc,AACR,AACN;;MAKM,OACJ;eAAU,MACR;AADQ,AACK,AAAQ,AAAe,AACpC,AAAO;;AAHL;UAKK,AACP;mBADO,AACM,AAAQ,AAAc,AACnC;AAFO,AAEA;AAPL,eASJ;AAAY,qBACV;WADU,AACA,AACV;;AACO;4CAET;eAAW,AACT,AAAa,AAAQ,AAAgB,AACrC;AAhBE,AASQ;;2CATR;eAPR,AAAgB,AA4BhB;AAPe,AAEF;AAKP;AAEN,AAAO,AAAM,kBACX;AADW,AACL,8CACN;eAFF,AAAa,AAId;AANC,AAAuB,AAAqB,AAE5C;;6CAMF;eAAA,AAAuB,AAAY,AACjC,AAAM,AAAU,AAChB,AAAgB,AAAU,AAG5B,AAAe,AAAmB,AAAU;;AAzB1B,AAEG,AAAQ,AAAiB,AACtC;AAPF;;;;;;;;;;;;OAtEC,OAAS,WAAhB,AAA2B,QAA3B","file":"/imports/plugins/included/product-detail-simple/client/containers/socialContainer.js.map","sourcesContent":["import React, { Component, PropTypes } from \"react\";\nimport { composeWithTracker } from \"/lib/api/compose\";\nimport { ReactionProduct } from \"/lib/api\";\nimport SocialButtons from \"/imports/plugins/included/social/client/components/socialButtons\";\nimport { createSocialSettings } from \"/imports/plugins/included/social/lib/helpers\";\nimport { EditContainer } from \"/imports/plugins/core/ui/client/containers\";\nimport { Media } from \"/lib/collections\";\n\nclass ProductSocialContainer extends Component {\n  render() {\n    return (\n      <EditContainer\n        data={this.props.data}\n        editView=\"ProductAdmin\"\n        field={[\"facebookMsg\", \"twitterMsg\", \"googleplusMsg\", \"pinterestMsg\"]}\n        i18nKeyLabel=\"productDetailEdit.editSocial\"\n        label=\"Edit Social Messaging\"\n        permissions={[\"createProduct\"]}\n      >\n        <SocialButtons {...this.props.socialSettings} />\n      </EditContainer>\n    );\n  }\n}\n\nfunction composer(props, onData) {\n  const product = ReactionProduct.selectedProduct() || {};\n  const selectedVariant = ReactionProduct.selectedVariant() || {};\n  let title = product.title;\n  let mediaUrl;\n\n  if (selectedVariant) {\n    title = selectedVariant.title;\n  }\n\n  let description;\n\n  if (typeof product.description === \"string\") {\n    description = product.description.substring(0, 254);\n  }\n\n  const media = Media.findOne({\n    \"metadata.variantId\": {\n      $in: [\n        selectedVariant._id,\n        product._id\n      ]\n    }\n  }, {\n    sort: {\n      \"metadata.priority\": 1\n    }\n  });\n\n  if (media) {\n    mediaUrl = media.url();\n  }\n\n  const options = {\n    data: product,\n    title: product.title,\n    description,\n    placement: \"productDetail\",\n    buttonClassName: \"fa-lg\",\n    media: mediaUrl,\n    apps: {\n      facebook: {\n        description: product.facebookMsg || description,\n        media: mediaUrl\n      },\n      twitter: {\n        description: product.twitterMsg || title,\n        media: mediaUrl\n      },\n      googleplus: {\n        itemtype: \"Product\",\n        description: product.googleplusMsg || description,\n        media: mediaUrl\n      },\n      pinterest: {\n        description: product.pinterestMsg || description,\n        media: mediaUrl\n      }\n    }\n  };\n\n  const socialSettings = createSocialSettings(options);\n\n  onData(null, {\n    data: product,\n    socialSettings\n  });\n}\n\nProductSocialContainer.propTypes = {\n  data: PropTypes.object,\n  socialSettings: PropTypes.object\n};\n\nexport default composeWithTracker(composer)(ProductSocialContainer);\n"]},"hash":"7be8287476fda83e66a118fb02b7fb74d13012ed"}
