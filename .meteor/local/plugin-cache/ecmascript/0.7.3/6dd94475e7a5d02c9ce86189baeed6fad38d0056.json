{"metadata":{"usedHelpers":[],"marked":[],"modules":{"imports":[{"source":"/server/api","imported":["Reaction","Hooks","Logger"],"specifiers":[{"kind":"named","imported":"Reaction","local":"Reaction"},{"kind":"named","imported":"Hooks","local":"Hooks"},{"kind":"named","imported":"Logger","local":"Logger"}]},{"source":"/lib/collections","imported":["Shops"],"specifiers":[{"kind":"named","imported":"Shops","local":"Shops"}]}],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"/imports/plugins/included/notifications/server/init.js","filenameRelative":"/imports/plugins/included/notifications/server/init.js","inputSourceMap":{"version":3,"sources":["/imports/plugins/included/notifications/server/init.js"],"names":["Reaction","Hooks","Logger","Shops","addRolesToVisitors","debug","shop","findOne","getShopId","update","_id","$addToSet","defaultRoles","Events","add"],"mappings":"AAAA,IAAS;IAAT;IAAA,AAAmB;AAAnB,AAA0B,OAAc,WAAxC;;;;;;;;;;;;;;;;GACA,AAAS,AAAa;;AAEtB,SAAA,AAAS,qBAAqB,AAC1B;AACF;SAAA,AAAO,MAAP,AAAa,AACb;MAAM,OAAO,MAAA,AAAM,QAAQ,SAA3B,AAAa,AAAc,AAAS,AACpC;QAAA,AAAM,OAAO,KAAb,AAAkB;;oBACL,AAAE,AAAc;AAAhB;AADU,AACrB;AADF,AAAuB;;AAGxB;AAED;AAAA,AAAM,AAAO,AAAI,AAAiB,AAAM,AACtC,AACD","file":"/imports/plugins/included/notifications/server/init.js.map","sourcesContent":["import { Reaction, Hooks, Logger } from \"/server/api\";\nimport { Shops } from \"/lib/collections\";\n\nfunction addRolesToVisitors() {\n    // Add the about permission to all default roles since it's available to all\n  Logger.debug(\"Adding notification route permissions to default roles\");\n  const shop = Shops.findOne(Reaction.getShopId());\n  Shops.update(shop._id, {\n    $addToSet: { defaultRoles: \"notifications\" }\n  });\n}\n\nHooks.Events.add(\"afterCoreInit\", () => {\n  addRolesToVisitors();\n});\n"]},"env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],null],[[],{"polyfill":false}],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"/imports/plugins/included/notifications/server/init.js.map","sourceFileName":"/imports/plugins/included/notifications/server/init.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"init"},"ignored":false,"code":"var Reaction = void 0,\n    Hooks = void 0,\n    Logger = void 0;\nmodule.importSync(\"/server/api\", {\n  Reaction: function (v) {\n    Reaction = v;\n  },\n  Hooks: function (v) {\n    Hooks = v;\n  },\n  Logger: function (v) {\n    Logger = v;\n  }\n}, 0);\nvar Shops = void 0;\nmodule.importSync(\"/lib/collections\", {\n  Shops: function (v) {\n    Shops = v;\n  }\n}, 1);\n\nfunction addRolesToVisitors() {\n  // Add the about permission to all default roles since it's available to all\n  Logger.debug(\"Adding notification route permissions to default roles\");\n  var shop = Shops.findOne(Reaction.getShopId());\n  Shops.update(shop._id, {\n    $addToSet: {\n      defaultRoles: \"notifications\"\n    }\n  });\n}\n\nHooks.Events.add(\"afterCoreInit\", function () {\n  addRolesToVisitors();\n});","map":{"version":3,"sources":["/imports/plugins/included/notifications/server/init.js"],"names":["Reaction","Hooks","Logger","Shops","addRolesToVisitors","debug","shop","findOne","getShopId","update","_id","$addToSet","defaultRoles","Events","add"],"mappings":"AAAA,IAAS;IAAT;IAAA,AAAmB;AAAnB,AAA0B,OAAc,WAAxC;;;;;;;;;;;;;;;;GACA,AAAS,AAAa;;AAEtB,SAAA,AAAS,qBAAqB,AAC1B;AACF;SAAA,AAAO,MAAP,AAAa,AACb;MAAM,OAAO,MAAA,AAAM,QAAQ,SAA3B,AAAa,AAAc,AAAS,AACpC;QAAA,AAAM,OAAO,KAAb,AAAkB;;oBACL,AAAE,AAAc;AAAhB;AADU,AACrB;AADF,AAAuB;;AAGxB;AAED;AAAA,AAAM,AAAO,AAAI,AAAiB,AAAM,AACtC,AACD","file":"/imports/plugins/included/notifications/server/init.js.map","sourcesContent":["import { Reaction, Hooks, Logger } from \"/server/api\";\nimport { Shops } from \"/lib/collections\";\n\nfunction addRolesToVisitors() {\n    // Add the about permission to all default roles since it's available to all\n  Logger.debug(\"Adding notification route permissions to default roles\");\n  const shop = Shops.findOne(Reaction.getShopId());\n  Shops.update(shop._id, {\n    $addToSet: { defaultRoles: \"notifications\" }\n  });\n}\n\nHooks.Events.add(\"afterCoreInit\", () => {\n  addRolesToVisitors();\n});\n"]},"hash":"6dd94475e7a5d02c9ce86189baeed6fad38d0056"}
