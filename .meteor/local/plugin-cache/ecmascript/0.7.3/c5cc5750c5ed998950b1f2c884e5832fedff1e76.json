{"metadata":{"usedHelpers":[],"marked":[],"modules":{"imports":[{"source":"/lib/collections","imported":["Revisions"],"specifiers":[{"kind":"named","imported":"Revisions","local":"Revisions"}]}],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"/imports/plugins/core/revisions/server/publications.js","filenameRelative":"/imports/plugins/core/revisions/server/publications.js","inputSourceMap":{"version":3,"sources":["/imports/plugins/core/revisions/server/publications.js"],"names":["Revisions","Meteor","publish","productIds","check","Array","Roles","userIsInRole","userId","shop","_id","find","$in","ready"],"mappings":"AAAA,IAAS;AAAT,OAA0B,WAA1B,AAEA,A;;;;;AAMA,AAAO,AAAQ,AAAoB,AAAU,AAAY,AACvD,AAAM,AAAY,AAElB;;;;;;oBAEA,AAAI,AAAM,AAAa,AAAK,AAAQ,AAAC,AAAS,AAAS,AAAkB,AAAK,AAAM,AAClF,QAAO,AAAU,AAAK,AACpB;AAAK,AACH;;YAAK,0EADF;;AADP;aANJ,AAaE,AAAO,AAAK,AACb;AAHE;AALQ,AAAe;;;;CAFxB","file":"/imports/plugins/core/revisions/server/publications.js.map","sourcesContent":["import { Revisions } from \"/lib/collections\";\n\n/**\n * products publication\n * @param {Number} productScrollLimit - optional, defaults to 24\n * @param {Array} shops - array of shopId to retrieve product from.\n * @return {Object} return product cursor\n */\nMeteor.publish(\"ProductRevisions\", function (productIds) {\n  check(productIds, Array);\n\n  // Authorized content curators fo the shop get special publication of the product\n  // all all relevant revisions all is one package\n  if (Roles.userIsInRole(this.userId, [\"owner\", \"admin\", \"createProduct\"], shop._id)) {\n    return Revisions.find({\n      _id: {\n        $in: productIds\n      }\n    });\n  }\n\n  return this.ready();\n});\n"]},"env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],null],[[],{"polyfill":false}],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"/imports/plugins/core/revisions/server/publications.js.map","sourceFileName":"/imports/plugins/core/revisions/server/publications.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"publications"},"ignored":false,"code":"var Revisions = void 0;\nmodule.importSync(\"/lib/collections\", {\n  Revisions: function (v) {\n    Revisions = v;\n  }\n}, 0);\n/**\n * products publication\n * @param {Number} productScrollLimit - optional, defaults to 24\n * @param {Array} shops - array of shopId to retrieve product from.\n * @return {Object} return product cursor\n */Meteor.publish(\"ProductRevisions\", function (productIds) {\n  check(productIds, Array); // Authorized content curators fo the shop get special publication of the product\n  // all all relevant revisions all is one package\n\n  if (Roles.userIsInRole(this.userId, [\"owner\", \"admin\", \"createProduct\"], shop._id)) {\n    return Revisions.find({\n      _id: {\n        $in: productIds\n      }\n    });\n  }\n\n  return this.ready();\n});","map":{"version":3,"sources":["/imports/plugins/core/revisions/server/publications.js"],"names":["Revisions","Meteor","publish","productIds","check","Array","Roles","userIsInRole","userId","shop","_id","find","$in","ready"],"mappings":"AAAA,IAAS;AAAT,OAA0B,WAA1B,AAEA,A;;;;;AAMA,AAAO,AAAQ,AAAoB,AAAU,AAAY,AACvD,AAAM,AAAY,AAElB;;;;;;oBAEA,AAAI,AAAM,AAAa,AAAK,AAAQ,AAAC,AAAS,AAAS,AAAkB,AAAK,AAAM,AAClF,QAAO,AAAU,AAAK,AACpB;AAAK,AACH;;YAAK,0EADF;;AADP;aANJ,AAaE,AAAO,AAAK,AACb;AAHE;AALQ,AAAe;;;;CAFxB","file":"/imports/plugins/core/revisions/server/publications.js.map","sourcesContent":["import { Revisions } from \"/lib/collections\";\n\n/**\n * products publication\n * @param {Number} productScrollLimit - optional, defaults to 24\n * @param {Array} shops - array of shopId to retrieve product from.\n * @return {Object} return product cursor\n */\nMeteor.publish(\"ProductRevisions\", function (productIds) {\n  check(productIds, Array);\n\n  // Authorized content curators fo the shop get special publication of the product\n  // all all relevant revisions all is one package\n  if (Roles.userIsInRole(this.userId, [\"owner\", \"admin\", \"createProduct\"], shop._id)) {\n    return Revisions.find({\n      _id: {\n        $in: productIds\n      }\n    });\n  }\n\n  return this.ready();\n});\n"]},"hash":"c5cc5750c5ed998950b1f2c884e5832fedff1e76"}
