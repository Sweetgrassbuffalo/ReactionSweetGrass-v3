{"metadata":{"usedHelpers":[],"marked":[],"modules":{"imports":[{"source":"meteor/meteor","imported":["Meteor"],"specifiers":[{"kind":"named","imported":"Meteor","local":"Meteor"}]},{"source":"/lib/collections","imported":["Jobs"],"specifiers":[{"kind":"named","imported":"Jobs","local":"Jobs"}]},{"source":"meteor/alanning:roles","imported":["Roles"],"specifiers":[{"kind":"named","imported":"Roles","local":"Roles"}]}],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"/server/publications/email.js","filenameRelative":"/server/publications/email.js","inputSourceMap":{"version":3,"sources":["/server/publications/email.js"],"names":["Meteor","Jobs","Roles","publish","query","options","check","Match","Optional","Object","userIsInRole","userId","Counts","find","type","ready"],"mappings":"AAAA,IAAS;AAAT,OAAuB,WAAvB;;;;;;;;;;;;;;;;GACA,AAAS,AAAY,A,AACrB,AAAS,AAAa,AAEtB;AAIA,AAAO,AAAQ,AAAU,AAAU,AAAO,AAAS,AACjD,AAAM,AAAO,AAAM,AAAS;;;UACtB,QAAN,AAAe,AAAM,UAAN,AAAe,UAA9B,AAAe;8BAEf;AAAI,QAAM,eAAN,AAAmB,AAAK,SAA5B,AAAI,AAAgC,AAAC,AAAS,AAAS,AAAe,AACpE,AAAO,AAAQ,AAAM,AAAgB,AAAK,AAAK,AAAE;;YAAM,4DAAR;AAA/C,AAAqC;YACrC;;gBAAO,AAAK;YAAO;AAAF,KAAV;AAAP,AAAO,AAAU,AAAQ,AAC1B;;;AAPH,AASE,AAAO,AAAK,AACb,CARC","file":"/server/publications/email.js.map","sourcesContent":["import { Meteor } from \"meteor/meteor\";\nimport { Jobs } from \"/lib/collections\";\nimport { Roles } from \"meteor/alanning:roles\";\n\n/**\n * Email Job Logs\n * @type {Object} options - standard publication options object\n */\nMeteor.publish(\"Emails\", function (query, options) {\n  check(query, Match.Optional(Object));\n  check(options, Match.Optional(Object));\n\n  if (Roles.userIsInRole(this.userId, [\"owner\", \"admin\", \"dashboard\"])) {\n    Counts.publish(this, \"emails-count\", Jobs.find({ type: \"sendEmail\" }));\n    return Jobs.find({ type: \"sendEmail\" });\n  }\n\n  return this.ready();\n});\n"]},"env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],null],[[],{"polyfill":false}],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"/server/publications/email.js.map","sourceFileName":"/server/publications/email.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"email"},"ignored":false,"code":"var Meteor = void 0;\nmodule.importSync(\"meteor/meteor\", {\n  Meteor: function (v) {\n    Meteor = v;\n  }\n}, 0);\nvar Jobs = void 0;\nmodule.importSync(\"/lib/collections\", {\n  Jobs: function (v) {\n    Jobs = v;\n  }\n}, 1);\nvar Roles = void 0;\nmodule.importSync(\"meteor/alanning:roles\", {\n  Roles: function (v) {\n    Roles = v;\n  }\n}, 2);\n/**\n * Email Job Logs\n * @type {Object} options - standard publication options object\n */Meteor.publish(\"Emails\", function (query, options) {\n  check(query, Match.Optional(Object));\n  check(options, Match.Optional(Object));\n\n  if (Roles.userIsInRole(this.userId, [\"owner\", \"admin\", \"dashboard\"])) {\n    Counts.publish(this, \"emails-count\", Jobs.find({\n      type: \"sendEmail\"\n    }));\n    return Jobs.find({\n      type: \"sendEmail\"\n    });\n  }\n\n  return this.ready();\n});","map":{"version":3,"sources":["/server/publications/email.js"],"names":["Meteor","Jobs","Roles","publish","query","options","check","Match","Optional","Object","userIsInRole","userId","Counts","find","type","ready"],"mappings":"AAAA,IAAS;AAAT,OAAuB,WAAvB;;;;;;;;;;;;;;;;GACA,AAAS,AAAY,A,AACrB,AAAS,AAAa,AAEtB;AAIA,AAAO,AAAQ,AAAU,AAAU,AAAO,AAAS,AACjD,AAAM,AAAO,AAAM,AAAS;;;UACtB,QAAN,AAAe,AAAM,UAAN,AAAe,UAA9B,AAAe;8BAEf;AAAI,QAAM,eAAN,AAAmB,AAAK,SAA5B,AAAI,AAAgC,AAAC,AAAS,AAAS,AAAe,AACpE,AAAO,AAAQ,AAAM,AAAgB,AAAK,AAAK,AAAE;;YAAM,4DAAR;AAA/C,AAAqC;YACrC;;gBAAO,AAAK;YAAO;AAAF,KAAV;AAAP,AAAO,AAAU,AAAQ,AAC1B;;;AAPH,AASE,AAAO,AAAK,AACb,CARC","file":"/server/publications/email.js.map","sourcesContent":["import { Meteor } from \"meteor/meteor\";\nimport { Jobs } from \"/lib/collections\";\nimport { Roles } from \"meteor/alanning:roles\";\n\n/**\n * Email Job Logs\n * @type {Object} options - standard publication options object\n */\nMeteor.publish(\"Emails\", function (query, options) {\n  check(query, Match.Optional(Object));\n  check(options, Match.Optional(Object));\n\n  if (Roles.userIsInRole(this.userId, [\"owner\", \"admin\", \"dashboard\"])) {\n    Counts.publish(this, \"emails-count\", Jobs.find({ type: \"sendEmail\" }));\n    return Jobs.find({ type: \"sendEmail\" });\n  }\n\n  return this.ready();\n});\n"]},"hash":"8890ea684c536574d35d1de936de46910f7131c0"}
