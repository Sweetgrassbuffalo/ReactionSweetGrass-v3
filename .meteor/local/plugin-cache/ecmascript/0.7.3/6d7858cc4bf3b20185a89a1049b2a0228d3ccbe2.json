{"metadata":{"usedHelpers":[],"marked":[],"modules":{"imports":[],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"/packages/jeremy:stripe/stripe_client.js","filenameRelative":"/packages/jeremy:stripe/stripe_client.js","env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],null],[[],{"polyfill":false}],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"/packages/jeremy:stripe/stripe_client.js.map","sourceFileName":"/packages/jeremy:stripe/stripe_client.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"stripe_client"},"ignored":false,"code":"ReactiveStripe = {\n  load: _.once(function (stripeKey) {\n    var createHeadTag = function (srcUrl) {\n      var script = document.createElement(\"script\");\n      script.type = \"text/javascript\";\n      script.src = srcUrl;\n      document.head.appendChild(script);\n    };\n\n    createHeadTag(\"https://js.stripe.com/v2/\");\n    createHeadTag(\"https://checkout.stripe.com/checkout.js\");\n\n    this._checkReady(stripeKey);\n  }),\n  _checkReady: function (stripeKey) {\n    var _this = this;\n\n    var i = 0;\n    var checkReady = Meteor.setInterval(function () {\n      if (typeof Stripe !== \"undefined\" && typeof StripeCheckout !== \"undefined\") {\n        Stripe.setPublishableKey(stripeKey);\n\n        _this._loaded.set(true);\n\n        Meteor.clearInterval(checkReady);\n      } else {\n        i += 100;\n\n        if (i > 10000) {\n          // stop checking if the lib isn\"t loaded within 10 secs,\n          // then throw an error\n          Meteor.clearInterval(checkReady);\n          throw new Meteor.Error(\"Error loading Stripe libs from their CDN.\");\n        }\n      }\n    }, 100);\n  },\n  _loaded: new ReactiveVar(false),\n  loaded: function () {\n    return this._loaded.get();\n  }\n};","map":{"version":3,"sources":["/packages/jeremy:stripe/stripe_client.js"],"names":["ReactiveStripe","load","_","once","stripeKey","createHeadTag","srcUrl","script","document","createElement","type","src","head","appendChild","_checkReady","i","checkReady","Meteor","setInterval","Stripe","StripeCheckout","setPublishableKey","_loaded","set","clearInterval","Error","ReactiveVar","loaded","get"],"mappings":"AACAA,iBAAiB;AAEfC,QAAMC,EAAEC,IAAF,CAAO,UAASC,SAAT,EAAoB;AAC/B,QAAMC,gBAAgB,UAACC,MAAD,EAAY;AAChC,UAAIC,SAASC,SAASC,aAAT,CAAuB,QAAvB,CAAb;AACAF,aAAOG,IAAP,GAAc,iBAAd;AACAH,aAAOI,GAAP,GAAaL,MAAb;AACAE,eAASI,IAAT,CAAcC,WAAd,CAA0BN,MAA1B;AACD,KALD;;AAMAF,kBAAc,2BAAd;AACAA,kBAAc,yCAAd;;AAEA,SAAKS,WAAL,CAAiBV,SAAjB;AACD,GAXK,CAFS;AAefU,eAAa,UAASV,SAAT,EAAoB;AAAA;;AAC/B,QAAIW,IAAI,CAAR;AACA,QAAMC,aAAaC,OAAOC,WAAP,CAAmB,YAAM;AAC1C,UAAI,OAAOC,MAAP,KAAkB,WAAlB,IAAiC,OAAOC,cAAP,KAA0B,WAA/D,EAA4E;AAC1ED,eAAOE,iBAAP,CAAyBjB,SAAzB;;AACA,cAAKkB,OAAL,CAAaC,GAAb,CAAiB,IAAjB;;AACAN,eAAOO,aAAP,CAAqBR,UAArB;AACD,OAJD,MAIO;AACLD,aAAK,GAAL;;AACA,YAAIA,IAAI,KAAR,EAAe;AACb;AACA;AACAE,iBAAOO,aAAP,CAAqBR,UAArB;AACA,gBAAM,IAAIC,OAAOQ,KAAX,CAAiB,2CAAjB,CAAN;AACD;AACF;AACF,KAdkB,EAchB,GAdgB,CAAnB;AAeD,GAhCc;AAkCfH,WAAS,IAAII,WAAJ,CAAgB,KAAhB,CAlCM;AAoCfC,UAAQ,YAAW;AACjB,WAAO,KAAKL,OAAL,CAAaM,GAAb,EAAP;AACD;AAtCc,CAAjB","file":"/packages/jeremy:stripe/stripe_client.js.map","sourcesContent":["\nReactiveStripe = {\n\n  load: _.once(function(stripeKey) {\n    const createHeadTag = (srcUrl) => {\n      let script = document.createElement(\"script\");\n      script.type = \"text/javascript\";\n      script.src = srcUrl;\n      document.head.appendChild(script);\n    }\n    createHeadTag(\"https://js.stripe.com/v2/\");\n    createHeadTag(\"https://checkout.stripe.com/checkout.js\");\n\n    this._checkReady(stripeKey);\n  }),\n\n  _checkReady: function(stripeKey) {\n    let i = 0;\n    const checkReady = Meteor.setInterval(() => {\n      if (typeof Stripe !== \"undefined\" && typeof StripeCheckout !== \"undefined\") {\n        Stripe.setPublishableKey(stripeKey);\n        this._loaded.set(true);\n        Meteor.clearInterval(checkReady);\n      } else {\n        i += 100;\n        if (i > 10000) {\n          // stop checking if the lib isn\"t loaded within 10 secs,\n          // then throw an error\n          Meteor.clearInterval(checkReady);\n          throw new Meteor.Error(\"Error loading Stripe libs from their CDN.\");\n        }\n      }\n    }, 100);\n  },\n\n  _loaded: new ReactiveVar(false),\n\n  loaded: function() {\n    return this._loaded.get();\n  }\n\n};\n"]},"hash":"6d7858cc4bf3b20185a89a1049b2a0228d3ccbe2"}
