{"metadata":{"usedHelpers":[],"marked":[],"modules":{"imports":[{"source":"/client/api","imported":["Reaction","Logger"],"specifiers":[{"kind":"named","imported":"Reaction","local":"Reaction"},{"kind":"named","imported":"Logger","local":"Logger"}]},{"source":"/lib/collections","imported":["Tags"],"specifiers":[{"kind":"named","imported":"Tags","local":"Tags"}]},{"source":"meteor/session","imported":["Session"],"specifiers":[{"kind":"named","imported":"Session","local":"Session"}]},{"source":"meteor/meteor","imported":["Meteor"],"specifiers":[{"kind":"named","imported":"Meteor","local":"Meteor"}]},{"source":"meteor/templating","imported":["Template"],"specifiers":[{"kind":"named","imported":"Template","local":"Template"}]}],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"/client/modules/accounts/templates/dropdown/dropdown.js","filenameRelative":"/client/modules/accounts/templates/dropdown/dropdown.js","inputSourceMap":{"version":3,"sources":["/client/modules/accounts/templates/dropdown/dropdown.js"],"names":["Reaction","Logger","Tags","Session","Meteor","Template","loginDropdown","events","event","stopPropagation","template","preventDefault","$","dropdown","logout","error","warn","name","call","productId","currentTag","currentTagId","Error","get","findOne","Router","go","handle","showActionView","route","accountsDropdownApps","helpers","reactionAppsOptions","roles","Roles","getRolesForUser","userId","getShopId","provides","enabled","audience"],"mappings":"AAAA,IAAS;IAAT,AAAmB;AAAnB,OAAiC,WAAjC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;GACA,AAAS,AAAY,AACrB,AAAS,AAAe,AACxB,AAAS,AAAc,AACvB,AAAS,AAAgB,AAEzB,AAAS,AAAc,AAAO;AAE5B;AAF4B,AAQ5B,AAAwB,AAAC,AAAU,AACjC,AAAO,AAAM,AACd,AAED;;;;;;;;AAMA,AAAiB,AAAC,AAAO,AAAa,AACpC,AAAM,AACN,AAAS,AAAE,AAAoB,AAAS,AACxC,AACA,AAAO,AAAO,AAAC,AAAU,AACvB;;;;;KAAA,AAAI,AAAO,4CACT;UAAA,AAAO,AAAK,AAAqB,AAClC;4CACF,WA1ByB,AAsB1B,AAKD;;mCAED;;;;;AAMA,AAAwC,AAAU,AAAO,AAAU,AACjE;AAAA,AAAI,AAAK,AAAS,AAAiB,AACjC,AAAM,AACN,AAAM,AAEN,AAAO,AAAK,AAA0B,AAAC,AAAO,AAAc,AAC1D,AAAI,AACJ,AAAI;;;;;wEAEJ;QAAI,KAAJ,AAAW,0BACT;YAAA,AAAM,AAAI,AAAO,AAAM,AAAuB,AAC/C;AAFD,YAEO,AAAI,AAAW,AACpB,AAAe,AAAQ,AAAI,AAC3B;kBAAa,AAAK,AAAQ,oCAA1B,AAAa;YACb;YAAA,AAAI,AAAY,AACd,AAAO,AAAK,AAA8B,AAAW,AAAW,AAAM,AACvE;;;wDACD;mBAAA,AAAS,AAAO,AAAG,WAAnB,AAA8B,AAC5B;AAAQ,qCADoB;AAA9B,oCAGD;;0BAfH,AAgBC;kFApBH,AAqBC;AAAM,AAAI,AAAK,AAAS,AAAmB,AAC1C;;AAAM,0BAAN,GAD0C,AAE1C;AACS,oBAHJ,AAGL,AAAwB,AACzB,AAAM,AAAI,AAAK,AAAS,AAAK,AAAM,AAClC;AAFA;AAEA,AAAM,AAAQ,AAAK,AAAQ,AAAK,AAChC;AAAA,AAAS,AAAO,AAAG,AACpB;;YACD,kBAAA,AAAS,AAAE,AAAoB,AAAS,AACzC;8BAlEH,AAA8B;wCAqE9B;AAAS,uBAAT,AAA8B,QAA9B,KAAsC,AACpC;sBAAsB,GACpB;AACA;;AAAM,eAAQ,AAAM,oBAAN,AAAsB,SAApC,AAAc,AAAsB,AAAO,AAAU,AAAS,AAE9D;AAAO,AACL,AAAU,AACV,AAAS;;AACT,SAAU;AAHZ,mCAKD;;gEAVH,AAAsC;;;;;;;AAK3B","file":"/client/modules/accounts/templates/dropdown/dropdown.js.map","sourcesContent":["import { Reaction, Logger } from \"/client/api\";\nimport { Tags } from \"/lib/collections\";\nimport { Session } from \"meteor/session\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Template } from \"meteor/templating\";\n\nTemplate.loginDropdown.events({\n\n  /**\n   * Submit sign up form\n   * @param  {Event} event - jQuery Event\n   * @param  {Template} template - Blaze Template\n   * @return {void}\n   */\n  \"click .dropdown-menu\": (event) => {\n    return event.stopPropagation();\n  },\n\n  /**\n   * Submit sign up form\n   * @param  {Event} event - jQuery Event\n   * @param  {Template} template - Blaze Template\n   * @return {void}\n   */\n  \"click #logout\": (event, template) => {\n    event.preventDefault();\n    template.$(\".dropdown-toggle\").dropdown(\"toggle\");\n    // Meteor.logoutOtherClients();\n    Meteor.logout((error) => {\n      if (error) {\n        Logger.warn(\"Failed to logout.\", error);\n      }\n    });\n  },\n\n  /**\n   * Submit sign up form\n   * @param  {Event} event - jQuery Event\n   * @param  {Template} template - Blaze Template\n   * @return {void}\n   */\n  \"click .user-accounts-dropdown-apps a\": function (event, template) {\n    if (this.name === \"createProduct\") {\n      event.preventDefault();\n      event.stopPropagation();\n\n      Meteor.call(\"products/createProduct\", (error, productId) => {\n        let currentTag;\n        let currentTagId;\n\n        if (error) {\n          throw new Meteor.Error(\"createProduct error\", error);\n        } else if (productId) {\n          currentTagId = Session.get(\"currentTag\");\n          currentTag = Tags.findOne(currentTagId);\n          if (currentTag) {\n            Meteor.call(\"products/updateProductTags\", productId, currentTag.name, currentTagId);\n          }\n          Reaction.Router.go(\"product\", {\n            handle: productId\n          });\n        }\n      });\n    } else if (this.name !== \"account/profile\") {\n      event.preventDefault();\n      /** TMP **/\n      Reaction.showActionView(this);\n    } else if (this.route || this.name) {\n      const route = this.name || this.route;\n      Reaction.Router.go(route);\n    }\n    template.$(\".dropdown-toggle\").dropdown(\"toggle\");\n  }\n});\n\nTemplate.accountsDropdownApps.helpers({\n  reactionAppsOptions() {\n    // get shortcuts with audience permissions based on user roles\n    const roles = Roles.getRolesForUser(Meteor.userId(), Reaction.getShopId());\n\n    return {\n      provides: \"shortcut\",\n      enabled: true,\n      audience: roles\n    };\n  }\n});\n"]},"env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],null],[[],{"polyfill":false}],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"/client/modules/accounts/templates/dropdown/dropdown.js.map","sourceFileName":"/client/modules/accounts/templates/dropdown/dropdown.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"dropdown"},"ignored":false,"code":"var Reaction = void 0,\n    Logger = void 0;\nmodule.importSync(\"/client/api\", {\n  Reaction: function (v) {\n    Reaction = v;\n  },\n  Logger: function (v) {\n    Logger = v;\n  }\n}, 0);\nvar Tags = void 0;\nmodule.importSync(\"/lib/collections\", {\n  Tags: function (v) {\n    Tags = v;\n  }\n}, 1);\nvar Session = void 0;\nmodule.importSync(\"meteor/session\", {\n  Session: function (v) {\n    Session = v;\n  }\n}, 2);\nvar Meteor = void 0;\nmodule.importSync(\"meteor/meteor\", {\n  Meteor: function (v) {\n    Meteor = v;\n  }\n}, 3);\nvar Template = void 0;\nmodule.importSync(\"meteor/templating\", {\n  Template: function (v) {\n    Template = v;\n  }\n}, 4);\nTemplate.loginDropdown.events({\n  /**\n   * Submit sign up form\n   * @param  {Event} event - jQuery Event\n   * @param  {Template} template - Blaze Template\n   * @return {void}\n   */\"click .dropdown-menu\": function (event) {\n    return event.stopPropagation();\n  },\n  /**\n   * Submit sign up form\n   * @param  {Event} event - jQuery Event\n   * @param  {Template} template - Blaze Template\n   * @return {void}\n   */\"click #logout\": function (event, template) {\n    event.preventDefault();\n    template.$(\".dropdown-toggle\").dropdown(\"toggle\"); // Meteor.logoutOtherClients();\n\n    Meteor.logout(function (error) {\n      if (error) {\n        Logger.warn(\"Failed to logout.\", error);\n      }\n    });\n  },\n  /**\n   * Submit sign up form\n   * @param  {Event} event - jQuery Event\n   * @param  {Template} template - Blaze Template\n   * @return {void}\n   */\"click .user-accounts-dropdown-apps a\": function (event, template) {\n    if (this.name === \"createProduct\") {\n      event.preventDefault();\n      event.stopPropagation();\n      Meteor.call(\"products/createProduct\", function (error, productId) {\n        var currentTag = void 0;\n        var currentTagId = void 0;\n\n        if (error) {\n          throw new Meteor.Error(\"createProduct error\", error);\n        } else if (productId) {\n          currentTagId = Session.get(\"currentTag\");\n          currentTag = Tags.findOne(currentTagId);\n\n          if (currentTag) {\n            Meteor.call(\"products/updateProductTags\", productId, currentTag.name, currentTagId);\n          }\n\n          Reaction.Router.go(\"product\", {\n            handle: productId\n          });\n        }\n      });\n    } else if (this.name !== \"account/profile\") {\n      event.preventDefault(); /** TMP **/\n      Reaction.showActionView(this);\n    } else if (this.route || this.name) {\n      var route = this.name || this.route;\n      Reaction.Router.go(route);\n    }\n\n    template.$(\".dropdown-toggle\").dropdown(\"toggle\");\n  }\n});\nTemplate.accountsDropdownApps.helpers({\n  reactionAppsOptions: function () {\n    // get shortcuts with audience permissions based on user roles\n    var roles = Roles.getRolesForUser(Meteor.userId(), Reaction.getShopId());\n    return {\n      provides: \"shortcut\",\n      enabled: true,\n      audience: roles\n    };\n  }\n});","map":{"version":3,"sources":["/client/modules/accounts/templates/dropdown/dropdown.js"],"names":["Reaction","Logger","Tags","Session","Meteor","Template","loginDropdown","events","event","stopPropagation","template","preventDefault","$","dropdown","logout","error","warn","name","call","productId","currentTag","currentTagId","Error","get","findOne","Router","go","handle","showActionView","route","accountsDropdownApps","helpers","reactionAppsOptions","roles","Roles","getRolesForUser","userId","getShopId","provides","enabled","audience"],"mappings":"AAAA,IAAS;IAAT,AAAmB;AAAnB,OAAiC,WAAjC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;GACA,AAAS,AAAY,AACrB,AAAS,AAAe,AACxB,AAAS,AAAc,AACvB,AAAS,AAAgB,AAEzB,AAAS,AAAc,AAAO;AAE5B;AAF4B,AAQ5B,AAAwB,AAAC,AAAU,AACjC,AAAO,AAAM,AACd,AAED;;;;;;;;AAMA,AAAiB,AAAC,AAAO,AAAa,AACpC,AAAM,AACN,AAAS,AAAE,AAAoB,AAAS,AACxC,AACA,AAAO,AAAO,AAAC,AAAU,AACvB;;;;;KAAA,AAAI,AAAO,4CACT;UAAA,AAAO,AAAK,AAAqB,AAClC;4CACF,WA1ByB,AAsB1B,AAKD;;mCAED;;;;;AAMA,AAAwC,AAAU,AAAO,AAAU,AACjE;AAAA,AAAI,AAAK,AAAS,AAAiB,AACjC,AAAM,AACN,AAAM,AAEN,AAAO,AAAK,AAA0B,AAAC,AAAO,AAAc,AAC1D,AAAI,AACJ,AAAI;;;;;wEAEJ;QAAI,KAAJ,AAAW,0BACT;YAAA,AAAM,AAAI,AAAO,AAAM,AAAuB,AAC/C;AAFD,YAEO,AAAI,AAAW,AACpB,AAAe,AAAQ,AAAI,AAC3B;kBAAa,AAAK,AAAQ,oCAA1B,AAAa;YACb;YAAA,AAAI,AAAY,AACd,AAAO,AAAK,AAA8B,AAAW,AAAW,AAAM,AACvE;;;wDACD;mBAAA,AAAS,AAAO,AAAG,WAAnB,AAA8B,AAC5B;AAAQ,qCADoB;AAA9B,oCAGD;;0BAfH,AAgBC;kFApBH,AAqBC;AAAM,AAAI,AAAK,AAAS,AAAmB,AAC1C;;AAAM,0BAAN,GAD0C,AAE1C;AACS,oBAHJ,AAGL,AAAwB,AACzB,AAAM,AAAI,AAAK,AAAS,AAAK,AAAM,AAClC;AAFA;AAEA,AAAM,AAAQ,AAAK,AAAQ,AAAK,AAChC;AAAA,AAAS,AAAO,AAAG,AACpB;;YACD,kBAAA,AAAS,AAAE,AAAoB,AAAS,AACzC;8BAlEH,AAA8B;wCAqE9B;AAAS,uBAAT,AAA8B,QAA9B,KAAsC,AACpC;sBAAsB,GACpB;AACA;;AAAM,eAAQ,AAAM,oBAAN,AAAsB,SAApC,AAAc,AAAsB,AAAO,AAAU,AAAS,AAE9D;AAAO,AACL,AAAU,AACV,AAAS;;AACT,SAAU;AAHZ,mCAKD;;gEAVH,AAAsC;;;;;;;AAK3B","file":"/client/modules/accounts/templates/dropdown/dropdown.js.map","sourcesContent":["import { Reaction, Logger } from \"/client/api\";\nimport { Tags } from \"/lib/collections\";\nimport { Session } from \"meteor/session\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Template } from \"meteor/templating\";\n\nTemplate.loginDropdown.events({\n\n  /**\n   * Submit sign up form\n   * @param  {Event} event - jQuery Event\n   * @param  {Template} template - Blaze Template\n   * @return {void}\n   */\n  \"click .dropdown-menu\": (event) => {\n    return event.stopPropagation();\n  },\n\n  /**\n   * Submit sign up form\n   * @param  {Event} event - jQuery Event\n   * @param  {Template} template - Blaze Template\n   * @return {void}\n   */\n  \"click #logout\": (event, template) => {\n    event.preventDefault();\n    template.$(\".dropdown-toggle\").dropdown(\"toggle\");\n    // Meteor.logoutOtherClients();\n    Meteor.logout((error) => {\n      if (error) {\n        Logger.warn(\"Failed to logout.\", error);\n      }\n    });\n  },\n\n  /**\n   * Submit sign up form\n   * @param  {Event} event - jQuery Event\n   * @param  {Template} template - Blaze Template\n   * @return {void}\n   */\n  \"click .user-accounts-dropdown-apps a\": function (event, template) {\n    if (this.name === \"createProduct\") {\n      event.preventDefault();\n      event.stopPropagation();\n\n      Meteor.call(\"products/createProduct\", (error, productId) => {\n        let currentTag;\n        let currentTagId;\n\n        if (error) {\n          throw new Meteor.Error(\"createProduct error\", error);\n        } else if (productId) {\n          currentTagId = Session.get(\"currentTag\");\n          currentTag = Tags.findOne(currentTagId);\n          if (currentTag) {\n            Meteor.call(\"products/updateProductTags\", productId, currentTag.name, currentTagId);\n          }\n          Reaction.Router.go(\"product\", {\n            handle: productId\n          });\n        }\n      });\n    } else if (this.name !== \"account/profile\") {\n      event.preventDefault();\n      /** TMP **/\n      Reaction.showActionView(this);\n    } else if (this.route || this.name) {\n      const route = this.name || this.route;\n      Reaction.Router.go(route);\n    }\n    template.$(\".dropdown-toggle\").dropdown(\"toggle\");\n  }\n});\n\nTemplate.accountsDropdownApps.helpers({\n  reactionAppsOptions() {\n    // get shortcuts with audience permissions based on user roles\n    const roles = Roles.getRolesForUser(Meteor.userId(), Reaction.getShopId());\n\n    return {\n      provides: \"shortcut\",\n      enabled: true,\n      audience: roles\n    };\n  }\n});\n"]},"hash":"6bbea152b61c3ed12e05ab2947dfa154f0f63ab7"}
