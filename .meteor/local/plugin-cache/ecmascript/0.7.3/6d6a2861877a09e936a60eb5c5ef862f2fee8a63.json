{"metadata":{"usedHelpers":[],"marked":[],"modules":{"imports":[{"source":"autosize","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"autosize"}]},{"source":"/client/api","imported":["Reaction","i18next","Logger"],"specifiers":[{"kind":"named","imported":"Reaction","local":"Reaction"},{"kind":"named","imported":"i18next","local":"i18next"},{"kind":"named","imported":"Logger","local":"Logger"}]},{"source":"/lib/api","imported":["ReactionProduct"],"specifiers":[{"kind":"named","imported":"ReactionProduct","local":"ReactionProduct"}]},{"source":"meteor/meteor","imported":["Meteor"],"specifiers":[{"kind":"named","imported":"Meteor","local":"Meteor"}]},{"source":"meteor/session","imported":["Session"],"specifiers":[{"kind":"named","imported":"Session","local":"Session"}]},{"source":"meteor/templating","imported":["Template"],"specifiers":[{"kind":"named","imported":"Template","local":"Template"}]}],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"/imports/plugins/included/product-variant/client/templates/products/productDetail/edit.js","filenameRelative":"/imports/plugins/included/product-variant/client/templates/products/productDetail/edit.js","inputSourceMap":{"version":3,"sources":["/imports/plugins/included/product-variant/client/templates/products/productDetail/edit.js"],"names":["autosize","Reaction","i18next","Logger","ReactionProduct","Meteor","Session","Template","productDetailEdit","helpers","i18nPlaceholder","i18nKey","field","t","warn","events","event","self","productId","selectedProductId","call","instance","$","currentTarget","val","error","result","Alerts","inline","reason","placement","id","_id","err","res","removeSeen","removeType","Router","go","handle","animate","backgroundColor","type","set","productDetailField","hasPermission","fieldClass","focus","onRendered"],"mappings":"AAAA,IAAO;AAAP,OAAqB,WAArB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;GACA,A,AAAA,AAAS,AAAU,AAAS,AAAc,AAC1C,AAAS,AAAuB,AAChC,AAAS,AAAc,AACvB,AAAS,AAAe,AACxB,AAAS,AAAgB,AAEzB;AAIA,AAAS,AAAkB,AAAQ,AACjC,AAAiB,AAAY,AAC3B,AAAM,AAAW,AAAoB,AAAK,AAAM;;;AAC5C,AAAQ,AAAE,mBAAV,YAAJ,AAA2B,AAAS,AAClC;QAAA,AAAO,AAAM,sCAAb,AAA8D,AAAQ,AACvE;;AAFD,QAEO,gCACL;aAAA,AAAO,AAAQ,AAAE,yDAClB;WACF;uBARH,AAAmC,A,AAWnC;;AAIA,AAAS,AAAkB,AAAO;AAZ9B,IAaF,AAAyB,AAAU,AAAO,AACxC,AAAM,AAAO,AACb,AAAM,AAAY,AAAgB,AAClC,AAAO,AAAK,AAA+B,AAAW,AAAK,AACzD,AAAS,AAAW,AAAE,AAAM,AAAe,AAC3C,AAAC,AAAO,AAAW;;;AACjB,SAAA,AAAI,AAAO;AACF,AAAO,2BAAP,AAAc,AAAM,UAApB,AAA4B,OAA5B,AAAqC,AAC1C;eAD0C,AAC/B,AACX;QAAS,4BAFiC,AAG1C;WAAI,KAAK,+CAHiC,OAA5C,AAAO,2CAKR;iBACD;AAAA,AAAI;qBAEF;AAAI,AAAK,mBAAT,AAAI,AAAe,AAAS,AAC1B;cAAO,KAAP,AAAY,AAAsB,AAChC,AAAC,AAAK,AAAQ,AACZ,AAAO;AAJb,SADU;AAMJ;;UAAA,AAAI;AACF,AAAO,AAAW,AAClB;iBAAA,AAAO,AAAO,UAAI,SAAlB,AAA0B,AAAS,AACjC;sBAAW,sBADsB,AAEjC,0BAAS,KAFwB,AAGjC;AAAI,mBAHN,AAAmC,AAGxB;;qBAEZ;;;AACQ,2BACP;AAAS,yBAAT,AAAgB,AAAG,AAAW,AAC5B;oBAAQ,KADV,AAA8B,AAG/B;AAJD,AAAI;AAXR,AAgBG;;qBAnBK,AAqBT,AACD;;;AACA;AACA;AAAO,AAAS,AAAW,AAAE,AAAM,AAAe,AAAQ,AACxD,AAAiB;AADZ,AAEJ,AAAQ,AACT,SArBa,AACP,CAiBD,AAEI,AACQ;AAHnB,AAKD;;;;;AAvCL,AAwCG;AAEC,AAAK,AAAS,2BAAlB,AAA8B,AAC5B,AAAS,AAAS,AAAW,AAAE,AAAM,AACtC;AAFD,AAAI;;AAIJ,AAAO,AAAQ,AAAI,AAAa,AAAK,AAAO,AAC7C;;kCAnDH,A,AAAkC,AAsDlC;;AAIA;;AAAS,uBAAT,AAA4B,AAAO,yBACjC;AAA+B,AAAY,AACzC,AAAI,AAAS,AAAc,AAAkB,AAC3C,AAAM,AAAa,AAAa,AAAK;AArDjC,IAoDuC,AAE3C,AAAQ,AAAI,AAAY,AACxB,AACA,AAAO,AAAG,AAAG,AAAK,AAAM,AAAc,AACvC;;;AACF;A,AAGH;;yCAIA;AAAS,kBAAT,AAA2B,YAA3B,AAAsC,AAAY,AAChD,OADF,AACE,AAAO,AAAS,AAAE,AACnB;;;;;AAjBD,AAAmC","file":"/imports/plugins/included/product-variant/client/templates/products/productDetail/edit.js.map","sourcesContent":["import autosize from \"autosize\";\nimport { Reaction, i18next, Logger } from \"/client/api\";\nimport { ReactionProduct } from \"/lib/api\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Session } from \"meteor/session\";\nimport { Template } from \"meteor/templating\";\n\n/**\n * productDetailEdit helpers\n */\n\nTemplate.productDetailEdit.helpers({\n  i18nPlaceholder: function () {\n    const i18nKey = `productDetailEdit.${this.field}`;\n    if (i18next.t(i18nKey) === i18nKey) {\n      Logger.warn(`returning empty placeholder productDetailEdit: ${i18nKey} no i18n key found.`);\n    } else {\n      return i18next.t(i18nKey);\n    }\n  }\n});\n\n/**\n * productDetailEdit events\n */\n\nTemplate.productDetailEdit.events({\n  \"change input,textarea\": function (event) {\n    const self = this;\n    const productId = ReactionProduct.selectedProductId();\n    Meteor.call(\"products/updateProductField\", productId, self.field,\n      Template.instance().$(event.currentTarget).val(),\n      (error, result) => {\n        if (error) {\n          return Alerts.inline(error.reason, \"error\", {\n            placement: \"productManagement\",\n            i18nKey: \"productDetail.errorMsg\",\n            id: self._id\n          });\n        }\n        if (result) {\n          // redirect to new url on title change\n          if (self.field === \"title\") {\n            Meteor.call(\"products/setHandle\", productId,\n              (err, res) => {\n                Alerts.removeSeen();\n                if (err) {\n                  Alerts.removeType(\"error\");\n                  Alerts.inline(err.reason, \"error\", {\n                    placement: \"productManagement\",\n                    i18nKey: \"productDetail.errorMsg\",\n                    id: self._id\n                  });\n                }\n                if (res) {\n                  Reaction.Router.go(\"product\", {\n                    handle: res\n                  });\n                }\n              }\n            );\n          }\n          // animate updated field\n          // TODO this needs to be moved into a component\n          return Template.instance().$(event.currentTarget).animate({\n            backgroundColor: \"#e2f2e2\"\n          }).animate({\n            backgroundColor: \"#fff\"\n          });\n        }\n      });\n\n    if (this.type === \"textarea\") {\n      autosize(Template.instance().$(event.currentTarget));\n    }\n\n    return Session.set(\"editing-\" + this.field, false);\n  }\n});\n\n/**\n * productDetailField events\n */\n\nTemplate.productDetailField.events({\n  \"click .product-detail-field\": function () {\n    if (Reaction.hasPermission(\"createProduct\")) {\n      const fieldClass = \"editing-\" + this.field;\n      Session.set(fieldClass, true);\n      // Tracker.flush();\n      return $(`.${this.field}-edit-input`).focus();\n    }\n  }\n});\n\n/**\n * productDetailEdit onRendered\n */\n\nTemplate.productDetailEdit.onRendered(function () {\n  return autosize($(\"textarea\"));\n});\n"]},"env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],null],[[],{"polyfill":false}],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"/imports/plugins/included/product-variant/client/templates/products/productDetail/edit.js.map","sourceFileName":"/imports/plugins/included/product-variant/client/templates/products/productDetail/edit.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"edit"},"ignored":false,"code":"var autosize = void 0;\nmodule.importSync(\"autosize\", {\n  \"default\": function (v) {\n    autosize = v;\n  }\n}, 0);\nvar Reaction = void 0,\n    i18next = void 0,\n    Logger = void 0;\nmodule.importSync(\"/client/api\", {\n  Reaction: function (v) {\n    Reaction = v;\n  },\n  i18next: function (v) {\n    i18next = v;\n  },\n  Logger: function (v) {\n    Logger = v;\n  }\n}, 1);\nvar ReactionProduct = void 0;\nmodule.importSync(\"/lib/api\", {\n  ReactionProduct: function (v) {\n    ReactionProduct = v;\n  }\n}, 2);\nvar Meteor = void 0;\nmodule.importSync(\"meteor/meteor\", {\n  Meteor: function (v) {\n    Meteor = v;\n  }\n}, 3);\nvar Session = void 0;\nmodule.importSync(\"meteor/session\", {\n  Session: function (v) {\n    Session = v;\n  }\n}, 4);\nvar Template = void 0;\nmodule.importSync(\"meteor/templating\", {\n  Template: function (v) {\n    Template = v;\n  }\n}, 5);\n/**\n * productDetailEdit helpers\n */Template.productDetailEdit.helpers({\n  i18nPlaceholder: function () {\n    var i18nKey = \"productDetailEdit.\" + this.field;\n\n    if (i18next.t(i18nKey) === i18nKey) {\n      Logger.warn(\"returning empty placeholder productDetailEdit: \" + i18nKey + \" no i18n key found.\");\n    } else {\n      return i18next.t(i18nKey);\n    }\n  }\n}); /**\n     * productDetailEdit events\n     */\nTemplate.productDetailEdit.events({\n  \"change input,textarea\": function (event) {\n    var self = this;\n    var productId = ReactionProduct.selectedProductId();\n    Meteor.call(\"products/updateProductField\", productId, self.field, Template.instance().$(event.currentTarget).val(), function (error, result) {\n      if (error) {\n        return Alerts.inline(error.reason, \"error\", {\n          placement: \"productManagement\",\n          i18nKey: \"productDetail.errorMsg\",\n          id: self._id\n        });\n      }\n\n      if (result) {\n        // redirect to new url on title change\n        if (self.field === \"title\") {\n          Meteor.call(\"products/setHandle\", productId, function (err, res) {\n            Alerts.removeSeen();\n\n            if (err) {\n              Alerts.removeType(\"error\");\n              Alerts.inline(err.reason, \"error\", {\n                placement: \"productManagement\",\n                i18nKey: \"productDetail.errorMsg\",\n                id: self._id\n              });\n            }\n\n            if (res) {\n              Reaction.Router.go(\"product\", {\n                handle: res\n              });\n            }\n          });\n        } // animate updated field\n        // TODO this needs to be moved into a component\n\n\n        return Template.instance().$(event.currentTarget).animate({\n          backgroundColor: \"#e2f2e2\"\n        }).animate({\n          backgroundColor: \"#fff\"\n        });\n      }\n    });\n\n    if (this.type === \"textarea\") {\n      autosize(Template.instance().$(event.currentTarget));\n    }\n\n    return Session.set(\"editing-\" + this.field, false);\n  }\n}); /**\n     * productDetailField events\n     */\nTemplate.productDetailField.events({\n  \"click .product-detail-field\": function () {\n    if (Reaction.hasPermission(\"createProduct\")) {\n      var fieldClass = \"editing-\" + this.field;\n      Session.set(fieldClass, true); // Tracker.flush();\n\n      return $(\".\" + this.field + \"-edit-input\").focus();\n    }\n  }\n}); /**\n     * productDetailEdit onRendered\n     */\nTemplate.productDetailEdit.onRendered(function () {\n  return autosize($(\"textarea\"));\n});","map":{"version":3,"sources":["/imports/plugins/included/product-variant/client/templates/products/productDetail/edit.js"],"names":["autosize","Reaction","i18next","Logger","ReactionProduct","Meteor","Session","Template","productDetailEdit","helpers","i18nPlaceholder","i18nKey","field","t","warn","events","event","self","productId","selectedProductId","call","instance","$","currentTarget","val","error","result","Alerts","inline","reason","placement","id","_id","err","res","removeSeen","removeType","Router","go","handle","animate","backgroundColor","type","set","productDetailField","hasPermission","fieldClass","focus","onRendered"],"mappings":"AAAA,IAAO;AAAP,OAAqB,WAArB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;GACA,A,AAAA,AAAS,AAAU,AAAS,AAAc,AAC1C,AAAS,AAAuB,AAChC,AAAS,AAAc,AACvB,AAAS,AAAe,AACxB,AAAS,AAAgB,AAEzB;AAIA,AAAS,AAAkB,AAAQ,AACjC,AAAiB,AAAY,AAC3B,AAAM,AAAW,AAAoB,AAAK,AAAM;;;AAC5C,AAAQ,AAAE,mBAAV,YAAJ,AAA2B,AAAS,AAClC;QAAA,AAAO,AAAM,sCAAb,AAA8D,AAAQ,AACvE;;AAFD,QAEO,gCACL;aAAA,AAAO,AAAQ,AAAE,yDAClB;WACF;uBARH,AAAmC,A,AAWnC;;AAIA,AAAS,AAAkB,AAAO;AAZ9B,IAaF,AAAyB,AAAU,AAAO,AACxC,AAAM,AAAO,AACb,AAAM,AAAY,AAAgB,AAClC,AAAO,AAAK,AAA+B,AAAW,AAAK,AACzD,AAAS,AAAW,AAAE,AAAM,AAAe,AAC3C,AAAC,AAAO,AAAW;;;AACjB,SAAA,AAAI,AAAO;AACF,AAAO,2BAAP,AAAc,AAAM,UAApB,AAA4B,OAA5B,AAAqC,AAC1C;eAD0C,AAC/B,AACX;QAAS,4BAFiC,AAG1C;WAAI,KAAK,+CAHiC,OAA5C,AAAO,2CAKR;iBACD;AAAA,AAAI;qBAEF;AAAI,AAAK,mBAAT,AAAI,AAAe,AAAS,AAC1B;cAAO,KAAP,AAAY,AAAsB,AAChC,AAAC,AAAK,AAAQ,AACZ,AAAO;AAJb,SADU;AAMJ;;UAAA,AAAI;AACF,AAAO,AAAW,AAClB;iBAAA,AAAO,AAAO,UAAI,SAAlB,AAA0B,AAAS,AACjC;sBAAW,sBADsB,AAEjC,0BAAS,KAFwB,AAGjC;AAAI,mBAHN,AAAmC,AAGxB;;qBAEZ;;;AACQ,2BACP;AAAS,yBAAT,AAAgB,AAAG,AAAW,AAC5B;oBAAQ,KADV,AAA8B,AAG/B;AAJD,AAAI;AAXR,AAgBG;;qBAnBK,AAqBT,AACD;;;AACA;AACA;AAAO,AAAS,AAAW,AAAE,AAAM,AAAe,AAAQ,AACxD,AAAiB;AADZ,AAEJ,AAAQ,AACT,SArBa,AACP,CAiBD,AAEI,AACQ;AAHnB,AAKD;;;;;AAvCL,AAwCG;AAEC,AAAK,AAAS,2BAAlB,AAA8B,AAC5B,AAAS,AAAS,AAAW,AAAE,AAAM,AACtC;AAFD,AAAI;;AAIJ,AAAO,AAAQ,AAAI,AAAa,AAAK,AAAO,AAC7C;;kCAnDH,A,AAAkC,AAsDlC;;AAIA;;AAAS,uBAAT,AAA4B,AAAO,yBACjC;AAA+B,AAAY,AACzC,AAAI,AAAS,AAAc,AAAkB,AAC3C,AAAM,AAAa,AAAa,AAAK;AArDjC,IAoDuC,AAE3C,AAAQ,AAAI,AAAY,AACxB,AACA,AAAO,AAAG,AAAG,AAAK,AAAM,AAAc,AACvC;;;AACF;A,AAGH;;yCAIA;AAAS,kBAAT,AAA2B,YAA3B,AAAsC,AAAY,AAChD,OADF,AACE,AAAO,AAAS,AAAE,AACnB;;;;;AAjBD,AAAmC","file":"/imports/plugins/included/product-variant/client/templates/products/productDetail/edit.js.map","sourcesContent":["import autosize from \"autosize\";\nimport { Reaction, i18next, Logger } from \"/client/api\";\nimport { ReactionProduct } from \"/lib/api\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Session } from \"meteor/session\";\nimport { Template } from \"meteor/templating\";\n\n/**\n * productDetailEdit helpers\n */\n\nTemplate.productDetailEdit.helpers({\n  i18nPlaceholder: function () {\n    const i18nKey = `productDetailEdit.${this.field}`;\n    if (i18next.t(i18nKey) === i18nKey) {\n      Logger.warn(`returning empty placeholder productDetailEdit: ${i18nKey} no i18n key found.`);\n    } else {\n      return i18next.t(i18nKey);\n    }\n  }\n});\n\n/**\n * productDetailEdit events\n */\n\nTemplate.productDetailEdit.events({\n  \"change input,textarea\": function (event) {\n    const self = this;\n    const productId = ReactionProduct.selectedProductId();\n    Meteor.call(\"products/updateProductField\", productId, self.field,\n      Template.instance().$(event.currentTarget).val(),\n      (error, result) => {\n        if (error) {\n          return Alerts.inline(error.reason, \"error\", {\n            placement: \"productManagement\",\n            i18nKey: \"productDetail.errorMsg\",\n            id: self._id\n          });\n        }\n        if (result) {\n          // redirect to new url on title change\n          if (self.field === \"title\") {\n            Meteor.call(\"products/setHandle\", productId,\n              (err, res) => {\n                Alerts.removeSeen();\n                if (err) {\n                  Alerts.removeType(\"error\");\n                  Alerts.inline(err.reason, \"error\", {\n                    placement: \"productManagement\",\n                    i18nKey: \"productDetail.errorMsg\",\n                    id: self._id\n                  });\n                }\n                if (res) {\n                  Reaction.Router.go(\"product\", {\n                    handle: res\n                  });\n                }\n              }\n            );\n          }\n          // animate updated field\n          // TODO this needs to be moved into a component\n          return Template.instance().$(event.currentTarget).animate({\n            backgroundColor: \"#e2f2e2\"\n          }).animate({\n            backgroundColor: \"#fff\"\n          });\n        }\n      });\n\n    if (this.type === \"textarea\") {\n      autosize(Template.instance().$(event.currentTarget));\n    }\n\n    return Session.set(\"editing-\" + this.field, false);\n  }\n});\n\n/**\n * productDetailField events\n */\n\nTemplate.productDetailField.events({\n  \"click .product-detail-field\": function () {\n    if (Reaction.hasPermission(\"createProduct\")) {\n      const fieldClass = \"editing-\" + this.field;\n      Session.set(fieldClass, true);\n      // Tracker.flush();\n      return $(`.${this.field}-edit-input`).focus();\n    }\n  }\n});\n\n/**\n * productDetailEdit onRendered\n */\n\nTemplate.productDetailEdit.onRendered(function () {\n  return autosize($(\"textarea\"));\n});\n"]},"hash":"6d6a2861877a09e936a60eb5c5ef862f2fee8a63"}
