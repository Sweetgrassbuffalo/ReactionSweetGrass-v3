{"metadata":{"usedHelpers":["typeof","interopRequireDefault"],"marked":[],"modules":{"imports":[{"source":"moment-timezone","imported":["*"],"specifiers":[{"kind":"namespace","local":"tz"}]},{"source":"moment","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"moment"}]},{"source":"moment/min/locales.min.js","imported":[],"specifiers":[]},{"source":"meteor/meteor","imported":["Meteor"],"specifiers":[{"kind":"named","imported":"Meteor","local":"Meteor"}]},{"source":"meteor/templating","imported":["Template"],"specifiers":[{"kind":"named","imported":"Template","local":"Template"}]},{"source":"/client/api","imported":["i18next"],"specifiers":[{"kind":"named","imported":"i18next","local":"i18next"}]},{"source":"../","imported":["Reaction"],"specifiers":[{"kind":"named","imported":"Reaction","local":"Reaction"}]},{"source":"/lib/collections","imported":["*"],"specifiers":[{"kind":"namespace","local":"Collections"}]},{"source":"/lib/collections/schemas","imported":["*"],"specifiers":[{"kind":"namespace","local":"Schemas"}]},{"source":"/lib/api","imported":["toCamelCase"],"specifiers":[{"kind":"named","imported":"toCamelCase","local":"toCamelCase"}]}],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"/client/modules/core/helpers/templates.js","filenameRelative":"/client/modules/core/helpers/templates.js","inputSourceMap":{"version":3,"sources":["/client/modules/core/helpers/templates.js"],"names":["tz","moment","Meteor","Template","i18next","Reaction","Collections","Schemas","toCamelCase","registerHelper","Package","blaze","Blaze","shopId","getShopId","user","Accounts","isGuest","Roles","userIsInRole","isAnonymous","showDefaultOption","label","t","localLocale","lang","language","locale","monthOptions","push","value","months","index","hasOwnProperty","call","month","mnum","parseInt","yearOptions","year","Date","getFullYear","i","timezoneOptions","timezones","names","timezone","str","downCamel","replace","toLowerCase","toUpperCase","charAt","slice","shop","Shops","findOne","name","v1","operator","v2","Error","context","result","_","each","key","text","nl2br","Spacebars","SafeString","block","f","hash","format","from","nCount","pString"],"mappings":"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","file":"/client/modules/core/helpers/templates.js.map","sourcesContent":["import * as tz from \"moment-timezone\";\nimport moment from \"moment\";\nimport \"moment/min/locales.min.js\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Template } from \"meteor/templating\";\nimport { i18next } from \"/client/api\";\nimport { Reaction } from \"../\";\nimport * as Collections from \"/lib/collections\";\nimport * as Schemas from \"/lib/collections/schemas\";\nimport { toCamelCase } from \"/lib/api\";\n\n/*\n *\n * Reaction Spacebars helpers\n * See: http://docs.meteor.com/#/full/template_registerhelper\n *\n */\n\nTemplate.registerHelper(\"Collections\", function () {\n  return Collections;\n});\n\nTemplate.registerHelper(\"Schemas\", function () {\n  return Schemas;\n});\n\n/**\n * currentUser\n * @summary overrides Meteor Package.blaze currentUser method\n * @return {[Boolean]} returns true/null if user has registered\n */\nif (Package.blaze) {\n  Package.blaze.Blaze.Template.registerHelper(\"currentUser\", function () {\n    if (typeof Reaction === \"object\") {\n      const shopId = Reaction.getShopId();\n      const user = Accounts.user();\n      if (!shopId || typeof user !== \"object\") return null;\n      // shoppers should always be guests\n      const isGuest = Roles.userIsInRole(user, \"guest\", shopId);\n      // but if a user has never logged in then they are anonymous\n      const isAnonymous = Roles.userIsInRole(user, \"anonymous\", shopId);\n\n      return isGuest && !isAnonymous ? user : null;\n    }\n    return null;\n  });\n}\n\n/**\n * registerHelper monthOptions\n * @summary formats moment.js months into an array for autoform selector\n * @return {Array} returns array of months [value:, label:]\n */\nTemplate.registerHelper(\"monthOptions\", function (showDefaultOption = true) {\n  const label = i18next.t(\"app.monthOptions\", \"Choose month\");\n  const localLocale = tz;\n\n  // adding cases where our lang w/o region\n  // isn't predefined in moment.\n  // because using defineLocale throws\n  // ugly deprecation warnings, we aren't doing:\n  //\n  // localLocale.defineLocale(\"zh\", {\n  //   parentLocale: \"zh-cn\"\n  // });\n  let lang = i18next.language;\n  if (lang === \"zh\") {\n    lang = \"zh-cn\";\n  }\n\n  localLocale.locale(lang);\n  const monthOptions = [];\n\n  if (showDefaultOption) {\n    monthOptions.push({\n      value: \"\",\n      label: label\n    });\n  }\n\n  const months = localLocale.months();\n  // parse into autoform array\n  for (const index in months) {\n    if ({}.hasOwnProperty.call(months, index)) {\n      const month = months[index];\n      const mnum = parseInt(index, 10) + 1;\n      monthOptions.push({\n        value: mnum,\n        label: `${mnum} | ${month}`\n      });\n    }\n  }\n\n  return monthOptions;\n});\n\n/**\n * yearOptions\n * @summary formats moment.js next 9 years into array for autoform selector\n * @return {Array} returns array of years [value:, label:]\n */\nTemplate.registerHelper(\"yearOptions\", function (showDefaultOption = true) {\n  const label = i18next.t(\"app.yearOptions\", \"Choose year\");\n  const yearOptions = [];\n\n  if (showDefaultOption) {\n    yearOptions.push({\n      value: \"\",\n      label: label\n    });\n  }\n\n  let year = new Date().getFullYear();\n  for (let i = 1; i < 9; i++) {\n    yearOptions.push({\n      value: year,\n      label: year\n    });\n    year++;\n  }\n  return yearOptions;\n});\n\n/**\n * timezoneOptions\n * @summary formats moment.js timezones into array for autoform selector\n * @return {Array} returns array of timezones [value:, label:]\n */\nTemplate.registerHelper(\"timezoneOptions\", function () {\n  const label = i18next.t(\"app.timezoneOptions\", \"Choose timezone\");\n  const timezoneOptions = [{\n    value: \"\",\n    label: label\n  }];\n  const timezones = moment.tz.names();\n  for (const timezone of timezones) {\n    timezoneOptions.push({\n      value: timezone,\n      label: timezone\n    });\n  }\n  return timezoneOptions;\n});\n\n\n/**\n * camelToSpace\n * @summary convert a camelcased string to spaces\n * @param {String} str - camelcased string\n * @return {String} returns space formatted string\n */\nTemplate.registerHelper(\"camelToSpace\", function (str) {\n  const downCamel = str.replace(/\\W+/g, \"-\").replace(/([a-z\\d])([A-Z])/g, \"$1 $2\");\n  return downCamel.toLowerCase();\n});\n\n/**\n * toLowerCase\n * @summary convert a string to lower case\n * @param {String} str - string\n * @return {String} returns lowercased string\n */\nTemplate.registerHelper(\"toLowerCase\", function (str) {\n  return str.toLowerCase();\n});\n\n/**\n * toUpperCase\n * @summary convert a string to upper case\n * @param {String} str - string\n * @return {String} returns uppercased string\n */\nTemplate.registerHelper(\"toUpperCase\", function (str) {\n  return str.toUpperCase();\n});\n\n/**\n * capitalize\n * @summary capitalize first character of string\n * @param {String} str - string\n * @return {String} returns string with first letter capitalized\n */\nTemplate.registerHelper(\"capitalize\", function (str) {\n  return str.charAt(0).toUpperCase() + str.slice(1);\n});\n\n/**\n * toCamelCase\n * @summary camelCases a string\n * @param {String} str - string\n * @return {String|undefined} returns camelCased string\n */\nTemplate.registerHelper(\"toCamelCase\", function (str) {\n  return !!str && toCamelCase(str);\n});\n\n\n/**\n * siteName\n * @summary get the shop name\n * @return {String} returns site name\n */\nTemplate.registerHelper(\"siteName\", function () {\n  const shop = Collections.Shops.findOne();\n  return typeof shop === \"object\" && shop.name ? shop.name : \"\";\n});\n\n/*\n *  General helpers for template functionality\n */\n\n/**\n * condition\n * @summary conditional string comparison template helper\n * @example {{#if condition status \"eq\" ../value}}\n * @param {String} v1 - first variable to compare\n * @param {String} operator - eq,neq,ideq,or,lt,gt comparision operator\n * @param {String} v2 - second variable to compare\n * @return {Boolean} returns true/false\n */\nTemplate.registerHelper(\"condition\", function (v1, operator, v2) {\n  switch (operator) {\n    case \"==\":\n    case \"eq\":\n      return v1 === v2;\n    case \"!=\":\n    case \"neq\":\n      return v1 !== v2;\n    case \"===\":\n    case \"ideq\":\n      return v1 === v2;\n    case \"!==\":\n    case \"nideq\":\n      return v1 !== v2;\n    case \"&&\":\n    case \"and\":\n      return v1 && v2;\n    case \"||\":\n    case \"or\":\n      return v1 || v2;\n    case \"<\":\n    case \"lt\":\n      return v1 < v2;\n    case \"<=\":\n    case \"lte\":\n      return v1 <= v2;\n    case \">\":\n    case \"gt\":\n      return v1 > v2;\n    case \">=\":\n    case \"gte\":\n      return v1 >= v2;\n    default:\n      throw new Meteor.Error(`Undefined conditional operator ${operator}`);\n  }\n});\n\n/**\n * orElse\n * @summary if this is true, or else this\n * @param {String} v1 - variable one\n * @param {String} v2 - variable two\n * @return {String} returns v1 || v2\n */\nTemplate.registerHelper(\"orElse\", function (v1, v2) {\n  return v1 || v2;\n});\n\n/**\n * key_value\n * @summary template helper pushing object key/value into array\n * @param {Object} context - object to parse into key / value\n * @return {Array} returns array[key:,value:]\n */\nTemplate.registerHelper(\"key_value\", function (context) {\n  const result = [];\n  _.each(context, function (value, key) {\n    return result.push({\n      key: key,\n      value: value\n    });\n  });\n  return result;\n});\n\n/**\n * nl2br\n * @summary template helper nl2br - Converts new line (\\n\\r) to <br>\n * from http://phpjs.org/functions/nl2br:480\n * @param {String} text - text\n * @returns {String} returns formatted Spacebars.SafeString\n */\nTemplate.registerHelper(\"nl2br\", function (text) {\n  const nl2br = (text + \"\").replace(/([^>\\r\\n]?)(\\r\\n|\\n\\r|\\r|\\n)/g, \"$1\" +\n    \"<br>\" + \"$2\");\n  return new Spacebars.SafeString(nl2br);\n});\n\n/**\n * dateFormat\n * @description\n * format an ISO date using Moment.js\n * http://momentjs.com/\n * moment syntax example: moment(Date(\"2011-07-18T15:50:52\")).format(\"MMMM YYYY\")\n * @example {{dateFormat creation_date format=\"MMMM YYYY\"}}\n * @param {String} context - moment context\n * @param {String} block - hash of moment options, ie: format=\"\"\n * @return {Date} return formatted date\n */\nTemplate.registerHelper(\"dateFormat\", function (context, block) {\n  const f = block.hash.format || \"MMM DD, YYYY hh:mm:ss A\";\n  return moment(context).format(f);\n});\n\n/**\n * timeAgo\n * @description\n * accept an ISO date using Moment.js and return elapsed time from today\n * http://momentjs.com/\n * moment syntax example: moment(Date(\"2011-07-18T15:50:52\")).from(new Date())\n * @example {{timeAgo creation_date}}\n * @param {String} context - moment context\n * @return {Date} return formatted date\n */\nTemplate.registerHelper(\"timeAgo\", function (context) {\n  return moment(context).from(new Date());\n});\n\n\n/**\n * pluralize\n * @summary general helper for plurization of strings\n * @example {{plurize \"1 thing\"}}\n * @param {String} nCount - number, ie \"1 \"\n * @param {String} pString - plural string ie \" thing\"\n * @todo adapt to, and use i18next\n */\nTemplate.registerHelper(\"pluralize\", function (nCount, pString) {\n  if (nCount === 1) {\n    return \"1 \" + pString;\n  }\n  return nCount + \" \" + pString + \"s\";\n});\n"]},"env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],null],[[],{"polyfill":false}],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"/client/modules/core/helpers/templates.js.map","sourceFileName":"/client/modules/core/helpers/templates.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"templates"},"ignored":false,"code":"var _typeof2 = require(\"babel-runtime/helpers/typeof\");\n\nvar _typeof3 = _interopRequireDefault(_typeof2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nvar tz = Object.create(null);\nmodule.importSync(\"moment-timezone\", {\n  \"*\": function (v, n) {\n    tz[n] = v;\n  }\n}, 0);\nvar moment = void 0;\nmodule.importSync(\"moment\", {\n  \"default\": function (v) {\n    moment = v;\n  }\n}, 1);\nmodule.importSync(\"moment/min/locales.min.js\");\nvar Meteor = void 0;\nmodule.importSync(\"meteor/meteor\", {\n  Meteor: function (v) {\n    Meteor = v;\n  }\n}, 3);\nvar Template = void 0;\nmodule.importSync(\"meteor/templating\", {\n  Template: function (v) {\n    Template = v;\n  }\n}, 4);\nvar i18next = void 0;\nmodule.importSync(\"/client/api\", {\n  i18next: function (v) {\n    i18next = v;\n  }\n}, 5);\nvar Reaction = void 0;\nmodule.importSync(\"../\", {\n  Reaction: function (v) {\n    Reaction = v;\n  }\n}, 6);\nvar Collections = Object.create(null);\nmodule.importSync(\"/lib/collections\", {\n  \"*\": function (v, n) {\n    Collections[n] = v;\n  }\n}, 7);\nvar Schemas = Object.create(null);\nmodule.importSync(\"/lib/collections/schemas\", {\n  \"*\": function (v, n) {\n    Schemas[n] = v;\n  }\n}, 8);\nvar toCamelCase = void 0;\nmodule.importSync(\"/lib/api\", {\n  toCamelCase: function (v) {\n    toCamelCase = v;\n  }\n}, 9);\n/*\n *\n * Reaction Spacebars helpers\n * See: http://docs.meteor.com/#/full/template_registerhelper\n *\n */Template.registerHelper(\"Collections\", function () {\n  return Collections;\n});\nTemplate.registerHelper(\"Schemas\", function () {\n  return Schemas;\n}); /**\n     * currentUser\n     * @summary overrides Meteor Package.blaze currentUser method\n     * @return {[Boolean]} returns true/null if user has registered\n     */\n\nif (Package.blaze) {\n  Package.blaze.Blaze.Template.registerHelper(\"currentUser\", function () {\n    if ((typeof Reaction === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(Reaction)) === \"object\") {\n      var shopId = Reaction.getShopId();\n      var user = Accounts.user();\n      if (!shopId || (typeof user === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(user)) !== \"object\") return null; // shoppers should always be guests\n\n      var isGuest = Roles.userIsInRole(user, \"guest\", shopId); // but if a user has never logged in then they are anonymous\n\n      var isAnonymous = Roles.userIsInRole(user, \"anonymous\", shopId);\n      return isGuest && !isAnonymous ? user : null;\n    }\n\n    return null;\n  });\n} /**\n   * registerHelper monthOptions\n   * @summary formats moment.js months into an array for autoform selector\n   * @return {Array} returns array of months [value:, label:]\n   */\n\nTemplate.registerHelper(\"monthOptions\", function () {\n  var showDefaultOption = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n  var label = i18next.t(\"app.monthOptions\", \"Choose month\");\n  var localLocale = tz; // adding cases where our lang w/o region\n  // isn't predefined in moment.\n  // because using defineLocale throws\n  // ugly deprecation warnings, we aren't doing:\n  //\n  // localLocale.defineLocale(\"zh\", {\n  //   parentLocale: \"zh-cn\"\n  // });\n\n  var lang = i18next.language;\n\n  if (lang === \"zh\") {\n    lang = \"zh-cn\";\n  }\n\n  localLocale.locale(lang);\n  var monthOptions = [];\n\n  if (showDefaultOption) {\n    monthOptions.push({\n      value: \"\",\n      label: label\n    });\n  }\n\n  var months = localLocale.months(); // parse into autoform array\n\n  for (var index in meteorBabelHelpers.sanitizeForInObject(months)) {\n    if ({}.hasOwnProperty.call(months, index)) {\n      var month = months[index];\n      var mnum = parseInt(index, 10) + 1;\n      monthOptions.push({\n        value: mnum,\n        label: mnum + \" | \" + month\n      });\n    }\n  }\n\n  return monthOptions;\n}); /**\n     * yearOptions\n     * @summary formats moment.js next 9 years into array for autoform selector\n     * @return {Array} returns array of years [value:, label:]\n     */\nTemplate.registerHelper(\"yearOptions\", function () {\n  var showDefaultOption = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n  var label = i18next.t(\"app.yearOptions\", \"Choose year\");\n  var yearOptions = [];\n\n  if (showDefaultOption) {\n    yearOptions.push({\n      value: \"\",\n      label: label\n    });\n  }\n\n  var year = new Date().getFullYear();\n\n  for (var i = 1; i < 9; i++) {\n    yearOptions.push({\n      value: year,\n      label: year\n    });\n    year++;\n  }\n\n  return yearOptions;\n}); /**\n     * timezoneOptions\n     * @summary formats moment.js timezones into array for autoform selector\n     * @return {Array} returns array of timezones [value:, label:]\n     */\nTemplate.registerHelper(\"timezoneOptions\", function () {\n  var label = i18next.t(\"app.timezoneOptions\", \"Choose timezone\");\n  var timezoneOptions = [{\n    value: \"\",\n    label: label\n  }];\n  var timezones = moment.tz.names();\n\n  for (var _iterator = timezones, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {\n    var _ref;\n\n    if (_isArray) {\n      if (_i >= _iterator.length) break;\n      _ref = _iterator[_i++];\n    } else {\n      _i = _iterator.next();\n      if (_i.done) break;\n      _ref = _i.value;\n    }\n\n    var timezone = _ref;\n    timezoneOptions.push({\n      value: timezone,\n      label: timezone\n    });\n  }\n\n  return timezoneOptions;\n}); /**\n     * camelToSpace\n     * @summary convert a camelcased string to spaces\n     * @param {String} str - camelcased string\n     * @return {String} returns space formatted string\n     */\nTemplate.registerHelper(\"camelToSpace\", function (str) {\n  var downCamel = str.replace(/\\W+/g, \"-\").replace(/([a-z\\d])([A-Z])/g, \"$1 $2\");\n  return downCamel.toLowerCase();\n}); /**\n     * toLowerCase\n     * @summary convert a string to lower case\n     * @param {String} str - string\n     * @return {String} returns lowercased string\n     */\nTemplate.registerHelper(\"toLowerCase\", function (str) {\n  return str.toLowerCase();\n}); /**\n     * toUpperCase\n     * @summary convert a string to upper case\n     * @param {String} str - string\n     * @return {String} returns uppercased string\n     */\nTemplate.registerHelper(\"toUpperCase\", function (str) {\n  return str.toUpperCase();\n}); /**\n     * capitalize\n     * @summary capitalize first character of string\n     * @param {String} str - string\n     * @return {String} returns string with first letter capitalized\n     */\nTemplate.registerHelper(\"capitalize\", function (str) {\n  return str.charAt(0).toUpperCase() + str.slice(1);\n}); /**\n     * toCamelCase\n     * @summary camelCases a string\n     * @param {String} str - string\n     * @return {String|undefined} returns camelCased string\n     */\nTemplate.registerHelper(\"toCamelCase\", function (str) {\n  return !!str && toCamelCase(str);\n}); /**\n     * siteName\n     * @summary get the shop name\n     * @return {String} returns site name\n     */\nTemplate.registerHelper(\"siteName\", function () {\n  var shop = Collections.Shops.findOne();\n  return (typeof shop === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(shop)) === \"object\" && shop.name ? shop.name : \"\";\n}); /*\n     *  General helpers for template functionality\n     */ /**\n         * condition\n         * @summary conditional string comparison template helper\n         * @example {{#if condition status \"eq\" ../value}}\n         * @param {String} v1 - first variable to compare\n         * @param {String} operator - eq,neq,ideq,or,lt,gt comparision operator\n         * @param {String} v2 - second variable to compare\n         * @return {Boolean} returns true/false\n         */\nTemplate.registerHelper(\"condition\", function (v1, operator, v2) {\n  switch (operator) {\n    case \"==\":\n    case \"eq\":\n      return v1 === v2;\n\n    case \"!=\":\n    case \"neq\":\n      return v1 !== v2;\n\n    case \"===\":\n    case \"ideq\":\n      return v1 === v2;\n\n    case \"!==\":\n    case \"nideq\":\n      return v1 !== v2;\n\n    case \"&&\":\n    case \"and\":\n      return v1 && v2;\n\n    case \"||\":\n    case \"or\":\n      return v1 || v2;\n\n    case \"<\":\n    case \"lt\":\n      return v1 < v2;\n\n    case \"<=\":\n    case \"lte\":\n      return v1 <= v2;\n\n    case \">\":\n    case \"gt\":\n      return v1 > v2;\n\n    case \">=\":\n    case \"gte\":\n      return v1 >= v2;\n\n    default:\n      throw new Meteor.Error(\"Undefined conditional operator \" + operator);\n  }\n}); /**\n     * orElse\n     * @summary if this is true, or else this\n     * @param {String} v1 - variable one\n     * @param {String} v2 - variable two\n     * @return {String} returns v1 || v2\n     */\nTemplate.registerHelper(\"orElse\", function (v1, v2) {\n  return v1 || v2;\n}); /**\n     * key_value\n     * @summary template helper pushing object key/value into array\n     * @param {Object} context - object to parse into key / value\n     * @return {Array} returns array[key:,value:]\n     */\nTemplate.registerHelper(\"key_value\", function (context) {\n  var result = [];\n\n  _.each(context, function (value, key) {\n    return result.push({\n      key: key,\n      value: value\n    });\n  });\n\n  return result;\n}); /**\n     * nl2br\n     * @summary template helper nl2br - Converts new line (\\n\\r) to <br>\n     * from http://phpjs.org/functions/nl2br:480\n     * @param {String} text - text\n     * @returns {String} returns formatted Spacebars.SafeString\n     */\nTemplate.registerHelper(\"nl2br\", function (text) {\n  var nl2br = (text + \"\").replace(/([^>\\r\\n]?)(\\r\\n|\\n\\r|\\r|\\n)/g, \"$1\" + \"<br>\" + \"$2\");\n  return new Spacebars.SafeString(nl2br);\n}); /**\n     * dateFormat\n     * @description\n     * format an ISO date using Moment.js\n     * http://momentjs.com/\n     * moment syntax example: moment(Date(\"2011-07-18T15:50:52\")).format(\"MMMM YYYY\")\n     * @example {{dateFormat creation_date format=\"MMMM YYYY\"}}\n     * @param {String} context - moment context\n     * @param {String} block - hash of moment options, ie: format=\"\"\n     * @return {Date} return formatted date\n     */\nTemplate.registerHelper(\"dateFormat\", function (context, block) {\n  var f = block.hash.format || \"MMM DD, YYYY hh:mm:ss A\";\n  return moment(context).format(f);\n}); /**\n     * timeAgo\n     * @description\n     * accept an ISO date using Moment.js and return elapsed time from today\n     * http://momentjs.com/\n     * moment syntax example: moment(Date(\"2011-07-18T15:50:52\")).from(new Date())\n     * @example {{timeAgo creation_date}}\n     * @param {String} context - moment context\n     * @return {Date} return formatted date\n     */\nTemplate.registerHelper(\"timeAgo\", function (context) {\n  return moment(context).from(new Date());\n}); /**\n     * pluralize\n     * @summary general helper for plurization of strings\n     * @example {{plurize \"1 thing\"}}\n     * @param {String} nCount - number, ie \"1 \"\n     * @param {String} pString - plural string ie \" thing\"\n     * @todo adapt to, and use i18next\n     */\nTemplate.registerHelper(\"pluralize\", function (nCount, pString) {\n  if (nCount === 1) {\n    return \"1 \" + pString;\n  }\n\n  return nCount + \" \" + pString + \"s\";\n});","map":{"version":3,"sources":["/client/modules/core/helpers/templates.js"],"names":["tz","moment","Meteor","Template","i18next","Reaction","Collections","Schemas","toCamelCase","registerHelper","Package","blaze","Blaze","shopId","getShopId","user","Accounts","isGuest","Roles","userIsInRole","isAnonymous","showDefaultOption","label","t","localLocale","lang","language","locale","monthOptions","push","value","months","index","hasOwnProperty","call","month","mnum","parseInt","yearOptions","year","Date","getFullYear","i","timezoneOptions","timezones","names","timezone","str","downCamel","replace","toLowerCase","toUpperCase","charAt","slice","shop","Shops","findOne","name","v1","operator","v2","Error","context","result","_","each","key","text","nl2br","Spacebars","SafeString","block","f","hash","format","from","nCount","pString"],"mappings":"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","file":"/client/modules/core/helpers/templates.js.map","sourcesContent":["import * as tz from \"moment-timezone\";\nimport moment from \"moment\";\nimport \"moment/min/locales.min.js\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Template } from \"meteor/templating\";\nimport { i18next } from \"/client/api\";\nimport { Reaction } from \"../\";\nimport * as Collections from \"/lib/collections\";\nimport * as Schemas from \"/lib/collections/schemas\";\nimport { toCamelCase } from \"/lib/api\";\n\n/*\n *\n * Reaction Spacebars helpers\n * See: http://docs.meteor.com/#/full/template_registerhelper\n *\n */\n\nTemplate.registerHelper(\"Collections\", function () {\n  return Collections;\n});\n\nTemplate.registerHelper(\"Schemas\", function () {\n  return Schemas;\n});\n\n/**\n * currentUser\n * @summary overrides Meteor Package.blaze currentUser method\n * @return {[Boolean]} returns true/null if user has registered\n */\nif (Package.blaze) {\n  Package.blaze.Blaze.Template.registerHelper(\"currentUser\", function () {\n    if (typeof Reaction === \"object\") {\n      const shopId = Reaction.getShopId();\n      const user = Accounts.user();\n      if (!shopId || typeof user !== \"object\") return null;\n      // shoppers should always be guests\n      const isGuest = Roles.userIsInRole(user, \"guest\", shopId);\n      // but if a user has never logged in then they are anonymous\n      const isAnonymous = Roles.userIsInRole(user, \"anonymous\", shopId);\n\n      return isGuest && !isAnonymous ? user : null;\n    }\n    return null;\n  });\n}\n\n/**\n * registerHelper monthOptions\n * @summary formats moment.js months into an array for autoform selector\n * @return {Array} returns array of months [value:, label:]\n */\nTemplate.registerHelper(\"monthOptions\", function (showDefaultOption = true) {\n  const label = i18next.t(\"app.monthOptions\", \"Choose month\");\n  const localLocale = tz;\n\n  // adding cases where our lang w/o region\n  // isn't predefined in moment.\n  // because using defineLocale throws\n  // ugly deprecation warnings, we aren't doing:\n  //\n  // localLocale.defineLocale(\"zh\", {\n  //   parentLocale: \"zh-cn\"\n  // });\n  let lang = i18next.language;\n  if (lang === \"zh\") {\n    lang = \"zh-cn\";\n  }\n\n  localLocale.locale(lang);\n  const monthOptions = [];\n\n  if (showDefaultOption) {\n    monthOptions.push({\n      value: \"\",\n      label: label\n    });\n  }\n\n  const months = localLocale.months();\n  // parse into autoform array\n  for (const index in months) {\n    if ({}.hasOwnProperty.call(months, index)) {\n      const month = months[index];\n      const mnum = parseInt(index, 10) + 1;\n      monthOptions.push({\n        value: mnum,\n        label: `${mnum} | ${month}`\n      });\n    }\n  }\n\n  return monthOptions;\n});\n\n/**\n * yearOptions\n * @summary formats moment.js next 9 years into array for autoform selector\n * @return {Array} returns array of years [value:, label:]\n */\nTemplate.registerHelper(\"yearOptions\", function (showDefaultOption = true) {\n  const label = i18next.t(\"app.yearOptions\", \"Choose year\");\n  const yearOptions = [];\n\n  if (showDefaultOption) {\n    yearOptions.push({\n      value: \"\",\n      label: label\n    });\n  }\n\n  let year = new Date().getFullYear();\n  for (let i = 1; i < 9; i++) {\n    yearOptions.push({\n      value: year,\n      label: year\n    });\n    year++;\n  }\n  return yearOptions;\n});\n\n/**\n * timezoneOptions\n * @summary formats moment.js timezones into array for autoform selector\n * @return {Array} returns array of timezones [value:, label:]\n */\nTemplate.registerHelper(\"timezoneOptions\", function () {\n  const label = i18next.t(\"app.timezoneOptions\", \"Choose timezone\");\n  const timezoneOptions = [{\n    value: \"\",\n    label: label\n  }];\n  const timezones = moment.tz.names();\n  for (const timezone of timezones) {\n    timezoneOptions.push({\n      value: timezone,\n      label: timezone\n    });\n  }\n  return timezoneOptions;\n});\n\n\n/**\n * camelToSpace\n * @summary convert a camelcased string to spaces\n * @param {String} str - camelcased string\n * @return {String} returns space formatted string\n */\nTemplate.registerHelper(\"camelToSpace\", function (str) {\n  const downCamel = str.replace(/\\W+/g, \"-\").replace(/([a-z\\d])([A-Z])/g, \"$1 $2\");\n  return downCamel.toLowerCase();\n});\n\n/**\n * toLowerCase\n * @summary convert a string to lower case\n * @param {String} str - string\n * @return {String} returns lowercased string\n */\nTemplate.registerHelper(\"toLowerCase\", function (str) {\n  return str.toLowerCase();\n});\n\n/**\n * toUpperCase\n * @summary convert a string to upper case\n * @param {String} str - string\n * @return {String} returns uppercased string\n */\nTemplate.registerHelper(\"toUpperCase\", function (str) {\n  return str.toUpperCase();\n});\n\n/**\n * capitalize\n * @summary capitalize first character of string\n * @param {String} str - string\n * @return {String} returns string with first letter capitalized\n */\nTemplate.registerHelper(\"capitalize\", function (str) {\n  return str.charAt(0).toUpperCase() + str.slice(1);\n});\n\n/**\n * toCamelCase\n * @summary camelCases a string\n * @param {String} str - string\n * @return {String|undefined} returns camelCased string\n */\nTemplate.registerHelper(\"toCamelCase\", function (str) {\n  return !!str && toCamelCase(str);\n});\n\n\n/**\n * siteName\n * @summary get the shop name\n * @return {String} returns site name\n */\nTemplate.registerHelper(\"siteName\", function () {\n  const shop = Collections.Shops.findOne();\n  return typeof shop === \"object\" && shop.name ? shop.name : \"\";\n});\n\n/*\n *  General helpers for template functionality\n */\n\n/**\n * condition\n * @summary conditional string comparison template helper\n * @example {{#if condition status \"eq\" ../value}}\n * @param {String} v1 - first variable to compare\n * @param {String} operator - eq,neq,ideq,or,lt,gt comparision operator\n * @param {String} v2 - second variable to compare\n * @return {Boolean} returns true/false\n */\nTemplate.registerHelper(\"condition\", function (v1, operator, v2) {\n  switch (operator) {\n    case \"==\":\n    case \"eq\":\n      return v1 === v2;\n    case \"!=\":\n    case \"neq\":\n      return v1 !== v2;\n    case \"===\":\n    case \"ideq\":\n      return v1 === v2;\n    case \"!==\":\n    case \"nideq\":\n      return v1 !== v2;\n    case \"&&\":\n    case \"and\":\n      return v1 && v2;\n    case \"||\":\n    case \"or\":\n      return v1 || v2;\n    case \"<\":\n    case \"lt\":\n      return v1 < v2;\n    case \"<=\":\n    case \"lte\":\n      return v1 <= v2;\n    case \">\":\n    case \"gt\":\n      return v1 > v2;\n    case \">=\":\n    case \"gte\":\n      return v1 >= v2;\n    default:\n      throw new Meteor.Error(`Undefined conditional operator ${operator}`);\n  }\n});\n\n/**\n * orElse\n * @summary if this is true, or else this\n * @param {String} v1 - variable one\n * @param {String} v2 - variable two\n * @return {String} returns v1 || v2\n */\nTemplate.registerHelper(\"orElse\", function (v1, v2) {\n  return v1 || v2;\n});\n\n/**\n * key_value\n * @summary template helper pushing object key/value into array\n * @param {Object} context - object to parse into key / value\n * @return {Array} returns array[key:,value:]\n */\nTemplate.registerHelper(\"key_value\", function (context) {\n  const result = [];\n  _.each(context, function (value, key) {\n    return result.push({\n      key: key,\n      value: value\n    });\n  });\n  return result;\n});\n\n/**\n * nl2br\n * @summary template helper nl2br - Converts new line (\\n\\r) to <br>\n * from http://phpjs.org/functions/nl2br:480\n * @param {String} text - text\n * @returns {String} returns formatted Spacebars.SafeString\n */\nTemplate.registerHelper(\"nl2br\", function (text) {\n  const nl2br = (text + \"\").replace(/([^>\\r\\n]?)(\\r\\n|\\n\\r|\\r|\\n)/g, \"$1\" +\n    \"<br>\" + \"$2\");\n  return new Spacebars.SafeString(nl2br);\n});\n\n/**\n * dateFormat\n * @description\n * format an ISO date using Moment.js\n * http://momentjs.com/\n * moment syntax example: moment(Date(\"2011-07-18T15:50:52\")).format(\"MMMM YYYY\")\n * @example {{dateFormat creation_date format=\"MMMM YYYY\"}}\n * @param {String} context - moment context\n * @param {String} block - hash of moment options, ie: format=\"\"\n * @return {Date} return formatted date\n */\nTemplate.registerHelper(\"dateFormat\", function (context, block) {\n  const f = block.hash.format || \"MMM DD, YYYY hh:mm:ss A\";\n  return moment(context).format(f);\n});\n\n/**\n * timeAgo\n * @description\n * accept an ISO date using Moment.js and return elapsed time from today\n * http://momentjs.com/\n * moment syntax example: moment(Date(\"2011-07-18T15:50:52\")).from(new Date())\n * @example {{timeAgo creation_date}}\n * @param {String} context - moment context\n * @return {Date} return formatted date\n */\nTemplate.registerHelper(\"timeAgo\", function (context) {\n  return moment(context).from(new Date());\n});\n\n\n/**\n * pluralize\n * @summary general helper for plurization of strings\n * @example {{plurize \"1 thing\"}}\n * @param {String} nCount - number, ie \"1 \"\n * @param {String} pString - plural string ie \" thing\"\n * @todo adapt to, and use i18next\n */\nTemplate.registerHelper(\"pluralize\", function (nCount, pString) {\n  if (nCount === 1) {\n    return \"1 \" + pString;\n  }\n  return nCount + \" \" + pString + \"s\";\n});\n"]},"hash":"6119cd27bfb4696b3281ff485bf3716fafa87e93"}
