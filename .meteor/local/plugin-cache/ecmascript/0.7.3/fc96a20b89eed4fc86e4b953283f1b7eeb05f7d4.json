{"metadata":{"usedHelpers":["inherits","possibleConstructorReturn","classCallCheck","interopRequireDefault"],"marked":[],"modules":{"imports":[{"source":"react","imported":["default","Component","PropTypes"],"specifiers":[{"kind":"named","imported":"default","local":"React"},{"kind":"named","imported":"Component","local":"Component"},{"kind":"named","imported":"PropTypes","local":"PropTypes"}]},{"source":"/client/api","imported":["formatPriceString"],"specifiers":[{"kind":"named","imported":"formatPriceString","local":"formatPriceString"}]},{"source":"/imports/plugins/core/ui/client/components","imported":["Translation"],"specifiers":[{"kind":"named","imported":"Translation","local":"Translation"}]},{"source":"/imports/plugins/core/discounts/client/components/list","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"DiscountList"}]}],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"/imports/plugins/core/orders/client/components/invoice.js","filenameRelative":"/imports/plugins/core/orders/client/components/invoice.js","inputSourceMap":{"version":3,"sources":["/imports/plugins/core/orders/client/components/invoice.js"],"names":["React","Component","PropTypes","formatPriceString","Translation","DiscountList","Invoice","propTypes","canMakeAdjustments","bool","collection","string","dateFormat","func","discounts","handleClick","invoice","object","isFetching","isOpen","orderId","paymentCaptured","refunds","array","renderDiscountForm","props","renderRefundsInfo","map","refund","created","marginBottom","amount","renderTotal","total","renderConditionalDisplay","render","totalItems","subtotal","shipping","taxes","marginRight"],"mappings":";;;;;;;;;;;;;;AAAA;IAAA;;OAA4C,WAA5C;;;;;;;;;;;;;;;;;;;;;;;;;;;;GACA,AAAS,AAAyB,AAClC,AAAS,AAAmB,AAC5B,AAAO,AAAkB,AAEzB;;;;;;;;;;;;AAeuB,AACnB,AAAM,wBAAA,AAAE,AAAQ;;;;AAAV,AAAmB;AAAnB,AAAkC;;AAAxC,AAA6C,AAE7C;AACE,AAAC,AACC,AAAC;;AACC,AAAC,AACC,AAAC;8BAAD,AACE,AAAC;gBAAD,AACE,AAAG,AAAC,AACJ,AAAW,AAAC,AACZ,AAAe,AAAC,AAEpB,AAAC;wBACH,AAAE;AATJ,4BAFJ,AAaE,AAAE,AAEL;;AAED,AAAoB,AAClB,AAAM,AAAE,AAAY;;;AAAd,AAAuB;;;;;oBAA7B,AAA4C,AAAK;;AAEjD,AACE,yBACE,AAAC,AACC,AAAC,AAAI,AAAU;UAFnB,AAAC;;;AAGK,AAAC,AAAO,AAAe,AAAE;AACzB,AAAC,AAAI,AAAU;;AACb,AAAC,AAAE,AAAU;AACf,AAAE;;AAAF,uBACF;;AANF,AAME,AAAE;;;;;;;;yBAGJ,AAAC;;;AAAW,yBAAA,AAAQ,AAAI,AAAC,AACvB,AAAC,AAAI,AAAU,AAAuC,AAAI,AAAC,AAAO,AAAS,AAAM,AAAC,AAAE,AAAc,AAChG,AAAC,AAAO,AAAa,AAAC,AAAW,AAAO,AAAS,AAAa,AAAE,AAChE,AAAC,AAAI,AAAU,AAAkB,AAAC,AAAO,AAAC,AAAkB,AAAO,AAAQ,AAAE,AAAO,AAAE;;;;AAH1F,AAAY,AAIV,AAAE,yCAEN,AAAE;;AAjBJ,AAiBE;;;;;8BAEH;;;;;;;;;;;;;;;;;yCAED,AAAc,AACZ,AAAM,AAAE,AAAY,AAAK,AAEzB;;;;;;AACE,AAAC,AAAI,AAAU,AACb,AAAC;;;;;oBACD,AAAC;;AAAO,AAAK,AAAE,AACf,AAAC,UAAD,AAAK,AAAU,eAAf,AACE,AAAC,AAAO,AAAC,AAAkB,AAAQ,AAAO,AAAE;AAC9C,AAAE;AACJ,AAAE;;AAPJ,AAOE,qBAEH;;;AAED;;;;;;;;uBAA2B,AACzB;;AAAM;;;sCAAN,AAAM,AAAE,AAAoB,AAAoB,AAAK,AAErD;;;;AACE,AAAC,AACC,AAAC,AACC,AAAC,AAAI,AAAC,AAAC,AAAK,AAAc,AAAC,AAAE,AAC7B,AAAC;;;;;oBACC,AAAC;;AACC,AAAC,yBADH,AAAC,AAGC,AAAE,AAEF,AAAC,AAAI,AAAC,AAAC,AAAK,AAAc,AAAC,AAAE;UAH3B,AAAC,AAAK;UAAN,AAAC;AALT,AAUE,AAAE;AAZR,AAcE,AAAE,AAEL;;;;;;eAED;;;AAAS,AACP,AAAM;;AAAA,AAAE;AAAF,AAAW;;iBAAjB,AAAM,AAAsB,AAAgB,AAAK,AAEjD,AACE,AAAC;;AAAD;;;iBACE,AAAC,AAAI,AAAU,AACb,AAAC,AAAO,AAAc,AAAE,AACxB,AAAC,AAAI,AAAU,AACb,AAAC,AAAQ,AACX,AAAE;;;;;AACJ,AAAE;;;;;oBAEF,AAAC;;AAAD,AAAK,AAAU,AACb,AAAC,yBAAO,AAAqC,AAAQ,AAA0B,AAAE,AACjF,AAAC,AAAI,AAAU;UADf,AAAQ,AAAC;UAAD,AAAa;UAAa;AAEhC,AAAC,AAAkB,AAAQ;AAC7B,AAAE;;AACJ,AAAE;;;AAAF;;AAEA,AAAC;;;;;AAAD,AAAK;;;AAAU,yBAAf,AACE,AAAC;;AAAD,AAAQ,AAAC,oBAAD,AAAa,AAAa,AAAW,AAAQ,AAA0B,AAAE,AACjF,AAAC,AAAI,AAAU,AACb,AAAC,AAAkB,AAAQ,AAC7B,AAAE;;;AACJ,AAAE;;;AAAF;;;;;;;uBAEA,AAAC;;;AAAD,AAAK;;;AAAU,yBAAf,AACE,AAAC;;AAAD,AAAQ,AAAC,8BAAY,QAAb,AAA0B,AAAM,AAAQ,AAAqB,AAAE,AACvE,AAAC,AAAI,AAAU,AACb,AAAC,AAAkB,AAAQ,AAC7B,AAAE;;;AACJ,AAAE;;;AAAF;;;;;;;uBAEA,AAAC;;;;;;AACC,AAAC,yBAAD,AACE;;AAAA,AAAC,AAAI,AAAU,sCAAf,AACE,AAAC,AAAO,AAAC,AAAY,AAAa,AAAW,AAAQ,AAA0B,AAAE,AACjF,AAAC,AAAI,AAAU,AACb,AAAC,AAAE,AAAU,AAAkB,AAAM,AAAC,AAAE;;;;;;uBAAF,AAAe;;AAArD,AAAqC;;;;;;;;;;;AACrC,AAAC,AAAE,yBAAH,AAAa,AAAW,AAAQ,AAAC,AAAa,AAAY,AAAE;;AAC9D,AAAE,sCAPR,AAQI,AAAE,AACF,AAAC,AAAK,AACR,AAAE,AAEJ;;;AAAA,AAAC,AAAK,AACR,AAAE;AA3CJ,AA2CE,AAEH;;;;;;;;;;;;yBA9I6B;;;;;;;;;;;+BAiJhC,AAAe;;;;;;AAAf;;;;;;;;;;;;;;;;;EAjJA,AAAsB,AAAU,AAC9B;;AADF,AAAM,QACJ,AAAO;sBACe,UADH,AACa,AAC9B;cAAY,UAFK,AAEK,AACtB;cAAY,UAHK,AAGK,AACtB;aAAW,UAJM,AAII,AACrB;eAAa,UALI,AAKM,AACvB;WAAS,UANQ,AAME,AACnB;cAAY,UAPK,AAOK,AACtB;UAAQ,UARS,AAQC,AAClB;WAAS,UATQ,AASE,AACnB;mBAAiB,UAVA,AAUU,AAC3B;WAAS,UAXX,AAAmB,AAWE,AAGrB;AAdmB,AACjB;OAPG,OAAS,WAAhB,AAA2B,QAA3B","file":"/imports/plugins/core/orders/client/components/invoice.js.map","sourcesContent":["import React, { Component, PropTypes } from \"react\";\nimport { formatPriceString } from \"/client/api\";\nimport { Translation } from \"/imports/plugins/core/ui/client/components\";\nimport DiscountList from \"/imports/plugins/core/discounts/client/components/list\";\n\nclass Invoice extends Component {\n  static propTypes = {\n    canMakeAdjustments: PropTypes.bool,\n    collection: PropTypes.string,\n    dateFormat: PropTypes.func,\n    discounts: PropTypes.bool,\n    handleClick: PropTypes.func,\n    invoice: PropTypes.object,\n    isFetching: PropTypes.bool,\n    isOpen: PropTypes.bool,\n    orderId: PropTypes.string,\n    paymentCaptured: PropTypes.bool,\n    refunds: PropTypes.array\n  }\n\n  renderDiscountForm() {\n    const { isOpen, orderId, collection } = this.props;\n\n    return (\n      <div>\n        {isOpen &&\n          <div>\n            <hr/>\n              <DiscountList\n                id={orderId}\n                collection={collection}\n                validatedInput={true}\n              />\n            <hr/>\n          </div>\n        }\n      </div>\n    );\n  }\n\n  renderRefundsInfo() {\n    const { isFetching, refunds, dateFormat } = this.props;\n\n    return (\n      <div>\n        {isFetching &&\n          <div className=\"form-group order-summary-form-group\">\n            <strong>Loading Refunds</strong>\n            <div className=\"invoice-details\">\n              <i className=\"fa fa-spinner fa-spin\" />\n            </div>\n          </div>\n        }\n\n        {refunds && refunds.map((refund) => (\n          <div className=\"order-summary-form-group text-danger\" key={refund.created} style={{ marginBottom: 15 }}>\n            <strong>Refunded on: {dateFormat(refund.created, \"MM/D/YYYY\")}</strong>\n            <div className=\"invoice-details\"><strong>{formatPriceString(refund.amount)}</strong></div>\n          </div>\n        ))}\n      </div>\n    );\n  }\n\n  renderTotal() {\n    const { invoice } = this.props;\n\n    return (\n      <div className=\"order-summary-form-group\">\n        <hr/>\n        <strong>TOTAL</strong>\n        <div className=\"invoice-details\">\n          <strong>{formatPriceString(invoice.total)}</strong>\n        </div>\n      </div>\n    );\n  }\n\n  renderConditionalDisplay() {\n    const { canMakeAdjustments, paymentCaptured } = this.props;\n\n    return (\n      <div>\n        {canMakeAdjustments ?\n          <div> {this.renderTotal()} </div> :\n          <span>\n            {paymentCaptured ?\n              <div>\n                {this.renderRefundsInfo()}\n              </div>\n              :\n              <div> {this.renderTotal()} </div>\n            }\n          </span>\n        }\n      </div>\n    );\n  }\n\n  render() {\n    const { invoice, discounts, handleClick } = this.props;\n\n    return (\n      <div>\n        <div className=\"order-summary-form-group\">\n          <strong>Quantity Total</strong>\n          <div className=\"invoice-details\">\n            {invoice.totalItems}\n          </div>\n        </div>\n\n        <div className=\"order-summary-form-group\">\n          <strong><Translation defaultValue=\"Subtotal\" i18nKey=\"cartSubTotals.subtotal\"/></strong>\n          <div className=\"invoice-details\">\n            {formatPriceString(invoice.subtotal)}\n          </div>\n        </div>\n\n        <div className=\"order-summary-form-group\">\n          <strong><Translation defaultValue=\"Shipping\" i18nKey=\"cartSubTotals.shipping\"/></strong>\n          <div className=\"invoice-details\">\n            {formatPriceString(invoice.shipping)}\n          </div>\n        </div>\n\n        <div className=\"order-summary-form-group\">\n          <strong><Translation defaultValue=\"Tax\" i18nKey=\"cartSubTotals.tax\"/></strong>\n          <div className=\"invoice-details\">\n            {formatPriceString(invoice.taxes)}\n          </div>\n        </div>\n\n        {discounts &&\n          <div>\n            <div className=\"order-summary-form-group\">\n              <strong><Translation defaultValue=\"Discount\" i18nKey=\"cartSubTotals.discount\"/></strong>\n              <div className=\"invoice-details\">\n                <i className=\"fa fa-tag fa-lg\" style={{ marginRight: 2 }}/>\n                <a className=\"btn-link\" onClick={handleClick}>Add Discount</a>\n              </div>\n            </div>\n            {this.renderDiscountForm()}\n          </div>\n        }\n        {this.renderConditionalDisplay()}\n      </div>\n    );\n  }\n}\n\nexport default Invoice;\n"]},"env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],null],[[],{"polyfill":false}],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"/imports/plugins/core/orders/client/components/invoice.js.map","sourceFileName":"/imports/plugins/core/orders/client/components/invoice.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"invoice"},"ignored":false,"code":"var _classCallCheck2 = require(\"babel-runtime/helpers/classCallCheck\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _possibleConstructorReturn2 = require(\"babel-runtime/helpers/possibleConstructorReturn\");\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require(\"babel-runtime/helpers/inherits\");\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nvar React = void 0,\n    Component = void 0,\n    PropTypes = void 0;\nmodule.importSync(\"react\", {\n  \"default\": function (v) {\n    React = v;\n  },\n  Component: function (v) {\n    Component = v;\n  },\n  PropTypes: function (v) {\n    PropTypes = v;\n  }\n}, 0);\nvar formatPriceString = void 0;\nmodule.importSync(\"/client/api\", {\n  formatPriceString: function (v) {\n    formatPriceString = v;\n  }\n}, 1);\nvar Translation = void 0;\nmodule.importSync(\"/imports/plugins/core/ui/client/components\", {\n  Translation: function (v) {\n    Translation = v;\n  }\n}, 2);\nvar DiscountList = void 0;\nmodule.importSync(\"/imports/plugins/core/discounts/client/components/list\", {\n  \"default\": function (v) {\n    DiscountList = v;\n  }\n}, 3);\n\nvar Invoice = function (_Component) {\n  (0, _inherits3.default)(Invoice, _Component);\n\n  function Invoice() {\n    (0, _classCallCheck3.default)(this, Invoice);\n    return (0, _possibleConstructorReturn3.default)(this, _Component.apply(this, arguments));\n  }\n\n  Invoice.prototype.renderDiscountForm = function () {\n    function renderDiscountForm() {\n      var _props = this.props,\n          isOpen = _props.isOpen,\n          orderId = _props.orderId,\n          collection = _props.collection;\n      return React.createElement(\n        \"div\",\n        null,\n        isOpen && React.createElement(\n          \"div\",\n          null,\n          React.createElement(\"hr\", null),\n          React.createElement(DiscountList, {\n            id: orderId,\n            collection: collection,\n            validatedInput: true\n          }),\n          React.createElement(\"hr\", null)\n        )\n      );\n    }\n\n    return renderDiscountForm;\n  }();\n\n  Invoice.prototype.renderRefundsInfo = function () {\n    function renderRefundsInfo() {\n      var _props2 = this.props,\n          isFetching = _props2.isFetching,\n          refunds = _props2.refunds,\n          dateFormat = _props2.dateFormat;\n      return React.createElement(\n        \"div\",\n        null,\n        isFetching && React.createElement(\n          \"div\",\n          {\n            className: \"form-group order-summary-form-group\"\n          },\n          React.createElement(\n            \"strong\",\n            null,\n            \"Loading Refunds\"\n          ),\n          React.createElement(\n            \"div\",\n            {\n              className: \"invoice-details\"\n            },\n            React.createElement(\"i\", {\n              className: \"fa fa-spinner fa-spin\"\n            })\n          )\n        ),\n        refunds && refunds.map(function (refund) {\n          return React.createElement(\n            \"div\",\n            {\n              className: \"order-summary-form-group text-danger\",\n              key: refund.created,\n              style: {\n                marginBottom: 15\n              }\n            },\n            React.createElement(\n              \"strong\",\n              null,\n              \"Refunded on: \",\n              dateFormat(refund.created, \"MM/D/YYYY\")\n            ),\n            React.createElement(\n              \"div\",\n              {\n                className: \"invoice-details\"\n              },\n              React.createElement(\n                \"strong\",\n                null,\n                formatPriceString(refund.amount)\n              )\n            )\n          );\n        })\n      );\n    }\n\n    return renderRefundsInfo;\n  }();\n\n  Invoice.prototype.renderTotal = function () {\n    function renderTotal() {\n      var invoice = this.props.invoice;\n      return React.createElement(\n        \"div\",\n        {\n          className: \"order-summary-form-group\"\n        },\n        React.createElement(\"hr\", null),\n        React.createElement(\n          \"strong\",\n          null,\n          \"TOTAL\"\n        ),\n        React.createElement(\n          \"div\",\n          {\n            className: \"invoice-details\"\n          },\n          React.createElement(\n            \"strong\",\n            null,\n            formatPriceString(invoice.total)\n          )\n        )\n      );\n    }\n\n    return renderTotal;\n  }();\n\n  Invoice.prototype.renderConditionalDisplay = function () {\n    function renderConditionalDisplay() {\n      var _props3 = this.props,\n          canMakeAdjustments = _props3.canMakeAdjustments,\n          paymentCaptured = _props3.paymentCaptured;\n      return React.createElement(\n        \"div\",\n        null,\n        canMakeAdjustments ? React.createElement(\n          \"div\",\n          null,\n          \" \",\n          this.renderTotal(),\n          \" \"\n        ) : React.createElement(\n          \"span\",\n          null,\n          paymentCaptured ? React.createElement(\n            \"div\",\n            null,\n            this.renderRefundsInfo()\n          ) : React.createElement(\n            \"div\",\n            null,\n            \" \",\n            this.renderTotal(),\n            \" \"\n          )\n        )\n      );\n    }\n\n    return renderConditionalDisplay;\n  }();\n\n  Invoice.prototype.render = function () {\n    function render() {\n      var _props4 = this.props,\n          invoice = _props4.invoice,\n          discounts = _props4.discounts,\n          handleClick = _props4.handleClick;\n      return React.createElement(\n        \"div\",\n        null,\n        React.createElement(\n          \"div\",\n          {\n            className: \"order-summary-form-group\"\n          },\n          React.createElement(\n            \"strong\",\n            null,\n            \"Quantity Total\"\n          ),\n          React.createElement(\n            \"div\",\n            {\n              className: \"invoice-details\"\n            },\n            invoice.totalItems\n          )\n        ),\n        React.createElement(\n          \"div\",\n          {\n            className: \"order-summary-form-group\"\n          },\n          React.createElement(\n            \"strong\",\n            null,\n            React.createElement(Translation, {\n              defaultValue: \"Subtotal\",\n              i18nKey: \"cartSubTotals.subtotal\"\n            })\n          ),\n          React.createElement(\n            \"div\",\n            {\n              className: \"invoice-details\"\n            },\n            formatPriceString(invoice.subtotal)\n          )\n        ),\n        React.createElement(\n          \"div\",\n          {\n            className: \"order-summary-form-group\"\n          },\n          React.createElement(\n            \"strong\",\n            null,\n            React.createElement(Translation, {\n              defaultValue: \"Shipping\",\n              i18nKey: \"cartSubTotals.shipping\"\n            })\n          ),\n          React.createElement(\n            \"div\",\n            {\n              className: \"invoice-details\"\n            },\n            formatPriceString(invoice.shipping)\n          )\n        ),\n        React.createElement(\n          \"div\",\n          {\n            className: \"order-summary-form-group\"\n          },\n          React.createElement(\n            \"strong\",\n            null,\n            React.createElement(Translation, {\n              defaultValue: \"Tax\",\n              i18nKey: \"cartSubTotals.tax\"\n            })\n          ),\n          React.createElement(\n            \"div\",\n            {\n              className: \"invoice-details\"\n            },\n            formatPriceString(invoice.taxes)\n          )\n        ),\n        discounts && React.createElement(\n          \"div\",\n          null,\n          React.createElement(\n            \"div\",\n            {\n              className: \"order-summary-form-group\"\n            },\n            React.createElement(\n              \"strong\",\n              null,\n              React.createElement(Translation, {\n                defaultValue: \"Discount\",\n                i18nKey: \"cartSubTotals.discount\"\n              })\n            ),\n            React.createElement(\n              \"div\",\n              {\n                className: \"invoice-details\"\n              },\n              React.createElement(\"i\", {\n                className: \"fa fa-tag fa-lg\",\n                style: {\n                  marginRight: 2\n                }\n              }),\n              React.createElement(\n                \"a\",\n                {\n                  className: \"btn-link\",\n                  onClick: handleClick\n                },\n                \"Add Discount\"\n              )\n            )\n          ),\n          this.renderDiscountForm()\n        ),\n        this.renderConditionalDisplay()\n      );\n    }\n\n    return render;\n  }();\n\n  return Invoice;\n}(Component);\n\nInvoice.propTypes = {\n  canMakeAdjustments: PropTypes.bool,\n  collection: PropTypes.string,\n  dateFormat: PropTypes.func,\n  discounts: PropTypes.bool,\n  handleClick: PropTypes.func,\n  invoice: PropTypes.object,\n  isFetching: PropTypes.bool,\n  isOpen: PropTypes.bool,\n  orderId: PropTypes.string,\n  paymentCaptured: PropTypes.bool,\n  refunds: PropTypes.array\n};\nmodule.export(\"default\", exports.default = Invoice);","map":{"version":3,"sources":["/imports/plugins/core/orders/client/components/invoice.js"],"names":["React","Component","PropTypes","formatPriceString","Translation","DiscountList","Invoice","propTypes","canMakeAdjustments","bool","collection","string","dateFormat","func","discounts","handleClick","invoice","object","isFetching","isOpen","orderId","paymentCaptured","refunds","array","renderDiscountForm","props","renderRefundsInfo","map","refund","created","marginBottom","amount","renderTotal","total","renderConditionalDisplay","render","totalItems","subtotal","shipping","taxes","marginRight"],"mappings":"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","file":"/imports/plugins/core/orders/client/components/invoice.js.map","sourcesContent":["import React, { Component, PropTypes } from \"react\";\nimport { formatPriceString } from \"/client/api\";\nimport { Translation } from \"/imports/plugins/core/ui/client/components\";\nimport DiscountList from \"/imports/plugins/core/discounts/client/components/list\";\n\nclass Invoice extends Component {\n  static propTypes = {\n    canMakeAdjustments: PropTypes.bool,\n    collection: PropTypes.string,\n    dateFormat: PropTypes.func,\n    discounts: PropTypes.bool,\n    handleClick: PropTypes.func,\n    invoice: PropTypes.object,\n    isFetching: PropTypes.bool,\n    isOpen: PropTypes.bool,\n    orderId: PropTypes.string,\n    paymentCaptured: PropTypes.bool,\n    refunds: PropTypes.array\n  }\n\n  renderDiscountForm() {\n    const { isOpen, orderId, collection } = this.props;\n\n    return (\n      <div>\n        {isOpen &&\n          <div>\n            <hr/>\n              <DiscountList\n                id={orderId}\n                collection={collection}\n                validatedInput={true}\n              />\n            <hr/>\n          </div>\n        }\n      </div>\n    );\n  }\n\n  renderRefundsInfo() {\n    const { isFetching, refunds, dateFormat } = this.props;\n\n    return (\n      <div>\n        {isFetching &&\n          <div className=\"form-group order-summary-form-group\">\n            <strong>Loading Refunds</strong>\n            <div className=\"invoice-details\">\n              <i className=\"fa fa-spinner fa-spin\" />\n            </div>\n          </div>\n        }\n\n        {refunds && refunds.map((refund) => (\n          <div className=\"order-summary-form-group text-danger\" key={refund.created} style={{ marginBottom: 15 }}>\n            <strong>Refunded on: {dateFormat(refund.created, \"MM/D/YYYY\")}</strong>\n            <div className=\"invoice-details\"><strong>{formatPriceString(refund.amount)}</strong></div>\n          </div>\n        ))}\n      </div>\n    );\n  }\n\n  renderTotal() {\n    const { invoice } = this.props;\n\n    return (\n      <div className=\"order-summary-form-group\">\n        <hr/>\n        <strong>TOTAL</strong>\n        <div className=\"invoice-details\">\n          <strong>{formatPriceString(invoice.total)}</strong>\n        </div>\n      </div>\n    );\n  }\n\n  renderConditionalDisplay() {\n    const { canMakeAdjustments, paymentCaptured } = this.props;\n\n    return (\n      <div>\n        {canMakeAdjustments ?\n          <div> {this.renderTotal()} </div> :\n          <span>\n            {paymentCaptured ?\n              <div>\n                {this.renderRefundsInfo()}\n              </div>\n              :\n              <div> {this.renderTotal()} </div>\n            }\n          </span>\n        }\n      </div>\n    );\n  }\n\n  render() {\n    const { invoice, discounts, handleClick } = this.props;\n\n    return (\n      <div>\n        <div className=\"order-summary-form-group\">\n          <strong>Quantity Total</strong>\n          <div className=\"invoice-details\">\n            {invoice.totalItems}\n          </div>\n        </div>\n\n        <div className=\"order-summary-form-group\">\n          <strong><Translation defaultValue=\"Subtotal\" i18nKey=\"cartSubTotals.subtotal\"/></strong>\n          <div className=\"invoice-details\">\n            {formatPriceString(invoice.subtotal)}\n          </div>\n        </div>\n\n        <div className=\"order-summary-form-group\">\n          <strong><Translation defaultValue=\"Shipping\" i18nKey=\"cartSubTotals.shipping\"/></strong>\n          <div className=\"invoice-details\">\n            {formatPriceString(invoice.shipping)}\n          </div>\n        </div>\n\n        <div className=\"order-summary-form-group\">\n          <strong><Translation defaultValue=\"Tax\" i18nKey=\"cartSubTotals.tax\"/></strong>\n          <div className=\"invoice-details\">\n            {formatPriceString(invoice.taxes)}\n          </div>\n        </div>\n\n        {discounts &&\n          <div>\n            <div className=\"order-summary-form-group\">\n              <strong><Translation defaultValue=\"Discount\" i18nKey=\"cartSubTotals.discount\"/></strong>\n              <div className=\"invoice-details\">\n                <i className=\"fa fa-tag fa-lg\" style={{ marginRight: 2 }}/>\n                <a className=\"btn-link\" onClick={handleClick}>Add Discount</a>\n              </div>\n            </div>\n            {this.renderDiscountForm()}\n          </div>\n        }\n        {this.renderConditionalDisplay()}\n      </div>\n    );\n  }\n}\n\nexport default Invoice;\n"]},"hash":"fc96a20b89eed4fc86e4b953283f1b7eeb05f7d4"}
