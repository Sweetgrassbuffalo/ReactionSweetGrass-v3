{"metadata":{"usedHelpers":[],"marked":[],"modules":{"imports":[],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"/packages/ongoworks:security/lib/client/Security.js","filenameRelative":"/packages/ongoworks:security/lib/client/Security.js","env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],null],[[],{"polyfill":false}],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"/packages/ongoworks:security/lib/client/Security.js.map","sourceFileName":"/packages/ongoworks:security/lib/client/Security.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"Security"},"ignored":false,"code":"// We only stub on the client to prevent errors if putting in common code\nSecurity = {\n  // the starting point of the chain\n  permit: function () {\n    function permit() {\n      return new Security.Rule();\n    }\n\n    return permit;\n  }(),\n  can: function () {\n    function can() {\n      return new Security.Check();\n    }\n\n    return can;\n  }(),\n  defineMethod: function () {\n    function securityDefineMethod(name) {\n      // Check whether a rule with the given name already exists; can't overwrite\n      if (Security.Rule.prototype[name]) {\n        throw new Error('A security method with the name \"' + name + '\" has already been defined');\n      }\n\n      Security.Rule.prototype[name] = function () {\n        return this;\n      };\n    }\n\n    return securityDefineMethod;\n  }()\n};\n\nMongo.Collection.prototype.permit = function () {\n  return Security.permit().collections(this);\n};","map":{"version":3,"sources":["/packages/ongoworks:security/lib/client/Security.js"],"names":["Security","permit","Rule","can","Check","defineMethod","securityDefineMethod","name","prototype","Error","Mongo","Collection","collections"],"mappings":"AAAA;AAEAA,WAAW;AACT;AACAC;AAAQ,aAASA,MAAT,GAAkB;AACxB,aAAO,IAAID,SAASE,IAAb,EAAP;AACD;;AAFD,WAAiBD,MAAjB;AAAA,KAFS;AAKTE;AAAK,aAASA,GAAT,GAAe;AAClB,aAAO,IAAIH,SAASI,KAAb,EAAP;AACD;;AAFD,WAAcD,GAAd;AAAA,KALS;AAQTE;AAAc,aAASC,oBAAT,CAA8BC,IAA9B,EAAoC;AAChD;AACA,UAAIP,SAASE,IAAT,CAAcM,SAAd,CAAwBD,IAAxB,CAAJ,EAAmC;AACjC,cAAM,IAAIE,KAAJ,CAAU,sCAAsCF,IAAtC,GAA6C,4BAAvD,CAAN;AACD;;AACDP,eAASE,IAAT,CAAcM,SAAd,CAAwBD,IAAxB,IAAgC,YAAY;AAC1C,eAAO,IAAP;AACD,OAFD;AAGD;;AARD,WAAuBD,oBAAvB;AAAA;AARS,CAAX;;AAmBAI,MAAMC,UAAN,CAAiBH,SAAjB,CAA2BP,MAA3B,GAAoC,YAAY;AAC9C,SAAOD,SAASC,MAAT,GAAkBW,WAAlB,CAA8B,IAA9B,CAAP;AACD,CAFD","file":"/packages/ongoworks:security/lib/client/Security.js.map","sourcesContent":["// We only stub on the client to prevent errors if putting in common code\n\nSecurity = {\n  // the starting point of the chain\n  permit: function permit() {\n    return new Security.Rule();\n  },\n  can: function can() {\n    return new Security.Check();\n  },\n  defineMethod: function securityDefineMethod(name) {\n    // Check whether a rule with the given name already exists; can't overwrite\n    if (Security.Rule.prototype[name]) {\n      throw new Error('A security method with the name \"' + name + '\" has already been defined');\n    }\n    Security.Rule.prototype[name] = function () {\n      return this;\n    };\n  }\n};\n\nMongo.Collection.prototype.permit = function () {\n  return Security.permit().collections(this);\n};\n"]},"hash":"ecf4fd26fc9d63eacd71a966998b3cad9a923b97"}
