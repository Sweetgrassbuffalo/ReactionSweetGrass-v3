{"metadata":{"usedHelpers":["inherits","possibleConstructorReturn","classCallCheck","interopRequireDefault"],"marked":[],"modules":{"imports":[{"source":"react","imported":["default","Component","PropTypes"],"specifiers":[{"kind":"named","imported":"default","local":"React"},{"kind":"named","imported":"Component","local":"Component"},{"kind":"named","imported":"PropTypes","local":"PropTypes"}]},{"source":"/client/api","imported":["formatPriceString"],"specifiers":[{"kind":"named","imported":"formatPriceString","local":"formatPriceString"}]},{"source":"/imports/plugins/core/ui/client/components","imported":["Translation"],"specifiers":[{"kind":"named","imported":"Translation","local":"Translation"}]}],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"/imports/plugins/core/orders/client/components/lineItems.js","filenameRelative":"/imports/plugins/core/orders/client/components/lineItems.js","inputSourceMap":{"version":3,"sources":["/imports/plugins/core/orders/client/components/lineItems.js"],"names":["React","Component","PropTypes","formatPriceString","Translation","LineItems","propTypes","displayMedia","func","handleClick","isExpanded","onClose","uniqueItems","array","calculateTotal","price","shipping","taxes","renderLineItem","uniqueItem","quantity","props","_id","height","marginLeft","url","title","variants","marginRight","renderLineItemInvoice","rate","taxDetail","tax","taxCode","render","map","float","Array","v","i"],"mappings":"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","file":"/imports/plugins/core/orders/client/components/lineItems.js.map","sourcesContent":["import React, { Component, PropTypes } from \"react\";\nimport { formatPriceString } from \"/client/api\";\nimport { Translation } from \"/imports/plugins/core/ui/client/components\";\n\nclass LineItems extends Component {\n\n  static propTypes = {\n    displayMedia: PropTypes.func,\n    handleClick: PropTypes.func,\n    isExpanded: PropTypes.func,\n    onClose: PropTypes.func,\n    uniqueItems: PropTypes.array\n  }\n\n  calculateTotal(price, shipping, taxes) {\n    return formatPriceString(price + shipping + taxes);\n  }\n\n  renderLineItem(uniqueItem, quantity) {\n    const { handleClick, displayMedia } = this.props;\n\n    return (\n      <div className=\"order-items\">\n        <div\n          className=\"invoice order-item form-group order-summary-form-group\"\n          onClick={() => handleClick(uniqueItem._id)}\n          style={{ height: 70 }}\n        >\n\n          <div className=\"order-item-media\" style={{ marginLeft: 15 }}>\n            { !displayMedia(uniqueItem) ?\n              <img src= \"/resources/placeholder.gif\" /> :\n              <img\n                src={displayMedia(uniqueItem).url()}\n              />\n            }\n          </div>\n\n          <div className=\"order-item-details\">\n            <div className=\"order-detail-title\">\n            {uniqueItem.title} <br/><small>{uniqueItem.variants.title}</small>\n            </div>\n          </div>\n\n          <div className=\"order-detail-quantity\">\n           {quantity || uniqueItem.quantity}\n          </div>\n\n          <div className=\"order-detail-price\">\n            <div className=\"invoice-details\" style={{ marginRight: 15 }}>\n              <strong>{formatPriceString(uniqueItem.variants.price)}</strong>\n            </div>\n          </div>\n\n      </div>\n    </div>\n    );\n  }\n\n  renderLineItemInvoice(uniqueItem) {\n    return (\n      <div>\n        <div className=\"order-summary-form-group\">\n          <strong><Translation defaultValue=\"Subtotal\" i18nKey=\"cartSubTotals.subtotal\"/></strong>\n          <div className=\"invoice-details\">\n            {formatPriceString(uniqueItem.variants.price)}\n          </div>\n        </div>\n\n        <div className=\"order-summary-form-group\">\n          <strong><Translation defaultValue=\"Shipping\" i18nKey=\"cartSubTotals.shipping\"/></strong>\n          <div className=\"invoice-details\">\n            {formatPriceString(uniqueItem.shipping.rate)}\n          </div>\n        </div>\n\n        <div className=\"order-summary-form-group\">\n          <strong>Item tax</strong>\n          <div className=\"invoice-details\">\n            {uniqueItem.taxDetail ? formatPriceString(uniqueItem.taxDetail.tax / uniqueItem.quantity) : formatPriceString(0)}\n          </div>\n        </div>\n\n        <div className=\"order-summary-form-group\">\n          <strong>Tax code</strong>\n          <div className=\"invoice-details\">\n            {uniqueItem.taxDetail ? uniqueItem.taxDetail.taxCode : uniqueItem.variants.taxCode}\n          </div>\n        </div>\n\n        <div className=\"order-summary-form-group\">\n          <strong>TOTAL</strong>\n          <div className=\"invoice-details\">\n            {uniqueItem.taxDetail ?\n              <strong>\n                {this.calculateTotal(uniqueItem.variants.price, uniqueItem.shipping.rate, uniqueItem.taxDetail.tax)}\n              </strong> :\n               <strong>\n                {this.calculateTotal(uniqueItem.variants.price, uniqueItem.shipping.rate, 0)}\n              </strong>\n            }\n          </div>\n        </div>\n        <br/>\n      </div>\n    );\n  }\n\n  render() {\n    const { uniqueItems, isExpanded, onClose } = this.props;\n    return (\n      <div>\n        {uniqueItems.map((uniqueItem) => {\n          if (!isExpanded(uniqueItem._id)) {\n            return (\n              <div key={uniqueItem._id}> { this.renderLineItem(uniqueItem) } </div>\n            );\n          }\n\n          return (\n            <div className=\"roll-up-invoice-list\" key={uniqueItem._id}>\n              <div className=\"roll-up-content\">\n\n                <div style={{ float: \"right\" }}>\n                  <button className=\"rui btn btn-default flat icon-only\" onClick={() => onClose(uniqueItem._id)}>\n                    <i\n                      className=\"rui font-icon fa-lg fa fa-times\"\n                    />\n                  </button>\n                </div>\n\n                <br/><br/>\n\n                {[...Array(uniqueItem.quantity)].map((v, i) =>\n                  <div key={i}>\n                    { this.renderLineItem(uniqueItem, 1) }\n                    { this.renderLineItemInvoice(uniqueItem) }\n                  </div>\n                )}\n\n              </div>\n          </div>\n          );\n        })}\n      </div>\n    );\n  }\n}\n\nexport default LineItems;\n"]},"env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],null],[[],{"polyfill":false}],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"/imports/plugins/core/orders/client/components/lineItems.js.map","sourceFileName":"/imports/plugins/core/orders/client/components/lineItems.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"lineItems"},"ignored":false,"code":"var _classCallCheck2 = require(\"babel-runtime/helpers/classCallCheck\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _possibleConstructorReturn2 = require(\"babel-runtime/helpers/possibleConstructorReturn\");\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require(\"babel-runtime/helpers/inherits\");\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nvar React = void 0,\n    Component = void 0,\n    PropTypes = void 0;\nmodule.importSync(\"react\", {\n  \"default\": function (v) {\n    React = v;\n  },\n  Component: function (v) {\n    Component = v;\n  },\n  PropTypes: function (v) {\n    PropTypes = v;\n  }\n}, 0);\nvar formatPriceString = void 0;\nmodule.importSync(\"/client/api\", {\n  formatPriceString: function (v) {\n    formatPriceString = v;\n  }\n}, 1);\nvar Translation = void 0;\nmodule.importSync(\"/imports/plugins/core/ui/client/components\", {\n  Translation: function (v) {\n    Translation = v;\n  }\n}, 2);\n\nvar LineItems = function (_Component) {\n  (0, _inherits3.default)(LineItems, _Component);\n\n  function LineItems() {\n    (0, _classCallCheck3.default)(this, LineItems);\n    return (0, _possibleConstructorReturn3.default)(this, _Component.apply(this, arguments));\n  }\n\n  LineItems.prototype.calculateTotal = function () {\n    function calculateTotal(price, shipping, taxes) {\n      return formatPriceString(price + shipping + taxes);\n    }\n\n    return calculateTotal;\n  }();\n\n  LineItems.prototype.renderLineItem = function () {\n    function renderLineItem(uniqueItem, quantity) {\n      var _props = this.props,\n          handleClick = _props.handleClick,\n          displayMedia = _props.displayMedia;\n      return React.createElement(\n        \"div\",\n        {\n          className: \"order-items\"\n        },\n        React.createElement(\n          \"div\",\n          {\n            className: \"invoice order-item form-group order-summary-form-group\",\n            onClick: function () {\n              return handleClick(uniqueItem._id);\n            },\n            style: {\n              height: 70\n            }\n          },\n          React.createElement(\n            \"div\",\n            {\n              className: \"order-item-media\",\n              style: {\n                marginLeft: 15\n              }\n            },\n            !displayMedia(uniqueItem) ? React.createElement(\"img\", {\n              src: \"/resources/placeholder.gif\"\n            }) : React.createElement(\"img\", {\n              src: displayMedia(uniqueItem).url()\n            })\n          ),\n          React.createElement(\n            \"div\",\n            {\n              className: \"order-item-details\"\n            },\n            React.createElement(\n              \"div\",\n              {\n                className: \"order-detail-title\"\n              },\n              uniqueItem.title,\n              \" \",\n              React.createElement(\"br\", null),\n              React.createElement(\n                \"small\",\n                null,\n                uniqueItem.variants.title\n              )\n            )\n          ),\n          React.createElement(\n            \"div\",\n            {\n              className: \"order-detail-quantity\"\n            },\n            quantity || uniqueItem.quantity\n          ),\n          React.createElement(\n            \"div\",\n            {\n              className: \"order-detail-price\"\n            },\n            React.createElement(\n              \"div\",\n              {\n                className: \"invoice-details\",\n                style: {\n                  marginRight: 15\n                }\n              },\n              React.createElement(\n                \"strong\",\n                null,\n                formatPriceString(uniqueItem.variants.price)\n              )\n            )\n          )\n        )\n      );\n    }\n\n    return renderLineItem;\n  }();\n\n  LineItems.prototype.renderLineItemInvoice = function () {\n    function renderLineItemInvoice(uniqueItem) {\n      return React.createElement(\n        \"div\",\n        null,\n        React.createElement(\n          \"div\",\n          {\n            className: \"order-summary-form-group\"\n          },\n          React.createElement(\n            \"strong\",\n            null,\n            React.createElement(Translation, {\n              defaultValue: \"Subtotal\",\n              i18nKey: \"cartSubTotals.subtotal\"\n            })\n          ),\n          React.createElement(\n            \"div\",\n            {\n              className: \"invoice-details\"\n            },\n            formatPriceString(uniqueItem.variants.price)\n          )\n        ),\n        React.createElement(\n          \"div\",\n          {\n            className: \"order-summary-form-group\"\n          },\n          React.createElement(\n            \"strong\",\n            null,\n            React.createElement(Translation, {\n              defaultValue: \"Shipping\",\n              i18nKey: \"cartSubTotals.shipping\"\n            })\n          ),\n          React.createElement(\n            \"div\",\n            {\n              className: \"invoice-details\"\n            },\n            formatPriceString(uniqueItem.shipping.rate)\n          )\n        ),\n        React.createElement(\n          \"div\",\n          {\n            className: \"order-summary-form-group\"\n          },\n          React.createElement(\n            \"strong\",\n            null,\n            \"Item tax\"\n          ),\n          React.createElement(\n            \"div\",\n            {\n              className: \"invoice-details\"\n            },\n            uniqueItem.taxDetail ? formatPriceString(uniqueItem.taxDetail.tax / uniqueItem.quantity) : formatPriceString(0)\n          )\n        ),\n        React.createElement(\n          \"div\",\n          {\n            className: \"order-summary-form-group\"\n          },\n          React.createElement(\n            \"strong\",\n            null,\n            \"Tax code\"\n          ),\n          React.createElement(\n            \"div\",\n            {\n              className: \"invoice-details\"\n            },\n            uniqueItem.taxDetail ? uniqueItem.taxDetail.taxCode : uniqueItem.variants.taxCode\n          )\n        ),\n        React.createElement(\n          \"div\",\n          {\n            className: \"order-summary-form-group\"\n          },\n          React.createElement(\n            \"strong\",\n            null,\n            \"TOTAL\"\n          ),\n          React.createElement(\n            \"div\",\n            {\n              className: \"invoice-details\"\n            },\n            uniqueItem.taxDetail ? React.createElement(\n              \"strong\",\n              null,\n              this.calculateTotal(uniqueItem.variants.price, uniqueItem.shipping.rate, uniqueItem.taxDetail.tax)\n            ) : React.createElement(\n              \"strong\",\n              null,\n              this.calculateTotal(uniqueItem.variants.price, uniqueItem.shipping.rate, 0)\n            )\n          )\n        ),\n        React.createElement(\"br\", null)\n      );\n    }\n\n    return renderLineItemInvoice;\n  }();\n\n  LineItems.prototype.render = function () {\n    function render() {\n      var _this2 = this;\n\n      var _props2 = this.props,\n          uniqueItems = _props2.uniqueItems,\n          isExpanded = _props2.isExpanded,\n          onClose = _props2.onClose;\n      return React.createElement(\n        \"div\",\n        null,\n        uniqueItems.map(function (uniqueItem) {\n          if (!isExpanded(uniqueItem._id)) {\n            return React.createElement(\n              \"div\",\n              {\n                key: uniqueItem._id\n              },\n              \" \",\n              _this2.renderLineItem(uniqueItem),\n              \" \"\n            );\n          }\n\n          return React.createElement(\n            \"div\",\n            {\n              className: \"roll-up-invoice-list\",\n              key: uniqueItem._id\n            },\n            React.createElement(\n              \"div\",\n              {\n                className: \"roll-up-content\"\n              },\n              React.createElement(\n                \"div\",\n                {\n                  style: {\n                    float: \"right\"\n                  }\n                },\n                React.createElement(\n                  \"button\",\n                  {\n                    className: \"rui btn btn-default flat icon-only\",\n                    onClick: function () {\n                      return onClose(uniqueItem._id);\n                    }\n                  },\n                  React.createElement(\"i\", {\n                    className: \"rui font-icon fa-lg fa fa-times\"\n                  })\n                )\n              ),\n              React.createElement(\"br\", null),\n              React.createElement(\"br\", null),\n              [].concat(_toConsumableArray(Array(uniqueItem.quantity))).map(function (v, i) {\n                return React.createElement(\n                  \"div\",\n                  {\n                    key: i\n                  },\n                  _this2.renderLineItem(uniqueItem, 1),\n                  _this2.renderLineItemInvoice(uniqueItem)\n                );\n              })\n            )\n          );\n        })\n      );\n    }\n\n    return render;\n  }();\n\n  return LineItems;\n}(Component);\n\nLineItems.propTypes = {\n  displayMedia: PropTypes.func,\n  handleClick: PropTypes.func,\n  isExpanded: PropTypes.func,\n  onClose: PropTypes.func,\n  uniqueItems: PropTypes.array\n};\nmodule.export(\"default\", exports.default = LineItems);","map":{"version":3,"sources":["/imports/plugins/core/orders/client/components/lineItems.js"],"names":["React","Component","PropTypes","formatPriceString","Translation","LineItems","propTypes","displayMedia","func","handleClick","isExpanded","onClose","uniqueItems","array","calculateTotal","price","shipping","taxes","renderLineItem","uniqueItem","quantity","props","_id","height","marginLeft","url","title","variants","marginRight","renderLineItemInvoice","rate","taxDetail","tax","taxCode","render","map","float","Array","v","i"],"mappings":"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","file":"/imports/plugins/core/orders/client/components/lineItems.js.map","sourcesContent":["import React, { Component, PropTypes } from \"react\";\nimport { formatPriceString } from \"/client/api\";\nimport { Translation } from \"/imports/plugins/core/ui/client/components\";\n\nclass LineItems extends Component {\n\n  static propTypes = {\n    displayMedia: PropTypes.func,\n    handleClick: PropTypes.func,\n    isExpanded: PropTypes.func,\n    onClose: PropTypes.func,\n    uniqueItems: PropTypes.array\n  }\n\n  calculateTotal(price, shipping, taxes) {\n    return formatPriceString(price + shipping + taxes);\n  }\n\n  renderLineItem(uniqueItem, quantity) {\n    const { handleClick, displayMedia } = this.props;\n\n    return (\n      <div className=\"order-items\">\n        <div\n          className=\"invoice order-item form-group order-summary-form-group\"\n          onClick={() => handleClick(uniqueItem._id)}\n          style={{ height: 70 }}\n        >\n\n          <div className=\"order-item-media\" style={{ marginLeft: 15 }}>\n            { !displayMedia(uniqueItem) ?\n              <img src= \"/resources/placeholder.gif\" /> :\n              <img\n                src={displayMedia(uniqueItem).url()}\n              />\n            }\n          </div>\n\n          <div className=\"order-item-details\">\n            <div className=\"order-detail-title\">\n            {uniqueItem.title} <br/><small>{uniqueItem.variants.title}</small>\n            </div>\n          </div>\n\n          <div className=\"order-detail-quantity\">\n           {quantity || uniqueItem.quantity}\n          </div>\n\n          <div className=\"order-detail-price\">\n            <div className=\"invoice-details\" style={{ marginRight: 15 }}>\n              <strong>{formatPriceString(uniqueItem.variants.price)}</strong>\n            </div>\n          </div>\n\n      </div>\n    </div>\n    );\n  }\n\n  renderLineItemInvoice(uniqueItem) {\n    return (\n      <div>\n        <div className=\"order-summary-form-group\">\n          <strong><Translation defaultValue=\"Subtotal\" i18nKey=\"cartSubTotals.subtotal\"/></strong>\n          <div className=\"invoice-details\">\n            {formatPriceString(uniqueItem.variants.price)}\n          </div>\n        </div>\n\n        <div className=\"order-summary-form-group\">\n          <strong><Translation defaultValue=\"Shipping\" i18nKey=\"cartSubTotals.shipping\"/></strong>\n          <div className=\"invoice-details\">\n            {formatPriceString(uniqueItem.shipping.rate)}\n          </div>\n        </div>\n\n        <div className=\"order-summary-form-group\">\n          <strong>Item tax</strong>\n          <div className=\"invoice-details\">\n            {uniqueItem.taxDetail ? formatPriceString(uniqueItem.taxDetail.tax / uniqueItem.quantity) : formatPriceString(0)}\n          </div>\n        </div>\n\n        <div className=\"order-summary-form-group\">\n          <strong>Tax code</strong>\n          <div className=\"invoice-details\">\n            {uniqueItem.taxDetail ? uniqueItem.taxDetail.taxCode : uniqueItem.variants.taxCode}\n          </div>\n        </div>\n\n        <div className=\"order-summary-form-group\">\n          <strong>TOTAL</strong>\n          <div className=\"invoice-details\">\n            {uniqueItem.taxDetail ?\n              <strong>\n                {this.calculateTotal(uniqueItem.variants.price, uniqueItem.shipping.rate, uniqueItem.taxDetail.tax)}\n              </strong> :\n               <strong>\n                {this.calculateTotal(uniqueItem.variants.price, uniqueItem.shipping.rate, 0)}\n              </strong>\n            }\n          </div>\n        </div>\n        <br/>\n      </div>\n    );\n  }\n\n  render() {\n    const { uniqueItems, isExpanded, onClose } = this.props;\n    return (\n      <div>\n        {uniqueItems.map((uniqueItem) => {\n          if (!isExpanded(uniqueItem._id)) {\n            return (\n              <div key={uniqueItem._id}> { this.renderLineItem(uniqueItem) } </div>\n            );\n          }\n\n          return (\n            <div className=\"roll-up-invoice-list\" key={uniqueItem._id}>\n              <div className=\"roll-up-content\">\n\n                <div style={{ float: \"right\" }}>\n                  <button className=\"rui btn btn-default flat icon-only\" onClick={() => onClose(uniqueItem._id)}>\n                    <i\n                      className=\"rui font-icon fa-lg fa fa-times\"\n                    />\n                  </button>\n                </div>\n\n                <br/><br/>\n\n                {[...Array(uniqueItem.quantity)].map((v, i) =>\n                  <div key={i}>\n                    { this.renderLineItem(uniqueItem, 1) }\n                    { this.renderLineItemInvoice(uniqueItem) }\n                  </div>\n                )}\n\n              </div>\n          </div>\n          );\n        })}\n      </div>\n    );\n  }\n}\n\nexport default LineItems;\n"]},"hash":"0a8dd0d7effd89e54094ac1bfca62a027aee22d1"}
