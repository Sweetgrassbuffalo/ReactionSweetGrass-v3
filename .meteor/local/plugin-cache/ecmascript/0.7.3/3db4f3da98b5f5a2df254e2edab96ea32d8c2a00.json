{"metadata":{"usedHelpers":["inherits","possibleConstructorReturn","classCallCheck","objectDestructuringEmpty","interopRequireDefault"],"marked":[],"modules":{"imports":[{"source":"react","imported":["default","Component","PropTypes"],"specifiers":[{"kind":"named","imported":"default","local":"React"},{"kind":"named","imported":"Component","local":"Component"},{"kind":"named","imported":"PropTypes","local":"PropTypes"}]},{"source":"meteor/meteor","imported":["Meteor"],"specifiers":[{"kind":"named","imported":"Meteor","local":"Meteor"}]},{"source":"/lib/api/compose","imported":["composeWithTracker"],"specifiers":[{"kind":"named","imported":"composeWithTracker","local":"composeWithTracker"}]},{"source":"/lib/collections","imported":["Packages"],"specifiers":[{"kind":"named","imported":"Packages","local":"Packages"}]},{"source":"/imports/plugins/core/ui/client/components","imported":["Loading"],"specifiers":[{"kind":"named","imported":"Loading","local":"Loading"}]},{"source":"/imports/plugins/core/ui/client/providers","imported":["TranslationProvider"],"specifiers":[{"kind":"named","imported":"TranslationProvider","local":"TranslationProvider"}]},{"source":"/client/api","imported":["Reaction","i18next"],"specifiers":[{"kind":"named","imported":"Reaction","local":"Reaction"},{"kind":"named","imported":"i18next","local":"i18next"}]},{"source":"../components","imported":["ExampleSettingsForm"],"specifiers":[{"kind":"named","imported":"ExampleSettingsForm","local":"ExampleSettingsForm"}]}],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"/imports/plugins/included/payments-example/client/settings/containers/exampleSettingsFormContainer.js","filenameRelative":"/imports/plugins/included/payments-example/client/settings/containers/exampleSettingsFormContainer.js","inputSourceMap":{"version":3,"sources":["/imports/plugins/included/payments-example/client/settings/containers/exampleSettingsFormContainer.js"],"names":["React","Component","PropTypes","Meteor","composeWithTracker","Packages","Loading","TranslationProvider","Reaction","i18next","ExampleSettingsForm","ExampleSettingsFormContainer","constructor","props","state","apiKey","handleChange","bind","handleSubmit","saveUpdate","e","preventDefault","setState","target","value","settings","packageId","packageData","_id","settingsKey","registry","fields","property","support","id","call","err","Alerts","toast","t","render","propTypes","object","composer","onData","subscription","subscribe","ready","findOne","name","shopId","getShopId"],"mappings":";;;;;;;;;;;;;;;;;;AAAA;IAAA;;OAA4C,WAA5C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;GACA,AAAS,AAAc,AACvB,AAAS,AAA0B,AACnC,AAAS,AAAgB,AACzB,AAAS,AAAe,AACxB,AAAS,AAA2B,AACpC,AAAS,AAAU,AAAe,AAClC,AAAS,AAA2B,AAEpC;;IAAA,AAAM;;;wCACJ,AAAY;AAAO,AACjB;;qFAAA,AAAM,AAEN,AAAK,AAAQ,AACX;;UAAQ;cAGV,AAAK,AAAe,AAAK,AAAa,AAAK,AAC3C,AAAK,AAAe,AAAK,AAAa,AAAK,AAC3C;AANA,AAAa;UAMb,AAAK,AAAa,eAAK,MAAL,AAAgB,aAAlC,AAAkB,AAAqB,AACxC;;wCAED;;AAAA,AAAa,AAAG,AACd,AAAE,AACF;;yCAAK;0BAAL,GAAc,AAAE;QAAF,AAAU,AAAE,AAAO;AAAjC;yBACD;;AAED;;;;;;0BAAA,AAAa,UAAU,AACrB;AAEA,AAAM,AAAY,AAAK,AAAM,AAAY,AACzC;UAAM,YAAc,KAAK,MAAL,AAAW,YAA/B,AAAoB,AAAuB,AAAS,AAAG,AAEvD;UAAM,AAAS,AAAC,iDAAA,AACd,AAAU,AACV;UAAO;AACN,kBACD;eAAU,SADT,AAED;AALa,AAAC,AAEE;AAFlB,kBAQA;AAAK,eAAL,AAAgB,SAAhB,AAAwB,AAAW,AACpC,AAED;AAXiB,AAGZ,AAEM,AAAS;WAMpB,AAAW,WAAX,AAAmB,AAAI,QAAvB,AAAoC,WAClC;AAAA,AAAO,AAAK,AAAmB,AAAI,AAAa,AAAQ,AAAC,AAAQ,AAC/D,AAAI,AAAK,AACP;;;;;;wBAAO,QAAO,IAAP,AAAa,AAAQ,aAA5B,AAAO,AAAa,AAAU,AAA8B,AAC7D;;iBACD;AAAO,iBAAO,OAAP,AAAa,MAAA,AAAQ,QAAE,EAAvB,AAAa,AAAyC,8BAJ/D,AAIE,AAAO,AACR;AACF;;;AAED;AAAS,AACP,AAAM,AAAc,AAAK,AAAM,AAAY,AAAS,AAAG,AACvD;;;;;;sBACE,AAAC;AACC,AAAC,wBAAD,KACE,MAAS,AAAC,AAAK,qBADjB,AACW,AACT,GAFF,AAEW,AAAC,AAAK,AACf,AAAS,AAAC,AAAK,AAAM,AAAY,AAAS;AALhD,AAOE,AAAE,AAEL;;;4BAvDkD;;yBA0DrD;yBAA6B,MAA7B,AAAyC,qBAAzC,AAAyC,AACvC,AAAa,AAAU,AAGzB;;;AAAM,AAAW,AAAC,AAAI,AAAW,AAC/B,AAAM,AAAe,AAAO,AAAU;;;;;;EA/DxC,AAA2C,AAAU,AACnD;;AA+DA,AAAI,AAAa,AAAS;AAClB,eAAc,UAAA,AAAS,AAAQ,AACnC,AAAM,AACN,AAAQ,AAAS;AAFnB;;AAAoB,AAAiB,IAArC;AAIA;MAAA,AAAO,AAAM,gCAAE;;4BAAF;AAAb;YAPJ,AASC;uBAED;AAHG;WAGY;AAAf,AAAe,AAAmB,AAAU,AAAS;;;;;OAlF9C,OAAS,WAAhB,AAA2B,QAA3B","file":"/imports/plugins/included/payments-example/client/settings/containers/exampleSettingsFormContainer.js.map","sourcesContent":["import React, { Component, PropTypes } from \"react\";\nimport { Meteor } from \"meteor/meteor\";\nimport { composeWithTracker } from \"/lib/api/compose\";\nimport { Packages } from \"/lib/collections\";\nimport { Loading } from \"/imports/plugins/core/ui/client/components\";\nimport { TranslationProvider } from \"/imports/plugins/core/ui/client/providers\";\nimport { Reaction, i18next } from \"/client/api\";\nimport { ExampleSettingsForm } from \"../components\";\n\nclass ExampleSettingsFormContainer extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      apiKey: \"278302390293\"\n    };\n\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.saveUpdate = this.saveUpdate.bind(this);\n  }\n\n  handleChange(e) {\n    e.preventDefault();\n    this.setState({ apiKey: e.target.value });\n  }\n\n  handleSubmit(settings) {\n    // e.preventDefault();\n\n    const packageId = this.props.packageData._id;\n    const settingsKey = this.props.packageData.registry[0].settingsKey;\n\n    const fields = [{\n      property: \"apiKey\",\n      value: settings.apiKey\n    }, {\n      property: \"support\",\n      value: settings.support\n    }];\n\n    this.saveUpdate(fields, packageId, settingsKey);\n  }\n\n  saveUpdate(fields, id, settingsKey) {\n    Meteor.call(\"registry/update\", id, settingsKey, fields, (err) => {\n      if (err) {\n        return Alerts.toast(i18next.t(\"admin.settings.saveFailed\"), \"error\");\n      }\n      return Alerts.toast(i18next.t(\"admin.settings.saveSuccess\"), \"success\");\n    });\n  }\n\n  render() {\n    const settingsKey = this.props.packageData.registry[0].settingsKey;\n    return (\n      <TranslationProvider>\n        <ExampleSettingsForm\n          onChange={this.handleChange}\n          onSubmit={this.handleSubmit}\n          settings={this.props.packageData.settings[settingsKey]}\n        />\n      </TranslationProvider>\n    );\n  }\n}\n\nExampleSettingsFormContainer.propTypes = {\n  packageData: PropTypes.object\n};\n\nconst composer = ({}, onData) => {\n  const subscription = Meteor.subscribe(\"Packages\");\n  if (subscription.ready()) {\n    const packageData = Packages.findOne({\n      name: \"example-paymentmethod\",\n      shopId: Reaction.getShopId()\n    });\n    onData(null, { packageData });\n  }\n};\n\nexport default composeWithTracker(composer, Loading)(ExampleSettingsFormContainer);\n"]},"env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],null],[[],{"polyfill":false}],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"/imports/plugins/included/payments-example/client/settings/containers/exampleSettingsFormContainer.js.map","sourceFileName":"/imports/plugins/included/payments-example/client/settings/containers/exampleSettingsFormContainer.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"exampleSettingsFormContainer"},"ignored":false,"code":"var _objectDestructuringEmpty2 = require(\"babel-runtime/helpers/objectDestructuringEmpty\");\n\nvar _objectDestructuringEmpty3 = _interopRequireDefault(_objectDestructuringEmpty2);\n\nvar _classCallCheck2 = require(\"babel-runtime/helpers/classCallCheck\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _possibleConstructorReturn2 = require(\"babel-runtime/helpers/possibleConstructorReturn\");\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require(\"babel-runtime/helpers/inherits\");\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nvar React = void 0,\n    Component = void 0,\n    PropTypes = void 0;\nmodule.importSync(\"react\", {\n  \"default\": function (v) {\n    React = v;\n  },\n  Component: function (v) {\n    Component = v;\n  },\n  PropTypes: function (v) {\n    PropTypes = v;\n  }\n}, 0);\nvar Meteor = void 0;\nmodule.importSync(\"meteor/meteor\", {\n  Meteor: function (v) {\n    Meteor = v;\n  }\n}, 1);\nvar composeWithTracker = void 0;\nmodule.importSync(\"/lib/api/compose\", {\n  composeWithTracker: function (v) {\n    composeWithTracker = v;\n  }\n}, 2);\nvar Packages = void 0;\nmodule.importSync(\"/lib/collections\", {\n  Packages: function (v) {\n    Packages = v;\n  }\n}, 3);\nvar Loading = void 0;\nmodule.importSync(\"/imports/plugins/core/ui/client/components\", {\n  Loading: function (v) {\n    Loading = v;\n  }\n}, 4);\nvar TranslationProvider = void 0;\nmodule.importSync(\"/imports/plugins/core/ui/client/providers\", {\n  TranslationProvider: function (v) {\n    TranslationProvider = v;\n  }\n}, 5);\nvar Reaction = void 0,\n    i18next = void 0;\nmodule.importSync(\"/client/api\", {\n  Reaction: function (v) {\n    Reaction = v;\n  },\n  i18next: function (v) {\n    i18next = v;\n  }\n}, 6);\nvar ExampleSettingsForm = void 0;\nmodule.importSync(\"../components\", {\n  ExampleSettingsForm: function (v) {\n    ExampleSettingsForm = v;\n  }\n}, 7);\n\nvar ExampleSettingsFormContainer = function (_Component) {\n  (0, _inherits3.default)(ExampleSettingsFormContainer, _Component);\n\n  function ExampleSettingsFormContainer(props) {\n    (0, _classCallCheck3.default)(this, ExampleSettingsFormContainer);\n\n    var _this = (0, _possibleConstructorReturn3.default)(this, _Component.call(this, props));\n\n    _this.state = {\n      apiKey: \"278302390293\"\n    };\n    _this.handleChange = _this.handleChange.bind(_this);\n    _this.handleSubmit = _this.handleSubmit.bind(_this);\n    _this.saveUpdate = _this.saveUpdate.bind(_this);\n    return _this;\n  }\n\n  ExampleSettingsFormContainer.prototype.handleChange = function () {\n    function handleChange(e) {\n      e.preventDefault();\n      this.setState({\n        apiKey: e.target.value\n      });\n    }\n\n    return handleChange;\n  }();\n\n  ExampleSettingsFormContainer.prototype.handleSubmit = function () {\n    function handleSubmit(settings) {\n      // e.preventDefault();\n      var packageId = this.props.packageData._id;\n      var settingsKey = this.props.packageData.registry[0].settingsKey;\n      var fields = [{\n        property: \"apiKey\",\n        value: settings.apiKey\n      }, {\n        property: \"support\",\n        value: settings.support\n      }];\n      this.saveUpdate(fields, packageId, settingsKey);\n    }\n\n    return handleSubmit;\n  }();\n\n  ExampleSettingsFormContainer.prototype.saveUpdate = function () {\n    function saveUpdate(fields, id, settingsKey) {\n      Meteor.call(\"registry/update\", id, settingsKey, fields, function (err) {\n        if (err) {\n          return Alerts.toast(i18next.t(\"admin.settings.saveFailed\"), \"error\");\n        }\n\n        return Alerts.toast(i18next.t(\"admin.settings.saveSuccess\"), \"success\");\n      });\n    }\n\n    return saveUpdate;\n  }();\n\n  ExampleSettingsFormContainer.prototype.render = function () {\n    function render() {\n      var settingsKey = this.props.packageData.registry[0].settingsKey;\n      return React.createElement(\n        TranslationProvider,\n        null,\n        React.createElement(ExampleSettingsForm, {\n          onChange: this.handleChange,\n          onSubmit: this.handleSubmit,\n          settings: this.props.packageData.settings[settingsKey]\n        })\n      );\n    }\n\n    return render;\n  }();\n\n  return ExampleSettingsFormContainer;\n}(Component);\n\nExampleSettingsFormContainer.propTypes = {\n  packageData: PropTypes.object\n};\n\nvar composer = function (_ref, onData) {\n  (0, _objectDestructuringEmpty3.default)(_ref);\n  var subscription = Meteor.subscribe(\"Packages\");\n\n  if (subscription.ready()) {\n    var packageData = Packages.findOne({\n      name: \"example-paymentmethod\",\n      shopId: Reaction.getShopId()\n    });\n    onData(null, {\n      packageData: packageData\n    });\n  }\n};\n\nmodule.export(\"default\", exports.default = composeWithTracker(composer, Loading)(ExampleSettingsFormContainer));","map":{"version":3,"sources":["/imports/plugins/included/payments-example/client/settings/containers/exampleSettingsFormContainer.js"],"names":["React","Component","PropTypes","Meteor","composeWithTracker","Packages","Loading","TranslationProvider","Reaction","i18next","ExampleSettingsForm","ExampleSettingsFormContainer","constructor","props","state","apiKey","handleChange","bind","handleSubmit","saveUpdate","e","preventDefault","setState","target","value","settings","packageId","packageData","_id","settingsKey","registry","fields","property","support","id","call","err","Alerts","toast","t","render","propTypes","object","composer","onData","subscription","subscribe","ready","findOne","name","shopId","getShopId"],"mappings":";;;;;;;;;;;;;;;;;;AAAA;IAAA;;OAA4C,WAA5C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;GACA,AAAS,AAAc,AACvB,AAAS,AAA0B,AACnC,AAAS,AAAgB,AACzB,AAAS,AAAe,AACxB,AAAS,AAA2B,AACpC,AAAS,AAAU,AAAe,AAClC,AAAS,AAA2B,AAEpC;;IAAA,AAAM;;;wCACJ,AAAY;AAAO,AACjB;;qFAAA,AAAM,AAEN,AAAK,AAAQ,AACX;;UAAQ;cAGV,AAAK,AAAe,AAAK,AAAa,AAAK,AAC3C,AAAK,AAAe,AAAK,AAAa,AAAK,AAC3C;AANA,AAAa;UAMb,AAAK,AAAa,eAAK,MAAL,AAAgB,aAAlC,AAAkB,AAAqB,AACxC;;wCAED;;AAAA,AAAa,AAAG,AACd,AAAE,AACF;;yCAAK;0BAAL,GAAc,AAAE;QAAF,AAAU,AAAE,AAAO;AAAjC;yBACD;;AAED;;;;;;0BAAA,AAAa,UAAU,AACrB;AAEA,AAAM,AAAY,AAAK,AAAM,AAAY,AACzC;UAAM,YAAc,KAAK,MAAL,AAAW,YAA/B,AAAoB,AAAuB,AAAS,AAAG,AAEvD;UAAM,AAAS,AAAC,iDAAA,AACd,AAAU,AACV;UAAO;AACN,kBACD;eAAU,SADT,AAED;AALa,AAAC,AAEE;AAFlB,kBAQA;AAAK,eAAL,AAAgB,SAAhB,AAAwB,AAAW,AACpC,AAED;AAXiB,AAGZ,AAEM,AAAS;WAMpB,AAAW,WAAX,AAAmB,AAAI,QAAvB,AAAoC,WAClC;AAAA,AAAO,AAAK,AAAmB,AAAI,AAAa,AAAQ,AAAC,AAAQ,AAC/D,AAAI,AAAK,AACP;;;;;;wBAAO,QAAO,IAAP,AAAa,AAAQ,aAA5B,AAAO,AAAa,AAAU,AAA8B,AAC7D;;iBACD;AAAO,iBAAO,OAAP,AAAa,MAAA,AAAQ,QAAE,EAAvB,AAAa,AAAyC,8BAJ/D,AAIE,AAAO,AACR;AACF;;;AAED;AAAS,AACP,AAAM,AAAc,AAAK,AAAM,AAAY,AAAS,AAAG,AACvD;;;;;;sBACE,AAAC;AACC,AAAC,wBAAD,KACE,MAAS,AAAC,AAAK,qBADjB,AACW,AACT,GAFF,AAEW,AAAC,AAAK,AACf,AAAS,AAAC,AAAK,AAAM,AAAY,AAAS;AALhD,AAOE,AAAE,AAEL;;;4BAvDkD;;yBA0DrD;yBAA6B,MAA7B,AAAyC,qBAAzC,AAAyC,AACvC,AAAa,AAAU,AAGzB;;;AAAM,AAAW,AAAC,AAAI,AAAW,AAC/B,AAAM,AAAe,AAAO,AAAU;;;;;;EA/DxC,AAA2C,AAAU,AACnD;;AA+DA,AAAI,AAAa,AAAS;AAClB,eAAc,UAAA,AAAS,AAAQ,AACnC,AAAM,AACN,AAAQ,AAAS;AAFnB;;AAAoB,AAAiB,IAArC;AAIA;MAAA,AAAO,AAAM,gCAAE;;4BAAF;AAAb;YAPJ,AASC;uBAED;AAHG;WAGY;AAAf,AAAe,AAAmB,AAAU,AAAS;;;;;OAlF9C,OAAS,WAAhB,AAA2B,QAA3B","file":"/imports/plugins/included/payments-example/client/settings/containers/exampleSettingsFormContainer.js.map","sourcesContent":["import React, { Component, PropTypes } from \"react\";\nimport { Meteor } from \"meteor/meteor\";\nimport { composeWithTracker } from \"/lib/api/compose\";\nimport { Packages } from \"/lib/collections\";\nimport { Loading } from \"/imports/plugins/core/ui/client/components\";\nimport { TranslationProvider } from \"/imports/plugins/core/ui/client/providers\";\nimport { Reaction, i18next } from \"/client/api\";\nimport { ExampleSettingsForm } from \"../components\";\n\nclass ExampleSettingsFormContainer extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      apiKey: \"278302390293\"\n    };\n\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.saveUpdate = this.saveUpdate.bind(this);\n  }\n\n  handleChange(e) {\n    e.preventDefault();\n    this.setState({ apiKey: e.target.value });\n  }\n\n  handleSubmit(settings) {\n    // e.preventDefault();\n\n    const packageId = this.props.packageData._id;\n    const settingsKey = this.props.packageData.registry[0].settingsKey;\n\n    const fields = [{\n      property: \"apiKey\",\n      value: settings.apiKey\n    }, {\n      property: \"support\",\n      value: settings.support\n    }];\n\n    this.saveUpdate(fields, packageId, settingsKey);\n  }\n\n  saveUpdate(fields, id, settingsKey) {\n    Meteor.call(\"registry/update\", id, settingsKey, fields, (err) => {\n      if (err) {\n        return Alerts.toast(i18next.t(\"admin.settings.saveFailed\"), \"error\");\n      }\n      return Alerts.toast(i18next.t(\"admin.settings.saveSuccess\"), \"success\");\n    });\n  }\n\n  render() {\n    const settingsKey = this.props.packageData.registry[0].settingsKey;\n    return (\n      <TranslationProvider>\n        <ExampleSettingsForm\n          onChange={this.handleChange}\n          onSubmit={this.handleSubmit}\n          settings={this.props.packageData.settings[settingsKey]}\n        />\n      </TranslationProvider>\n    );\n  }\n}\n\nExampleSettingsFormContainer.propTypes = {\n  packageData: PropTypes.object\n};\n\nconst composer = ({}, onData) => {\n  const subscription = Meteor.subscribe(\"Packages\");\n  if (subscription.ready()) {\n    const packageData = Packages.findOne({\n      name: \"example-paymentmethod\",\n      shopId: Reaction.getShopId()\n    });\n    onData(null, { packageData });\n  }\n};\n\nexport default composeWithTracker(composer, Loading)(ExampleSettingsFormContainer);\n"]},"hash":"3db4f3da98b5f5a2df254e2edab96ea32d8c2a00"}
