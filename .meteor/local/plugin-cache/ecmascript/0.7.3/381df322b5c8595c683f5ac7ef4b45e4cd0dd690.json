{"metadata":{"usedHelpers":[],"marked":[],"modules":{"imports":[{"source":"/client/api","imported":["Reaction","i18next","i18nextDep"],"specifiers":[{"kind":"named","imported":"Reaction","local":"Reaction"},{"kind":"named","imported":"i18next","local":"i18next"},{"kind":"named","imported":"i18nextDep","local":"i18nextDep"}]},{"source":"/lib/collections","imported":["*"],"specifiers":[{"kind":"namespace","local":"Collections"}]},{"source":"meteor/meteor","imported":["Meteor"],"specifiers":[{"kind":"named","imported":"Meteor","local":"Meteor"}]},{"source":"meteor/templating","imported":["Template"],"specifiers":[{"kind":"named","imported":"Template","local":"Template"}]}],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"/client/modules/accounts/helpers/templates.js","filenameRelative":"/client/modules/accounts/helpers/templates.js","inputSourceMap":{"version":3,"sources":["/client/modules/accounts/helpers/templates.js"],"names":["Reaction","i18next","i18nextDep","Collections","Meteor","Template","registerHelper","currentUser","size","options","secure","default","user","Accounts","account","findOne","_id","profile","picture","emails","length","email","address","Gravatar","imageUrl","displayUser","depend","name","username","Roles","userIsInRole","userId","getShopId","t","defaultValue","split","services","twitter","first_name","google","given_name","facebook","instagram","pinterest"],"mappings":"AAAA,IAAS;IAAT,AAAmB;IAAnB,AAA4B;AAA5B,OAA8C,WAA9C;;;;;;;;;;;;;;;;;;;;;;;;;;;;GACA,AAAO,AAAK,AAAiB,AAC7B,AAAS,AAAc,AACvB,AAAS,AAAgB,AAEzB,AAAS,AAAe,AAAe,AAAU,AAAa,AAAM;AAClE,AAAM,SAAU;MAAA,AACN;AACF,YAFQ,AAGd;UAHF,AAAgB,AAGL;eAEX,AAAM,AAAO,AAAe,AAAS,AACrC;AAJE;AAIE,AAAC,MAAL,AAAW,OAAA,AAAO,wBAClB;OAAM,MAAU,OARkD,AAQlE,AAAgB,AAAY,AAAS,AAAQ,AAAK,AAClD;kDACA,KARE,CAQF,AAAI,AAAW,AAAQ,AAAW,AAAQ,AAAQ,AAAS,AACzD;;MAAO,WAAQ,QAAf,AAAO,AAAgB,oCACxB;;AACD;;MAAI,KAAA,AAAK,UAAU,KAAA,AAAK,OAAL,AAAY,WAA/B,AAA0C,GAAG,AAC3C;QAAM,QAAQ,KAAA,AAAK,OAAL,AAAY,GAA1B,AAA6B,AAC7B;WAAO,SAAA,AAAS,SAAT,AAAkB,OAAzB,AAAO,AAAyB,AACjC;AACF;A,AAjBD,AAmBA,IAGA,AAAS,AAAe,AAAe,AAAU,AAAa,AAC5D,AAAW;;;AAEX,AAAM,SAAO,eAAe,eAA5B,AAA4B,AAAS;aACrC,AAAI,AAAM,AACR;MAAI,AAAK,OAAL,AAAgB,AAAK,eAAL,AAAa,SAAjC,AAAuC,AACrC;;;AADF,QAEO,KAAI,AAAK,WAAT,KAAmB,cACxB;aAAO,KAAK,QAAZ,AACD;AALO,AAOR,8BACA;;AACA,KAPE,AAAO,AAAK,AAAQ,AACrB,CAMD,AAAI,AAAM,AAAa,AAAK,AAAO,AAAK,AAAQ,AAC9C,AAAS,AAAc,AACvB;AAAO,AAAQ,AAAE,AAAoB,AAAE;;;cAAc,sCAAhB,mBAArC,AAAO,uBACR;;sBACF;;AAjBH,AAkBC;A,AAED;IAIA,AAAS,AAAe,AAAS,AAAU,AAAa,AACtD,AAAM,AAAO,AAAe,AAAO,AACnC,AAAI,AAAQ,AAAK,AAAW,AAAK,AAAQ,AAAM;;;AAC7C,SAAO,AAAK,eAAL,AAAa,AAAK,SAAzB,AAAO,AAAwB,AAAK,uBACrC;AAFD,MAEO,AAAI,OAAQ,AAAK,eAAjB,AAA2B,OAChC;;MAAO,QAAK,KAAL,AAAc,WAAK,KAAnB,AAAyB,AAAK,QAArC,MACD;;oCACD;AAAI,WAAQ,KAAK,SAAjB,AAA2B,gBACzB;AAAM,AAAY,AAAY,AAC5B;;cAAQ,KAAR,UACE;QAAK,AAAC,AAAK,WAAL,AAAc,YAApB,AACE;cAAA,AAAO,AAAK,AAAS,AAAQ;4BAC/B;AAAK,AAAC,iBAAK,KAAL,AAAc,SAApB,QACE;;cAAO,KAAK,SAAZ,AAAO,AAAc,AAAO;sCAC9B;;aAAK,CAAC,KAAA,AAAK,SAAX,AAAoB,AAClB;iBAAO,KAAA,AAAK,SAAL,AAAc,SAArB,AAA8B;;4BAChC;AAAK,AAAC,iBAAK,KAAL,AAAc,SAApB,UACE;;cAAO,KAAK,SAAZ,AAAO,AAAc,AAAU;yCACjC;;AAAA,AAAK,AAAC,AAAK,AAAS,AAClB;2BAAO,AAAc,AAAU;AAA/B,0BACF;WADS,AAAK;;AAEZ;;WAAO,AAAQ,AAAE,AAAoB,AAAE;AAAF,AAAgB;;;kBAZzD;GAYI,AAAO;AArBjB,AAQI,AAAiB,AAehB,AACD,AAAO,AACR,AACD,AAAO,AAAQ,AAAE,AAAqB,AAAE,AAAc,AACvD","file":"/client/modules/accounts/helpers/templates.js.map","sourcesContent":["import { Reaction, i18next, i18nextDep } from \"/client/api\";\nimport * as Collections from \"/lib/collections\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Template } from \"meteor/templating\";\n\nTemplate.registerHelper(\"getGravatar\", function (currentUser, size) {\n  const options = {\n    secure: true,\n    size: size,\n    default: \"identicon\"\n  };\n  const user = currentUser || Accounts.user();\n  if (!user) return false;\n  const account = Collections.Accounts.findOne(user._id);\n  // first we check picture exists. Picture has higher priority to display\n  if (account && account.profile && account.profile.picture) {\n    return account.profile.picture;\n  }\n  if (user.emails && user.emails.length === 1) {\n    const email = user.emails[0].address;\n    return Gravatar.imageUrl(email, options);\n  }\n});\n\n/**\n * registerHelper displayName\n */\nTemplate.registerHelper(\"displayName\", function (displayUser) {\n  i18nextDep.depend();\n\n  const user = displayUser || Accounts.user();\n  if (user) {\n    if (user.profile && user.profile.name) {\n      return user.profile.name;\n    } else if (user.username) {\n      return user.username;\n    }\n\n    // todo: previous check was user.services !== \"anonymous\", \"resume\". Is this\n    // new check covers previous check?\n    if (Roles.userIsInRole(user._id || user.userId, \"account/profile\",\n      Reaction.getShopId())) {\n      return i18next.t(\"accountsUI.guest\", { defaultValue: \"Guest\" });\n    }\n  }\n});\n\n/**\n * registerHelper fName\n */\n\nTemplate.registerHelper(\"fName\", function (displayUser) {\n  const user = displayUser || Meteor.user();\n  if (user && user.profile && user.profile.name) {\n    return user.profile.name.split(\" \")[0];\n  } else if (user && user.username) {\n    return user.username.name.split(\" \")[0];\n  }\n  if (user && user.services) {\n    const username = (function () {\n      switch (false) {\n        case !user.services.twitter:\n          return user.services.twitter.first_name;\n        case !user.services.google:\n          return user.services.google.given_name;\n        case !user.services.facebook:\n          return user.services.facebook.first_name;\n        case !user.services.instagram:\n          return user.services.instagram.first_name;\n        case !user.services.pinterest:\n          return user.services.pinterest.first_name;\n        default:\n          return i18next.t(\"accountsUI.guest\", { defaultValue: \"Guest\" });\n      }\n    })();\n    return username;\n  }\n  return i18next.t(\"accountsUI.signIn\", { defaultValue: \"Sign in\" });\n});\n"]},"env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],null],[[],{"polyfill":false}],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"/client/modules/accounts/helpers/templates.js.map","sourceFileName":"/client/modules/accounts/helpers/templates.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"templates"},"ignored":false,"code":"var Reaction = void 0,\n    i18next = void 0,\n    i18nextDep = void 0;\nmodule.importSync(\"/client/api\", {\n  Reaction: function (v) {\n    Reaction = v;\n  },\n  i18next: function (v) {\n    i18next = v;\n  },\n  i18nextDep: function (v) {\n    i18nextDep = v;\n  }\n}, 0);\nvar Collections = Object.create(null);\nmodule.importSync(\"/lib/collections\", {\n  \"*\": function (v, n) {\n    Collections[n] = v;\n  }\n}, 1);\nvar Meteor = void 0;\nmodule.importSync(\"meteor/meteor\", {\n  Meteor: function (v) {\n    Meteor = v;\n  }\n}, 2);\nvar Template = void 0;\nmodule.importSync(\"meteor/templating\", {\n  Template: function (v) {\n    Template = v;\n  }\n}, 3);\nTemplate.registerHelper(\"getGravatar\", function (currentUser, size) {\n  var options = {\n    secure: true,\n    size: size,\n    \"default\": \"identicon\"\n  };\n  var user = currentUser || Accounts.user();\n  if (!user) return false;\n  var account = Collections.Accounts.findOne(user._id); // first we check picture exists. Picture has higher priority to display\n\n  if (account && account.profile && account.profile.picture) {\n    return account.profile.picture;\n  }\n\n  if (user.emails && user.emails.length === 1) {\n    var email = user.emails[0].address;\n    return Gravatar.imageUrl(email, options);\n  }\n}); /**\n     * registerHelper displayName\n     */\nTemplate.registerHelper(\"displayName\", function (displayUser) {\n  i18nextDep.depend();\n  var user = displayUser || Accounts.user();\n\n  if (user) {\n    if (user.profile && user.profile.name) {\n      return user.profile.name;\n    } else if (user.username) {\n      return user.username;\n    } // todo: previous check was user.services !== \"anonymous\", \"resume\". Is this\n    // new check covers previous check?\n\n\n    if (Roles.userIsInRole(user._id || user.userId, \"account/profile\", Reaction.getShopId())) {\n      return i18next.t(\"accountsUI.guest\", {\n        defaultValue: \"Guest\"\n      });\n    }\n  }\n}); /**\n     * registerHelper fName\n     */\nTemplate.registerHelper(\"fName\", function (displayUser) {\n  var user = displayUser || Meteor.user();\n\n  if (user && user.profile && user.profile.name) {\n    return user.profile.name.split(\" \")[0];\n  } else if (user && user.username) {\n    return user.username.name.split(\" \")[0];\n  }\n\n  if (user && user.services) {\n    var username = function () {\n      switch (false) {\n        case !user.services.twitter:\n          return user.services.twitter.first_name;\n\n        case !user.services.google:\n          return user.services.google.given_name;\n\n        case !user.services.facebook:\n          return user.services.facebook.first_name;\n\n        case !user.services.instagram:\n          return user.services.instagram.first_name;\n\n        case !user.services.pinterest:\n          return user.services.pinterest.first_name;\n\n        default:\n          return i18next.t(\"accountsUI.guest\", {\n            defaultValue: \"Guest\"\n          });\n      }\n    }();\n\n    return username;\n  }\n\n  return i18next.t(\"accountsUI.signIn\", {\n    defaultValue: \"Sign in\"\n  });\n});","map":{"version":3,"sources":["/client/modules/accounts/helpers/templates.js"],"names":["Reaction","i18next","i18nextDep","Collections","Meteor","Template","registerHelper","currentUser","size","options","secure","default","user","Accounts","account","findOne","_id","profile","picture","emails","length","email","address","Gravatar","imageUrl","displayUser","depend","name","username","Roles","userIsInRole","userId","getShopId","t","defaultValue","split","services","twitter","first_name","google","given_name","facebook","instagram","pinterest"],"mappings":"AAAA,IAAS;IAAT,AAAmB;IAAnB,AAA4B;AAA5B,OAA8C,WAA9C;;;;;;;;;;;;;;;;;;;;;;;;;;;;GACA,AAAO,AAAK,AAAiB,AAC7B,AAAS,AAAc,AACvB,AAAS,AAAgB,AAEzB,AAAS,AAAe,AAAe,AAAU,AAAa,AAAM;AAClE,AAAM,SAAU;MAAA,AACN;AACF,YAFQ,AAGd;UAHF,AAAgB,AAGL;eAEX,AAAM,AAAO,AAAe,AAAS,AACrC;AAJE;AAIE,AAAC,MAAL,AAAW,OAAA,AAAO,wBAClB;OAAM,MAAU,OARkD,AAQlE,AAAgB,AAAY,AAAS,AAAQ,AAAK,AAClD;kDACA,KARE,CAQF,AAAI,AAAW,AAAQ,AAAW,AAAQ,AAAQ,AAAS,AACzD;;MAAO,WAAQ,QAAf,AAAO,AAAgB,oCACxB;;AACD;;MAAI,KAAA,AAAK,UAAU,KAAA,AAAK,OAAL,AAAY,WAA/B,AAA0C,GAAG,AAC3C;QAAM,QAAQ,KAAA,AAAK,OAAL,AAAY,GAA1B,AAA6B,AAC7B;WAAO,SAAA,AAAS,SAAT,AAAkB,OAAzB,AAAO,AAAyB,AACjC;AACF;A,AAjBD,AAmBA,IAGA,AAAS,AAAe,AAAe,AAAU,AAAa,AAC5D,AAAW;;;AAEX,AAAM,SAAO,eAAe,eAA5B,AAA4B,AAAS;aACrC,AAAI,AAAM,AACR;MAAI,AAAK,OAAL,AAAgB,AAAK,eAAL,AAAa,SAAjC,AAAuC,AACrC;;;AADF,QAEO,KAAI,AAAK,WAAT,KAAmB,cACxB;aAAO,KAAK,QAAZ,AACD;AALO,AAOR,8BACA;;AACA,KAPE,AAAO,AAAK,AAAQ,AACrB,CAMD,AAAI,AAAM,AAAa,AAAK,AAAO,AAAK,AAAQ,AAC9C,AAAS,AAAc,AACvB;AAAO,AAAQ,AAAE,AAAoB,AAAE;;;cAAc,sCAAhB,mBAArC,AAAO,uBACR;;sBACF;;AAjBH,AAkBC;A,AAED;IAIA,AAAS,AAAe,AAAS,AAAU,AAAa,AACtD,AAAM,AAAO,AAAe,AAAO,AACnC,AAAI,AAAQ,AAAK,AAAW,AAAK,AAAQ,AAAM;;;AAC7C,SAAO,AAAK,eAAL,AAAa,AAAK,SAAzB,AAAO,AAAwB,AAAK,uBACrC;AAFD,MAEO,AAAI,OAAQ,AAAK,eAAjB,AAA2B,OAChC;;MAAO,QAAK,KAAL,AAAc,WAAK,KAAnB,AAAyB,AAAK,QAArC,MACD;;oCACD;AAAI,WAAQ,KAAK,SAAjB,AAA2B,gBACzB;AAAM,AAAY,AAAY,AAC5B;;cAAQ,KAAR,UACE;QAAK,AAAC,AAAK,WAAL,AAAc,YAApB,AACE;cAAA,AAAO,AAAK,AAAS,AAAQ;4BAC/B;AAAK,AAAC,iBAAK,KAAL,AAAc,SAApB,QACE;;cAAO,KAAK,SAAZ,AAAO,AAAc,AAAO;sCAC9B;;aAAK,CAAC,KAAA,AAAK,SAAX,AAAoB,AAClB;iBAAO,KAAA,AAAK,SAAL,AAAc,SAArB,AAA8B;;4BAChC;AAAK,AAAC,iBAAK,KAAL,AAAc,SAApB,UACE;;cAAO,KAAK,SAAZ,AAAO,AAAc,AAAU;yCACjC;;AAAA,AAAK,AAAC,AAAK,AAAS,AAClB;2BAAO,AAAc,AAAU;AAA/B,0BACF;WADS,AAAK;;AAEZ;;WAAO,AAAQ,AAAE,AAAoB,AAAE;AAAF,AAAgB;;;kBAZzD;GAYI,AAAO;AArBjB,AAQI,AAAiB,AAehB,AACD,AAAO,AACR,AACD,AAAO,AAAQ,AAAE,AAAqB,AAAE,AAAc,AACvD","file":"/client/modules/accounts/helpers/templates.js.map","sourcesContent":["import { Reaction, i18next, i18nextDep } from \"/client/api\";\nimport * as Collections from \"/lib/collections\";\nimport { Meteor } from \"meteor/meteor\";\nimport { Template } from \"meteor/templating\";\n\nTemplate.registerHelper(\"getGravatar\", function (currentUser, size) {\n  const options = {\n    secure: true,\n    size: size,\n    default: \"identicon\"\n  };\n  const user = currentUser || Accounts.user();\n  if (!user) return false;\n  const account = Collections.Accounts.findOne(user._id);\n  // first we check picture exists. Picture has higher priority to display\n  if (account && account.profile && account.profile.picture) {\n    return account.profile.picture;\n  }\n  if (user.emails && user.emails.length === 1) {\n    const email = user.emails[0].address;\n    return Gravatar.imageUrl(email, options);\n  }\n});\n\n/**\n * registerHelper displayName\n */\nTemplate.registerHelper(\"displayName\", function (displayUser) {\n  i18nextDep.depend();\n\n  const user = displayUser || Accounts.user();\n  if (user) {\n    if (user.profile && user.profile.name) {\n      return user.profile.name;\n    } else if (user.username) {\n      return user.username;\n    }\n\n    // todo: previous check was user.services !== \"anonymous\", \"resume\". Is this\n    // new check covers previous check?\n    if (Roles.userIsInRole(user._id || user.userId, \"account/profile\",\n      Reaction.getShopId())) {\n      return i18next.t(\"accountsUI.guest\", { defaultValue: \"Guest\" });\n    }\n  }\n});\n\n/**\n * registerHelper fName\n */\n\nTemplate.registerHelper(\"fName\", function (displayUser) {\n  const user = displayUser || Meteor.user();\n  if (user && user.profile && user.profile.name) {\n    return user.profile.name.split(\" \")[0];\n  } else if (user && user.username) {\n    return user.username.name.split(\" \")[0];\n  }\n  if (user && user.services) {\n    const username = (function () {\n      switch (false) {\n        case !user.services.twitter:\n          return user.services.twitter.first_name;\n        case !user.services.google:\n          return user.services.google.given_name;\n        case !user.services.facebook:\n          return user.services.facebook.first_name;\n        case !user.services.instagram:\n          return user.services.instagram.first_name;\n        case !user.services.pinterest:\n          return user.services.pinterest.first_name;\n        default:\n          return i18next.t(\"accountsUI.guest\", { defaultValue: \"Guest\" });\n      }\n    })();\n    return username;\n  }\n  return i18next.t(\"accountsUI.signIn\", { defaultValue: \"Sign in\" });\n});\n"]},"hash":"381df322b5c8595c683f5ac7ef4b45e4cd0dd690"}
