{"metadata":{"usedHelpers":["typeof","interopRequireDefault"],"marked":[],"modules":{"imports":[{"source":"/client/api","imported":["Reaction"],"specifiers":[{"kind":"named","imported":"Reaction","local":"Reaction"}]},{"source":"/lib/api","imported":["ReactionProduct"],"specifiers":[{"kind":"named","imported":"ReactionProduct","local":"ReactionProduct"}]},{"source":"/imports/plugins/core/ui/client/components","imported":["EditButton","VisibilityButton"],"specifiers":[{"kind":"named","imported":"EditButton","local":"EditButton"},{"kind":"named","imported":"VisibilityButton","local":"VisibilityButton"}]},{"source":"meteor/session","imported":["Session"],"specifiers":[{"kind":"named","imported":"Session","local":"Session"}]},{"source":"meteor/templating","imported":["Template"],"specifiers":[{"kind":"named","imported":"Template","local":"Template"}]}],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"/imports/plugins/included/product-variant/client/templates/products/productDetail/variants/variant.js","filenameRelative":"/imports/plugins/included/product-variant/client/templates/products/productDetail/variants/variant.js","inputSourceMap":{"version":3,"sources":["/imports/plugins/included/product-variant/client/templates/products/productDetail/variants/variant.js"],"names":["Reaction","ReactionProduct","EditButton","VisibilityButton","Session","Template","variantIsSelected","variantId","current","selectedVariant","_id","ancestors","indexOf","variantIsInActionView","actionViewVariant","getActionView","data","isActionViewOpen","variant","helpers","progressBar","inventoryPercentage","displayQuantity","getVariantQuantity","displayPrice","getVariantPriceRange","isSoldOut","currentData","component","toggleOn","onClick","showVariant","VariantRevisionButton","isVisible","event","stopPropagation","toggleVisibility","selectedProduct","setCurrentVariant","set","Router","go","handle","hasPermission","showActionView","label","i18nKeyLabel","template","events","Alerts","removeSeen"],"mappings":";;;;;;AAAA,IAAS;AAAT,OAAyB,WAAzB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;G,AACA,AAAS,AAAuB,AAChC,AAAS,AAAY,AAAwB,AAC7C,AAAS,AAAe,AACxB,AAAS,AAAgB,AAEzB;;AACA,AAAS,AAAkB,AAAW;AACpC,AAAM,SAAU,kBAAgB,WAAhC,AAAgB;gCAChB;;MAAI,QAAA,AAAO,4EAAP,AAAmB,aAAa,cAAc,QAAd,AAAsB,OAAO,CAAC,QAAA,AAAQ,UAAR,AAAkB,QAApF,AAAI,AAA8D,AAA0B,aAAa,AACvG;WAAA,AAAO,AACR;AAED;;SAAA,AAAO,AACR;;;AAED,SAAA,AAAS,sBAAT,AAA+B,WAAW,AACxC;MAAM,oBAAoB,SAAA,AAAS,gBAAnC,AAAmD,AAEnD;;MAAA,AAAI,mBAAmB,AACrB;AACA;WAAO,kBAAA,AAAkB,cAAc,kBAAkB,kBAAlD,AAAgC,AAAoC,QAAQ,SAAnF,AAAmF,AAAS,AAC7F;AAED;;SAAA,AAAO,AACR;A,AAGD,EAIA,AAAS,AAAQ,AAAQ,AACvB,AAAa,AAAY,AACvB,AAAI,AAAK,AAAuB,AAAI;;;;AAClC,SAAO;AADT,AAEO,eAAI,AAAK,YAAT,AAAI,AAA4B,AAAI,AACzC;aAAA,AAAO,2BACR;;+CACD;AAAO,aAPc,AAOrB,AACD;AACD;;WAAiB,AAAY,AAC3B;AAAA,AAAI,AAAkB,AAAK,AAAM,AAC/B;AAAO,+BAAP,AACD;;aAED;AAdqB,AAcrB,AAAO,AACR,AACD;;WAAiB,AAAY,AAC3B;AAAA,AAAO,AAAgB,AAAmB,AAC3C;AAlBsB,+BAmBvB;WAAc,gBAAY,mBACxB;AAAA,AAAO,AAAgB,AAAqB,AAAK,AAClD;AArBsB,4BAsBvB;WAAW,AAAY,0CACrB;AAAA,AAAO,AAAgB,AAAmB,AAAQ,AACnD;AAxBsB;sDAyBvB;AAAa,AACX;AAAM,0BAAN,AAAa,AAAS,AAEtB;QAAO,gBAAA,AACL,AAAW,AACX;;iBACA;gBAAU,2BACR;2BAAA,AAAY,AACb;;AALH,AAAO,AAOR;AAPQ,AAEK,AAAsB,AAAK;AA9BlB;qCAoCvB;kBAAwB,SACtB,AAAM,AAAU,AAAS,AAEzB;;iBAAO,AACM,AACX;gBAAU,QAFL,AAEa;gCAClB;cAAA,AAAQ,AAAO,AACb;AAAM,wBAAN,iBACA;AAAA,AAAgB,AAAiB,AAClC;AANI,AACL;AADF,AAAO,AAQR;AA5CG,AACD,IAJL,AAkDA,A,AAlDyB;;;;8BAsDzB;MAAA,AAAS,AAAY,kBAArB,AAA8B,gBAC5B,AAAM,AAAkB,AAAgB,AAExC;kBAAA,AAAgB,kBAAkB,QAAlC,AAA0C,AAC1C;UAAA,AAAQ,IAAI,kBAAkB,QAA9B,AAAsC,KAAtC,AAA2C,AAC3C;WAAA,AAAS,OAAT,AAAgB,GAAhB,AAAmB;;uBAAW,AAAE,AAAQ,AAAgB,AAAQ;AAAlC;;eAA6C,AAAQ,gCAAnF,AAA8B;;aAE9B;AAAI,AAAS,oBAAb,AAAI,AAAuB,AAAkB,AAC3C;AAAS,gBAAT,AAAwB,AACtB;YADsB,AACf,AACP,AAAc,AACd;;AAHsB,AAGZ,AACV;AAJF,AAAwB,AAIhB;;AAET;;gBAGH;AAAA,AAAS,AAAQ,AAAO,AACtB;AAAuB,8BAAY,YACjC;gBAAA,AAAY,AACb;AAHqB,AAItB;2BAA4B,YAAY,AACtC;WALoB,AAKpB,AAAY,AACb,AACD;oBAAyB,kBAAY,KACnC;AARJ,AAAwB,AAQpB,AAAO,AAEP,AAAgB,AAAkB,AAAK,AACxC;AAbF","file":"/imports/plugins/included/product-variant/client/templates/products/productDetail/variants/variant.js.map","sourcesContent":["import { Reaction } from \"/client/api\";\nimport { ReactionProduct } from \"/lib/api\";\nimport { EditButton, VisibilityButton } from \"/imports/plugins/core/ui/client/components\";\nimport { Session } from \"meteor/session\";\nimport { Template } from \"meteor/templating\";\n\n// Duplicated in variantList/variantList.js\nfunction variantIsSelected(variantId) {\n  const current = ReactionProduct.selectedVariant();\n  if (typeof current === \"object\" && (variantId === current._id || ~current.ancestors.indexOf(variantId))) {\n    return true;\n  }\n\n  return false;\n}\n\nfunction variantIsInActionView(variantId) {\n  const actionViewVariant = Reaction.getActionView().data;\n\n  if (actionViewVariant) {\n    // Check if the variant is selected, and also visible & selected in the action view\n    return variantIsSelected(variantId) && variantIsSelected(actionViewVariant._id) && Reaction.isActionViewOpen();\n  }\n\n  return false;\n}\n\n\n/**\n * variant helpers\n */\n\nTemplate.variant.helpers({\n  progressBar: function () {\n    if (this.inventoryPercentage <= 10) {\n      return \"progress-bar-danger\";\n    } else if (this.inventoryPercentage <= 30) {\n      return \"progress-bar-warning\";\n    }\n    return \"progress-bar-success\";\n  },\n  selectedVariant: function () {\n    if (variantIsSelected(this._id)) {\n      return \"variant-detail-selected\";\n    }\n\n    return null;\n  },\n  displayQuantity: function () {\n    return ReactionProduct.getVariantQuantity(this);\n  },\n  displayPrice: function () {\n    return ReactionProduct.getVariantPriceRange(this._id);\n  },\n  isSoldOut: function () {\n    return ReactionProduct.getVariantQuantity(this) < 1;\n  },\n  EditButton() {\n    const data = Template.currentData();\n\n    return {\n      component: EditButton,\n      toggleOn: variantIsInActionView(data._id),\n      onClick() {\n        showVariant(data);\n      }\n    };\n  },\n  VariantRevisionButton() {\n    const variant = Template.currentData();\n\n    return {\n      component: VisibilityButton,\n      toggleOn: variant.isVisible,\n      onClick(event) {\n        event.stopPropagation();\n        ReactionProduct.toggleVisibility(variant);\n      }\n    };\n  }\n});\n\n/**\n * variant events\n */\n\nfunction showVariant(variant) {\n  const selectedProduct = ReactionProduct.selectedProduct();\n\n  ReactionProduct.setCurrentVariant(variant._id);\n  Session.set(\"variant-form-\" + variant._id, true);\n  Reaction.Router.go(\"product\", { handle: selectedProduct.handle, variantId: variant._id });\n\n  if (Reaction.hasPermission(\"createProduct\")) {\n    Reaction.showActionView({\n      label: \"Edit Variant\",\n      i18nKeyLabel: \"productDetailEdit.editVariant\",\n      template: \"variantForm\",\n      data: variant\n    });\n  }\n}\n\nTemplate.variant.events({\n  \"click .variant-edit\": function () {\n    showVariant(this);\n  },\n  \"dblclick .variant-detail\": function () {\n    showVariant(this);\n  },\n  \"click .variant-detail\": function () {\n    Alerts.removeSeen();\n\n    ReactionProduct.setCurrentVariant(this._id);\n  }\n});\n"]},"env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],null],[[],{"polyfill":false}],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"/imports/plugins/included/product-variant/client/templates/products/productDetail/variants/variant.js.map","sourceFileName":"/imports/plugins/included/product-variant/client/templates/products/productDetail/variants/variant.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"variant"},"ignored":false,"code":"var _typeof2 = require(\"babel-runtime/helpers/typeof\");\n\nvar _typeof3 = _interopRequireDefault(_typeof2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nvar Reaction = void 0;\nmodule.importSync(\"/client/api\", {\n  Reaction: function (v) {\n    Reaction = v;\n  }\n}, 0);\nvar ReactionProduct = void 0;\nmodule.importSync(\"/lib/api\", {\n  ReactionProduct: function (v) {\n    ReactionProduct = v;\n  }\n}, 1);\nvar EditButton = void 0,\n    VisibilityButton = void 0;\nmodule.importSync(\"/imports/plugins/core/ui/client/components\", {\n  EditButton: function (v) {\n    EditButton = v;\n  },\n  VisibilityButton: function (v) {\n    VisibilityButton = v;\n  }\n}, 2);\nvar Session = void 0;\nmodule.importSync(\"meteor/session\", {\n  Session: function (v) {\n    Session = v;\n  }\n}, 3);\nvar Template = void 0;\nmodule.importSync(\"meteor/templating\", {\n  Template: function (v) {\n    Template = v;\n  }\n}, 4);\n\n// Duplicated in variantList/variantList.js\nfunction variantIsSelected(variantId) {\n  var current = ReactionProduct.selectedVariant();\n\n  if ((typeof current === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(current)) === \"object\" && (variantId === current._id || ~current.ancestors.indexOf(variantId))) {\n    return true;\n  }\n\n  return false;\n}\n\nfunction variantIsInActionView(variantId) {\n  var actionViewVariant = Reaction.getActionView().data;\n\n  if (actionViewVariant) {\n    // Check if the variant is selected, and also visible & selected in the action view\n    return variantIsSelected(variantId) && variantIsSelected(actionViewVariant._id) && Reaction.isActionViewOpen();\n  }\n\n  return false;\n} /**\n   * variant helpers\n   */\n\nTemplate.variant.helpers({\n  progressBar: function () {\n    if (this.inventoryPercentage <= 10) {\n      return \"progress-bar-danger\";\n    } else if (this.inventoryPercentage <= 30) {\n      return \"progress-bar-warning\";\n    }\n\n    return \"progress-bar-success\";\n  },\n  selectedVariant: function () {\n    if (variantIsSelected(this._id)) {\n      return \"variant-detail-selected\";\n    }\n\n    return null;\n  },\n  displayQuantity: function () {\n    return ReactionProduct.getVariantQuantity(this);\n  },\n  displayPrice: function () {\n    return ReactionProduct.getVariantPriceRange(this._id);\n  },\n  isSoldOut: function () {\n    return ReactionProduct.getVariantQuantity(this) < 1;\n  },\n  EditButton: function () {\n    var data = Template.currentData();\n    return {\n      component: EditButton,\n      toggleOn: variantIsInActionView(data._id),\n      onClick: function () {\n        showVariant(data);\n      }\n    };\n  },\n  VariantRevisionButton: function () {\n    var variant = Template.currentData();\n    return {\n      component: VisibilityButton,\n      toggleOn: variant.isVisible,\n      onClick: function (event) {\n        event.stopPropagation();\n        ReactionProduct.toggleVisibility(variant);\n      }\n    };\n  }\n}); /**\n     * variant events\n     */\n\nfunction showVariant(variant) {\n  var selectedProduct = ReactionProduct.selectedProduct();\n  ReactionProduct.setCurrentVariant(variant._id);\n  Session.set(\"variant-form-\" + variant._id, true);\n  Reaction.Router.go(\"product\", {\n    handle: selectedProduct.handle,\n    variantId: variant._id\n  });\n\n  if (Reaction.hasPermission(\"createProduct\")) {\n    Reaction.showActionView({\n      label: \"Edit Variant\",\n      i18nKeyLabel: \"productDetailEdit.editVariant\",\n      template: \"variantForm\",\n      data: variant\n    });\n  }\n}\n\nTemplate.variant.events({\n  \"click .variant-edit\": function () {\n    showVariant(this);\n  },\n  \"dblclick .variant-detail\": function () {\n    showVariant(this);\n  },\n  \"click .variant-detail\": function () {\n    Alerts.removeSeen();\n    ReactionProduct.setCurrentVariant(this._id);\n  }\n});","map":{"version":3,"sources":["/imports/plugins/included/product-variant/client/templates/products/productDetail/variants/variant.js"],"names":["Reaction","ReactionProduct","EditButton","VisibilityButton","Session","Template","variantIsSelected","variantId","current","selectedVariant","_id","ancestors","indexOf","variantIsInActionView","actionViewVariant","getActionView","data","isActionViewOpen","variant","helpers","progressBar","inventoryPercentage","displayQuantity","getVariantQuantity","displayPrice","getVariantPriceRange","isSoldOut","currentData","component","toggleOn","onClick","showVariant","VariantRevisionButton","isVisible","event","stopPropagation","toggleVisibility","selectedProduct","setCurrentVariant","set","Router","go","handle","hasPermission","showActionView","label","i18nKeyLabel","template","events","Alerts","removeSeen"],"mappings":";;;;;;AAAA,IAAS;AAAT,OAAyB,WAAzB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;G,AACA,AAAS,AAAuB,AAChC,AAAS,AAAY,AAAwB,AAC7C,AAAS,AAAe,AACxB,AAAS,AAAgB,AAEzB;;AACA,AAAS,AAAkB,AAAW;AACpC,AAAM,SAAU,kBAAgB,WAAhC,AAAgB;gCAChB;;MAAI,QAAA,AAAO,4EAAP,AAAmB,aAAa,cAAc,QAAd,AAAsB,OAAO,CAAC,QAAA,AAAQ,UAAR,AAAkB,QAApF,AAAI,AAA8D,AAA0B,aAAa,AACvG;WAAA,AAAO,AACR;AAED;;SAAA,AAAO,AACR;;;AAED,SAAA,AAAS,sBAAT,AAA+B,WAAW,AACxC;MAAM,oBAAoB,SAAA,AAAS,gBAAnC,AAAmD,AAEnD;;MAAA,AAAI,mBAAmB,AACrB;AACA;WAAO,kBAAA,AAAkB,cAAc,kBAAkB,kBAAlD,AAAgC,AAAoC,QAAQ,SAAnF,AAAmF,AAAS,AAC7F;AAED;;SAAA,AAAO,AACR;A,AAGD,EAIA,AAAS,AAAQ,AAAQ,AACvB,AAAa,AAAY,AACvB,AAAI,AAAK,AAAuB,AAAI;;;;AAClC,SAAO;AADT,AAEO,eAAI,AAAK,YAAT,AAAI,AAA4B,AAAI,AACzC;aAAA,AAAO,2BACR;;+CACD;AAAO,aAPc,AAOrB,AACD;AACD;;WAAiB,AAAY,AAC3B;AAAA,AAAI,AAAkB,AAAK,AAAM,AAC/B;AAAO,+BAAP,AACD;;aAED;AAdqB,AAcrB,AAAO,AACR,AACD;;WAAiB,AAAY,AAC3B;AAAA,AAAO,AAAgB,AAAmB,AAC3C;AAlBsB,+BAmBvB;WAAc,gBAAY,mBACxB;AAAA,AAAO,AAAgB,AAAqB,AAAK,AAClD;AArBsB,4BAsBvB;WAAW,AAAY,0CACrB;AAAA,AAAO,AAAgB,AAAmB,AAAQ,AACnD;AAxBsB;sDAyBvB;AAAa,AACX;AAAM,0BAAN,AAAa,AAAS,AAEtB;QAAO,gBAAA,AACL,AAAW,AACX;;iBACA;gBAAU,2BACR;2BAAA,AAAY,AACb;;AALH,AAAO,AAOR;AAPQ,AAEK,AAAsB,AAAK;AA9BlB;qCAoCvB;kBAAwB,SACtB,AAAM,AAAU,AAAS,AAEzB;;iBAAO,AACM,AACX;gBAAU,QAFL,AAEa;gCAClB;cAAA,AAAQ,AAAO,AACb;AAAM,wBAAN,iBACA;AAAA,AAAgB,AAAiB,AAClC;AANI,AACL;AADF,AAAO,AAQR;AA5CG,AACD,IAJL,AAkDA,A,AAlDyB;;;;8BAsDzB;MAAA,AAAS,AAAY,kBAArB,AAA8B,gBAC5B,AAAM,AAAkB,AAAgB,AAExC;kBAAA,AAAgB,kBAAkB,QAAlC,AAA0C,AAC1C;UAAA,AAAQ,IAAI,kBAAkB,QAA9B,AAAsC,KAAtC,AAA2C,AAC3C;WAAA,AAAS,OAAT,AAAgB,GAAhB,AAAmB;;uBAAW,AAAE,AAAQ,AAAgB,AAAQ;AAAlC;;eAA6C,AAAQ,gCAAnF,AAA8B;;aAE9B;AAAI,AAAS,oBAAb,AAAI,AAAuB,AAAkB,AAC3C;AAAS,gBAAT,AAAwB,AACtB;YADsB,AACf,AACP,AAAc,AACd;;AAHsB,AAGZ,AACV;AAJF,AAAwB,AAIhB;;AAET;;gBAGH;AAAA,AAAS,AAAQ,AAAO,AACtB;AAAuB,8BAAY,YACjC;gBAAA,AAAY,AACb;AAHqB,AAItB;2BAA4B,YAAY,AACtC;WALoB,AAKpB,AAAY,AACb,AACD;oBAAyB,kBAAY,KACnC;AARJ,AAAwB,AAQpB,AAAO,AAEP,AAAgB,AAAkB,AAAK,AACxC;AAbF","file":"/imports/plugins/included/product-variant/client/templates/products/productDetail/variants/variant.js.map","sourcesContent":["import { Reaction } from \"/client/api\";\nimport { ReactionProduct } from \"/lib/api\";\nimport { EditButton, VisibilityButton } from \"/imports/plugins/core/ui/client/components\";\nimport { Session } from \"meteor/session\";\nimport { Template } from \"meteor/templating\";\n\n// Duplicated in variantList/variantList.js\nfunction variantIsSelected(variantId) {\n  const current = ReactionProduct.selectedVariant();\n  if (typeof current === \"object\" && (variantId === current._id || ~current.ancestors.indexOf(variantId))) {\n    return true;\n  }\n\n  return false;\n}\n\nfunction variantIsInActionView(variantId) {\n  const actionViewVariant = Reaction.getActionView().data;\n\n  if (actionViewVariant) {\n    // Check if the variant is selected, and also visible & selected in the action view\n    return variantIsSelected(variantId) && variantIsSelected(actionViewVariant._id) && Reaction.isActionViewOpen();\n  }\n\n  return false;\n}\n\n\n/**\n * variant helpers\n */\n\nTemplate.variant.helpers({\n  progressBar: function () {\n    if (this.inventoryPercentage <= 10) {\n      return \"progress-bar-danger\";\n    } else if (this.inventoryPercentage <= 30) {\n      return \"progress-bar-warning\";\n    }\n    return \"progress-bar-success\";\n  },\n  selectedVariant: function () {\n    if (variantIsSelected(this._id)) {\n      return \"variant-detail-selected\";\n    }\n\n    return null;\n  },\n  displayQuantity: function () {\n    return ReactionProduct.getVariantQuantity(this);\n  },\n  displayPrice: function () {\n    return ReactionProduct.getVariantPriceRange(this._id);\n  },\n  isSoldOut: function () {\n    return ReactionProduct.getVariantQuantity(this) < 1;\n  },\n  EditButton() {\n    const data = Template.currentData();\n\n    return {\n      component: EditButton,\n      toggleOn: variantIsInActionView(data._id),\n      onClick() {\n        showVariant(data);\n      }\n    };\n  },\n  VariantRevisionButton() {\n    const variant = Template.currentData();\n\n    return {\n      component: VisibilityButton,\n      toggleOn: variant.isVisible,\n      onClick(event) {\n        event.stopPropagation();\n        ReactionProduct.toggleVisibility(variant);\n      }\n    };\n  }\n});\n\n/**\n * variant events\n */\n\nfunction showVariant(variant) {\n  const selectedProduct = ReactionProduct.selectedProduct();\n\n  ReactionProduct.setCurrentVariant(variant._id);\n  Session.set(\"variant-form-\" + variant._id, true);\n  Reaction.Router.go(\"product\", { handle: selectedProduct.handle, variantId: variant._id });\n\n  if (Reaction.hasPermission(\"createProduct\")) {\n    Reaction.showActionView({\n      label: \"Edit Variant\",\n      i18nKeyLabel: \"productDetailEdit.editVariant\",\n      template: \"variantForm\",\n      data: variant\n    });\n  }\n}\n\nTemplate.variant.events({\n  \"click .variant-edit\": function () {\n    showVariant(this);\n  },\n  \"dblclick .variant-detail\": function () {\n    showVariant(this);\n  },\n  \"click .variant-detail\": function () {\n    Alerts.removeSeen();\n\n    ReactionProduct.setCurrentVariant(this._id);\n  }\n});\n"]},"hash":"2cccdd0188ae276b5f01f5cf7aaa0eef964978b9"}
