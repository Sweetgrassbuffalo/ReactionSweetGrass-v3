{"version":3,"sources":["meteor://ðŸ’»app/packages/jeremy:stripe/stripe_client.js"],"names":["ReactiveStripe","load","_","once","stripeKey","createHeadTag","srcUrl","script","document","createElement","type","src","head","appendChild","_checkReady","i","checkReady","Meteor","setInterval","Stripe","StripeCheckout","setPublishableKey","_loaded","set","clearInterval","Error","ReactiveVar","loaded","get"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACAA,iBAAiB;AAEfC,QAAMC,EAAEC,IAAF,CAAO,UAASC,SAAT,EAAoB;AAC/B,QAAMC,gBAAgB,UAACC,MAAD,EAAY;AAChC,UAAIC,SAASC,SAASC,aAAT,CAAuB,QAAvB,CAAb;AACAF,aAAOG,IAAP,GAAc,iBAAd;AACAH,aAAOI,GAAP,GAAaL,MAAb;AACAE,eAASI,IAAT,CAAcC,WAAd,CAA0BN,MAA1B;AACD,KALD;;AAMAF,kBAAc,2BAAd;AACAA,kBAAc,yCAAd;;AAEA,SAAKS,WAAL,CAAiBV,SAAjB;AACD,GAXK,CAFS;AAefU,eAAa,UAASV,SAAT,EAAoB;AAAA;;AAC/B,QAAIW,IAAI,CAAR;AACA,QAAMC,aAAaC,OAAOC,WAAP,CAAmB,YAAM;AAC1C,UAAI,OAAOC,MAAP,KAAkB,WAAlB,IAAiC,OAAOC,cAAP,KAA0B,WAA/D,EAA4E;AAC1ED,eAAOE,iBAAP,CAAyBjB,SAAzB;;AACA,cAAKkB,OAAL,CAAaC,GAAb,CAAiB,IAAjB;;AACAN,eAAOO,aAAP,CAAqBR,UAArB;AACD,OAJD,MAIO;AACLD,aAAK,GAAL;;AACA,YAAIA,IAAI,KAAR,EAAe;AACb;AACA;AACAE,iBAAOO,aAAP,CAAqBR,UAArB;AACA,gBAAM,IAAIC,OAAOQ,KAAX,CAAiB,2CAAjB,CAAN;AACD;AACF;AACF,KAdkB,EAchB,GAdgB,CAAnB;AAeD,GAhCc;AAkCfH,WAAS,IAAII,WAAJ,CAAgB,KAAhB,CAlCM;AAoCfC,UAAQ,YAAW;AACjB,WAAO,KAAKL,OAAL,CAAaM,GAAb,EAAP;AACD;AAtCc,CAAjB,uF","file":"/packages/jeremy_stripe.js","sourcesContent":["\nReactiveStripe = {\n\n  load: _.once(function(stripeKey) {\n    const createHeadTag = (srcUrl) => {\n      let script = document.createElement(\"script\");\n      script.type = \"text/javascript\";\n      script.src = srcUrl;\n      document.head.appendChild(script);\n    }\n    createHeadTag(\"https://js.stripe.com/v2/\");\n    createHeadTag(\"https://checkout.stripe.com/checkout.js\");\n\n    this._checkReady(stripeKey);\n  }),\n\n  _checkReady: function(stripeKey) {\n    let i = 0;\n    const checkReady = Meteor.setInterval(() => {\n      if (typeof Stripe !== \"undefined\" && typeof StripeCheckout !== \"undefined\") {\n        Stripe.setPublishableKey(stripeKey);\n        this._loaded.set(true);\n        Meteor.clearInterval(checkReady);\n      } else {\n        i += 100;\n        if (i > 10000) {\n          // stop checking if the lib isn\"t loaded within 10 secs,\n          // then throw an error\n          Meteor.clearInterval(checkReady);\n          throw new Meteor.Error(\"Error loading Stripe libs from their CDN.\");\n        }\n      }\n    }, 100);\n  },\n\n  _loaded: new ReactiveVar(false),\n\n  loaded: function() {\n    return this._loaded.get();\n  }\n\n};\n"]}